{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\79131\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\\\u0445\\u043B\\u0430\\u043C\\\\react project\\\\client\\\\src\\\\components\\\\Tables\\\\EditThemeList\\\\Secretary\\\\EditThemesListSecretaryForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Form, Button, Row, Col } from 'react-bootstrap';\nimport plus from '../../../../img/plus.png';\nimport del from '../../../../img/del.png';\nimport edit from '../../../../img/edit.png';\nimport styles from '../Teacher/EditThemeList.module.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EditThemesListSecretaryForm = ({\n  themesList: initialThemesList,\n  data,\n  teachers_list\n}) => {\n  _s();\n  const [themesList, setThemesList] = useState(initialThemesList.theme_list || []);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [editingData, setEditingData] = useState(null);\n  const [editFormVisibleIndex, setEditFormVisibleIndex] = useState(null);\n  const [isLinked, setIsLinked] = useState(false);\n  const [filterAuthor, setFilterAuthor] = useState('');\n  const [authorType, setAuthorType] = useState('');\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const addRow = () => {\n    const newRow = {\n      id: themesList.length ? Math.max(...themesList.map(item => item.id)) + 1 : 1,\n      name: '',\n      teacher: {\n        user: data // Устанавливаем текущего пользователя в качестве преподавателя\n      },\n      company: {\n        name: '',\n        last_name_of_responsible: '',\n        first_name_of_responsible: '',\n        patronymic_of_responsible: '',\n        job_title_of_responsible: '',\n        additional_information: ''\n      },\n      free: true,\n      fqw_by_application: '',\n      reviewer: {\n        id: null,\n        last_name: null,\n        first_name: null,\n        patronymic: null\n      },\n      by_student: false,\n      department: false\n    };\n    const updatedThemesList = [newRow, ...themesList];\n    setThemesList(updatedThemesList);\n    setEditingIndex(newRow.id);\n    setEditingData(newRow);\n    setAuthorType('');\n  };\n  const handleSave = () => {\n    const updatedThemesList = themesList.map(item => item.id === editingIndex ? {\n      ...item,\n      ...editingData\n    } : item);\n    setThemesList(updatedThemesList);\n    setEditFormVisibleIndex(null); // Устанавливаем null, чтобы скрыть форму редактирования\n    setEditingIndex(null);\n    setEditingData(null);\n  };\n  const handleFilterAuthorChange = e => {\n    setFilterAuthor(e.target.value);\n  };\n  const filteredThemesList = themesList.filter(item => {\n    const filterText = filterAuthor.toLowerCase();\n    const startsWith = (text, filter) => text.toLowerCase().startsWith(filter);\n    if (!filterText) {\n      return true;\n    } else if (!item.teacher && !item.by_student && !item.department) {\n      return startsWith('каф', filterText);\n    } else if (item.teacher && item.teacher.user) {\n      const fullName = `${item.teacher.user.last_name} ${item.teacher.user.first_name} ${item.teacher.user.patronymic}`;\n      return startsWith(fullName, filterText);\n    } else if (item.by_student && (startsWith('предложено студентом', filterText) || startsWith('студент', filterText) || startsWith('студ', filterText))) {\n      return true;\n    } else if (item.department) {\n      const departmentKeywords = ['сии', 'кафедра сии', 'кафедра', 'каф'];\n      return departmentKeywords.some(keyword => startsWith(keyword, filterText));\n    } else {\n      return false;\n    }\n  });\n  const handleEditClick = index => {\n    const themeToEdit = themesList.find(item => item.id === index);\n    if (themeToEdit) {\n      setEditingIndex(index);\n      setEditingData(themeToEdit);\n      setEditFormVisibleIndex(index);\n      setIsLinked(!!themeToEdit.company && !!themeToEdit.company.name);\n      setAuthorType(themeToEdit.by_student ? 'student' : themeToEdit.department ? 'department' : 'teacher');\n    } else {\n      console.error(`Theme with id ${index} not found in themesList.`);\n    }\n  };\n  const handleCancel = () => {\n    setEditFormVisibleIndex(null);\n    if (editingIndex === null) {\n      const newData = themesList.filter(item => item.id !== editingIndex);\n      setThemesList(newData);\n    }\n    setEditingIndex(null);\n  };\n  const handleDeleteClick = index => {\n    const newData = themesList.filter(item => item.id !== index);\n    setThemesList(newData);\n    if (editFormVisibleIndex === index) {\n      setEditFormVisibleIndex(null);\n    }\n    setEditingIndex(null);\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    const updatedEditingData = {\n      ...editingData,\n      [name]: type === 'checkbox' ? checked : value\n    };\n    setEditingData(updatedEditingData);\n  };\n  const handleCompanyChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    const updatedEditingData = {\n      ...editingData,\n      company: {\n        ...editingData.company,\n        [name]: value\n      }\n    };\n    setEditingData(updatedEditingData);\n  };\n  const handleReviewerChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    const updatedReviewer = {\n      ...editingData.reviewer,\n      [name]: value\n    };\n    const updatedEditingData = {\n      ...editingData,\n      reviewer: updatedReviewer\n    };\n    setEditingData(updatedEditingData);\n  };\n  const handleRadioChange = value => {\n    setIsLinked(value === 'yes');\n    if (value === 'no') {\n      // Если выбрана опция \"Нет\", очищаем поля организации\n      const updatedEditingData = {\n        ...editingData,\n        company: {\n          name: '',\n          last_name_of_responsible: '',\n          first_name_of_responsible: '',\n          patronymic_of_responsible: '',\n          job_title_of_responsible: '',\n          additional_information: ''\n        }\n      };\n      setEditingData(updatedEditingData);\n    }\n  };\n  const handleTeacherSelectChange = e => {\n    const teacherId = e.target.value;\n    const selectedTeacher = teachers_list.teachers_list.find(teacher => teacher.user.id === parseInt(teacherId));\n\n    // Установите выбранного преподавателя в состояние selectedTeacher\n    setSelectedTeacher(selectedTeacher);\n    const updatedEditingData = {\n      ...editingData,\n      teacher: {\n        user: selectedTeacher.user\n      }\n    };\n    setEditingData(updatedEditingData);\n  };\n  const handleAuthorTypeChange = e => {\n    const {\n      value\n    } = e.target;\n    setAuthorType(value);\n\n    // Сбрасываем выбранных преподавателя, если тип автора изменен\n    setSelectedTeacher(null);\n\n    // Устанавливаем соответствующие флаги в зависимости от выбранного типа автора\n    switch (value) {\n      case 'teacher':\n        setEditingData(prevState => ({\n          ...prevState,\n          by_student: false,\n          department: false\n        }));\n        break;\n      case 'department':\n        setEditingData(prevState => ({\n          ...prevState,\n          by_student: false,\n          department: true\n        }));\n        break;\n      case 'student':\n        setEditingData(prevState => ({\n          ...prevState,\n          by_student: true,\n          department: false\n        }));\n        break;\n      default:\n        break;\n    }\n  };\n  const getTeacherName = item => {\n    if (item.teacher && item.teacher.user) {\n      return `${item.teacher.user.last_name} ${item.teacher.user.first_name} ${item.teacher.user.patronymic}`;\n    } else if (item.by_student) {\n      return 'Предложено студентом';\n    } else if (item.department) {\n      return 'Кафедра СИИ';\n    } else {\n      return ''; // Для новых записей без автора\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-center\",\n      children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u043F\\u0438\\u0441\\u043A\\u0430 \\u0442\\u0435\\u043C \\u0412\\u041A\\u0420\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      as: Row,\n      controlId: \"filterAuthor\",\n      className: \"justify-content-center\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        column: true,\n        sm: 2,\n        className: \"text-center my-3\",\n        children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440 \\u043F\\u043E \\u0430\\u0432\\u0442\\u043E\\u0440\\u0443\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          value: filterAuthor,\n          onChange: handleFilterAuthorChange,\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F \\u0430\\u0432\\u0442\\u043E\\u0440\\u0430 \\u0434\\u043B\\u044F \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\",\n          className: styles.block_form\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.catch,\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        className: styles.table_themes,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              rowSpan: \"2\",\n              width: \"10%\",\n              children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              rowSpan: \"2\",\n              width: \"50%\",\n              children: \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u0435\\u043C\\u044B \\u0412\\u041A\\u0420\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              rowSpan: \"2\",\n              width: \"30%\",\n              children: \"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: \"2\",\n              children: \"\\u0420\\u0435\\u0446\\u0435\\u043D\\u0437\\u0435\\u043D\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              rowSpan: \"2\",\n              width: \"5%\",\n              children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              rowSpan: \"2\",\n              width: \"5%\",\n              children: \"\\u0423\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0418\\u043C\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredThemesList.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: getTeacherName(item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.company ? item.company.name : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.reviewer ? item.reviewer.last_name : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.reviewer ? item.reviewer.first_name : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: edit,\n                className: \"mr-2\",\n                alt: \"edit\",\n                onClick: () => handleEditClick(item.id),\n                style: {\n                  cursor: 'pointer'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: del,\n                className: \"mr-2\",\n                alt: \"delete\",\n                onClick: () => handleDeleteClick(item.id),\n                style: {\n                  cursor: 'pointer'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.catch,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.form_of_the_author,\n          children: editingIndex !== null && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Row,\n              controlId: \"formTeacherSelect\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                column: true,\n                sm: 3,\n                children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0435\\u043F\\u043E\\u0434\\u0430\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  as: \"select\",\n                  value: selectedTeacher ? selectedTeacher.user.id : '',\n                  onChange: handleTeacherSelectChange,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0435\\u043F\\u043E\\u0434\\u0430\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 23\n                  }, this), teachers_list.teachers_list.map(teacher => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: teacher.user.id,\n                    children: `${teacher.user.last_name} ${teacher.user.first_name} ${teacher.user.patronymic}`\n                  }, teacher.user.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Row,\n              controlId: \"formThemeName\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                column: true,\n                sm: 3,\n                children: \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u0435\\u043C\\u044B \\u0412\\u041A\\u0420:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  name: \"name\",\n                  value: editingData.name,\n                  onChange: handleInputChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"success\",\n                onClick: handleSave,\n                children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 19\n              }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                onClick: handleCancel,\n                children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.catch,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            className: \"float-right mb-4\",\n            onClick: addRow,\n            children: [\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: plus,\n              alt: \"plus\",\n              className: \"ml-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(EditThemesListSecretaryForm, \"k+Pa064eCQdX9rxquz8BAu5Plhw=\");\n_c = EditThemesListSecretaryForm;\nexport default EditThemesListSecretaryForm;\nvar _c;\n$RefreshReg$(_c, \"EditThemesListSecretaryForm\");","map":{"version":3,"names":["React","useState","Form","Button","Row","Col","plus","del","edit","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","EditThemesListSecretaryForm","themesList","initialThemesList","data","teachers_list","_s","setThemesList","theme_list","editingIndex","setEditingIndex","editingData","setEditingData","editFormVisibleIndex","setEditFormVisibleIndex","isLinked","setIsLinked","filterAuthor","setFilterAuthor","authorType","setAuthorType","selectedTeacher","setSelectedTeacher","addRow","newRow","id","length","Math","max","map","item","name","teacher","user","company","last_name_of_responsible","first_name_of_responsible","patronymic_of_responsible","job_title_of_responsible","additional_information","free","fqw_by_application","reviewer","last_name","first_name","patronymic","by_student","department","updatedThemesList","handleSave","handleFilterAuthorChange","e","target","value","filteredThemesList","filter","filterText","toLowerCase","startsWith","text","fullName","departmentKeywords","some","keyword","handleEditClick","index","themeToEdit","find","console","error","handleCancel","newData","handleDeleteClick","handleInputChange","type","checked","updatedEditingData","handleCompanyChange","handleReviewerChange","updatedReviewer","handleRadioChange","handleTeacherSelectChange","teacherId","parseInt","handleAuthorTypeChange","prevState","getTeacherName","children","className","fileName","_jsxFileName","lineNumber","columnNumber","Group","as","controlId","Label","column","sm","Control","onChange","placeholder","block_form","catch","table_themes","rowSpan","width","colSpan","src","alt","onClick","style","cursor","form_of_the_author","variant","_c","$RefreshReg$"],"sources":["C:/Users/79131/OneDrive/Рабочий стол/хлам/react project/client/src/components/Tables/EditThemeList/Secretary/EditThemesListSecretaryForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Form, Button, Row, Col } from 'react-bootstrap';\r\nimport plus from '../../../../img/plus.png';\r\nimport del from '../../../../img/del.png';\r\nimport edit from '../../../../img/edit.png';\r\nimport styles from '../Teacher/EditThemeList.module.css';\r\n\r\nconst EditThemesListSecretaryForm = ({ themesList: initialThemesList, data, teachers_list }) => {\r\n  const [themesList, setThemesList] = useState(initialThemesList.theme_list || []);\r\n  const [editingIndex, setEditingIndex] = useState(null);\r\n  const [editingData, setEditingData] = useState(null);\r\n  const [editFormVisibleIndex, setEditFormVisibleIndex] = useState(null);\r\n  const [isLinked, setIsLinked] = useState(false);\r\n  const [filterAuthor, setFilterAuthor] = useState('');\r\n\r\n  const [authorType, setAuthorType] = useState('');\r\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\r\n\r\n  const addRow = () => {\r\n    const newRow = {\r\n      id: themesList.length ? Math.max(...themesList.map(item => item.id)) + 1 : 1,\r\n      name: '',\r\n      teacher: {\r\n        user: data // Устанавливаем текущего пользователя в качестве преподавателя\r\n      },\r\n      company: {\r\n        name: '',\r\n        last_name_of_responsible: '',\r\n        first_name_of_responsible: '',\r\n        patronymic_of_responsible: '',\r\n        job_title_of_responsible: '',\r\n        additional_information: '',\r\n      },\r\n      free: true,\r\n      fqw_by_application: '',\r\n      reviewer: {\r\n          id: null,\r\n          last_name: null,\r\n          first_name: null,\r\n          patronymic: null\r\n      },\r\n      by_student: false,\r\n      department: false,\r\n    };\r\n\r\n    const updatedThemesList = [newRow, ...themesList];\r\n    setThemesList(updatedThemesList);\r\n    setEditingIndex(newRow.id);\r\n    setEditingData(newRow);\r\n    setAuthorType('');\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const updatedThemesList = themesList.map(item =>\r\n      item.id === editingIndex ? { ...item, ...editingData } : item\r\n    );\r\n    setThemesList(updatedThemesList);\r\n    setEditFormVisibleIndex(null); // Устанавливаем null, чтобы скрыть форму редактирования\r\n    setEditingIndex(null);\r\n    setEditingData(null);\r\n  };\r\n\r\n  const handleFilterAuthorChange = (e) => {\r\n    setFilterAuthor(e.target.value);\r\n  };\r\n\r\n  const filteredThemesList = themesList.filter(item => {\r\n    const filterText = filterAuthor.toLowerCase();\r\n  \r\n    const startsWith = (text, filter) => text.toLowerCase().startsWith(filter);\r\n  \r\n    if (!filterText) {\r\n      return true;\r\n    } else if (!item.teacher && !item.by_student && !item.department) {\r\n      return startsWith('каф', filterText); \r\n    } else if (item.teacher && item.teacher.user) {\r\n      const fullName = `${item.teacher.user.last_name} ${item.teacher.user.first_name} ${item.teacher.user.patronymic}`;\r\n      return startsWith(fullName, filterText);\r\n    } else if (item.by_student && (startsWith('предложено студентом', filterText) || startsWith('студент', filterText) || startsWith('студ', filterText))) {\r\n      return true;\r\n    } else if (item.department) {\r\n      const departmentKeywords = ['сии', 'кафедра сии', 'кафедра', 'каф'];\r\n      return departmentKeywords.some(keyword => startsWith(keyword, filterText));\r\n    } else {\r\n      return false; \r\n    }\r\n  });\r\n\r\n  const handleEditClick = (index) => {\r\n    const themeToEdit = themesList.find(item => item.id === index);\r\n    if (themeToEdit) {\r\n      setEditingIndex(index);\r\n      setEditingData(themeToEdit);\r\n      setEditFormVisibleIndex(index);\r\n      setIsLinked(!!themeToEdit.company && !!themeToEdit.company.name);\r\n      setAuthorType(\r\n        themeToEdit.by_student ? 'student' :\r\n        themeToEdit.department ? 'department' :\r\n        'teacher'\r\n      );\r\n    } else {\r\n      console.error(`Theme with id ${index} not found in themesList.`);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditFormVisibleIndex(null);\r\n    if (editingIndex === null) {\r\n      const newData = themesList.filter(item => item.id !== editingIndex);\r\n      setThemesList(newData);\r\n    }\r\n    setEditingIndex(null);\r\n  };\r\n\r\n  const handleDeleteClick = (index) => {\r\n    const newData = themesList.filter(item => item.id !== index);\r\n    setThemesList(newData);\r\n    if (editFormVisibleIndex === index) {\r\n      setEditFormVisibleIndex(null);\r\n    }\r\n    setEditingIndex(null);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    const updatedEditingData = {\r\n      ...editingData,\r\n      [name]: type === 'checkbox' ? checked : value,\r\n    };\r\n    setEditingData(updatedEditingData);\r\n  };\r\n\r\n  const handleCompanyChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const updatedEditingData = {\r\n      ...editingData,\r\n      company: {\r\n        ...editingData.company,\r\n        [name]: value,\r\n      },\r\n    };\r\n    setEditingData(updatedEditingData);\r\n  };\r\n\r\n  const handleReviewerChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const updatedReviewer = {\r\n      ...editingData.reviewer,\r\n      [name]: value,\r\n    };\r\n    const updatedEditingData = {\r\n      ...editingData,\r\n      reviewer: updatedReviewer,\r\n    };\r\n    setEditingData(updatedEditingData);\r\n  };\r\n\r\n  const handleRadioChange = (value) => {\r\n    setIsLinked(value === 'yes');\r\n    if (value === 'no') {\r\n      // Если выбрана опция \"Нет\", очищаем поля организации\r\n      const updatedEditingData = {\r\n        ...editingData,\r\n        company: {\r\n          name: '',\r\n          last_name_of_responsible: '',\r\n          first_name_of_responsible: '',\r\n          patronymic_of_responsible: '',\r\n          job_title_of_responsible: '',\r\n          additional_information: '',\r\n        },\r\n      };\r\n      setEditingData(updatedEditingData);\r\n    }\r\n  };\r\n\r\n  const handleTeacherSelectChange = (e) => {\r\n    const teacherId = e.target.value;\r\n    const selectedTeacher = teachers_list.teachers_list.find(teacher => teacher.user.id === parseInt(teacherId));\r\n  \r\n    // Установите выбранного преподавателя в состояние selectedTeacher\r\n    setSelectedTeacher(selectedTeacher);\r\n  \r\n    const updatedEditingData = {\r\n      ...editingData,\r\n      teacher: {\r\n        user: selectedTeacher.user\r\n      }\r\n    };\r\n  \r\n    setEditingData(updatedEditingData);\r\n  };\r\n\r\n  const handleAuthorTypeChange = (e) => {\r\n    const { value } = e.target;\r\n    setAuthorType(value);\r\n    \r\n    // Сбрасываем выбранных преподавателя, если тип автора изменен\r\n    setSelectedTeacher(null);\r\n    \r\n    // Устанавливаем соответствующие флаги в зависимости от выбранного типа автора\r\n    switch (value) {\r\n      case 'teacher':\r\n        setEditingData(prevState => ({\r\n          ...prevState,\r\n          by_student: false,\r\n          department: false\r\n        }));\r\n        break;\r\n      case 'department':\r\n        setEditingData(prevState => ({\r\n          ...prevState,\r\n          by_student: false,\r\n          department: true\r\n        }));\r\n        break;\r\n      case 'student':\r\n        setEditingData(prevState => ({\r\n          ...prevState,\r\n          by_student: true,\r\n          department: false\r\n        }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const getTeacherName = (item) => {\r\n    if (item.teacher && item.teacher.user) {\r\n      return `${item.teacher.user.last_name} ${item.teacher.user.first_name} ${item.teacher.user.patronymic}`;\r\n    } else if (item.by_student) {\r\n      return 'Предложено студентом';\r\n    } else if (item.department) {\r\n      return 'Кафедра СИИ';\r\n    } else {\r\n      return ''; // Для новых записей без автора\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h4 className=\"mb-4 text-center\">Редактирование списка тем ВКР</h4>\r\n      <Form.Group as={Row} controlId=\"filterAuthor\" className=\"justify-content-center\">\r\n        <Form.Label column sm={2} className=\"text-center my-3\">Фильтр по автору</Form.Label>\r\n        <Col sm={6}>\r\n          <Form.Control\r\n            type=\"text\"\r\n            value={filterAuthor}\r\n            onChange={handleFilterAuthorChange}\r\n            placeholder=\"Введите имя автора для фильтрации\"\r\n            className={styles.block_form}\r\n          />\r\n        </Col>\r\n      </Form.Group>\r\n\r\n      <div className={styles.catch}>\r\n        <table className={styles.table_themes}>\r\n          <thead className=\"text-center\">\r\n            <tr>\r\n              <th rowSpan=\"2\" width=\"10%\">Автор</th>\r\n              <th rowSpan=\"2\" width=\"50%\">Наименование темы ВКР</th>\r\n              <th rowSpan=\"2\" width=\"30%\">Компания</th>\r\n              <th colSpan=\"2\">Рецензент</th>\r\n              <th rowSpan=\"2\" width=\"5%\">Редактирование</th>\r\n              <th rowSpan=\"2\" width=\"5%\">Удаление</th>\r\n            </tr>\r\n            <tr>\r\n              <th>Фамилия</th>\r\n              <th>Имя</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredThemesList.map(item => (\r\n              <tr key={item.id}>\r\n                <td>{getTeacherName(item)}</td>\r\n                <td>{item.name}</td>\r\n                <td>{item.company ? item.company.name : ''}</td>\r\n                <td>{item.reviewer ? item.reviewer.last_name : ''}</td>\r\n                <td>{item.reviewer ? item.reviewer.first_name : ''}</td>\r\n                <td className=\"text-center\">\r\n                  <img\r\n                    src={edit}\r\n                    className=\"mr-2\"\r\n                    alt=\"edit\"\r\n                    onClick={() => handleEditClick(item.id)}\r\n                    style={{ cursor: 'pointer' }}\r\n                  />\r\n                </td>\r\n                <td className=\"text-center\">\r\n                  <img\r\n                    src={del}\r\n                    className=\"mr-2\"\r\n                    alt=\"delete\"\r\n                    onClick={() => handleDeleteClick(item.id)}\r\n                    style={{ cursor: 'pointer' }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <div className={styles.catch}>\r\n          <div className={styles.form_of_the_author}>\r\n            {editingIndex !== null && (\r\n              <>\r\n                <Form.Group as={Row} controlId=\"formTeacherSelect\">\r\n                  <Form.Label column sm={3}>\r\n                    Выберите преподавателя:\r\n                  </Form.Label>\r\n                  <Col sm={6}>\r\n                    <Form.Control\r\n                      as=\"select\"\r\n                      value={selectedTeacher ? selectedTeacher.user.id : ''}\r\n                      onChange={handleTeacherSelectChange}\r\n                    >\r\n                      <option value=\"\">Выберите преподавателя</option>\r\n                      {teachers_list.teachers_list.map(teacher => (\r\n                        <option key={teacher.user.id} value={teacher.user.id}>\r\n                          {`${teacher.user.last_name} ${teacher.user.first_name} ${teacher.user.patronymic}`}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n                </Form.Group>\r\n\r\n                <Form.Group as={Row} controlId=\"formThemeName\">\r\n                  <Form.Label column sm={3}>\r\n                    Наименование темы ВКР:\r\n                  </Form.Label>\r\n                  <Col sm={6}>\r\n                    <Form.Control\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      value={editingData.name}\r\n                      onChange={handleInputChange}\r\n                    />\r\n                  </Col>\r\n                </Form.Group>\r\n\r\n                {/* Другие поля для редактирования, например, компания и рецензент */}\r\n\r\n                <div className=\"text-center\">\r\n                  <Button variant=\"success\" onClick={handleSave}>Сохранить</Button>{' '}\r\n                  <Button variant=\"secondary\" onClick={handleCancel}>Отмена</Button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n          <div className={styles.catch}>\r\n            <Button variant=\"primary\" className=\"float-right mb-4\" onClick={addRow}>\r\n              Добавить новую запись\r\n              <img src={plus} alt=\"plus\" className=\"ml-2\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditThemesListSecretaryForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}