{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nvar _require = require(\"../doc-utils.js\"),\n  chunkBy = _require.chunkBy,\n  last = _require.last,\n  isParagraphStart = _require.isParagraphStart,\n  isModule = _require.isModule,\n  isParagraphEnd = _require.isParagraphEnd,\n  isContent = _require.isContent,\n  startsWith = _require.startsWith,\n  isTagEnd = _require.isTagEnd,\n  isTagStart = _require.isTagStart,\n  getSingleAttribute = _require.getSingleAttribute,\n  setSingleAttribute = _require.setSingleAttribute;\nvar filetypes = require(\"../filetypes.js\");\nvar wrapper = require(\"../module-wrapper.js\");\nvar moduleName = \"loop\";\nfunction hasContent(parts) {\n  return parts.some(function (part) {\n    return isContent(part);\n  });\n}\nfunction getFirstMeaningFulPart(parsed) {\n  for (var i = 0, len = parsed.length; i < len; i++) {\n    if (parsed[i].type !== \"content\") {\n      return parsed[i];\n    }\n  }\n  return null;\n}\nfunction isInsideParagraphLoop(part) {\n  var firstMeaningfulPart = getFirstMeaningFulPart(part.subparsed);\n  return firstMeaningfulPart != null && firstMeaningfulPart.tag !== \"w:t\";\n}\nfunction getPageBreakIfApplies(part) {\n  return part.hasPageBreak && isInsideParagraphLoop(part) ? '<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>' : \"\";\n}\nfunction isEnclosedByParagraphs(parsed) {\n  return parsed.length && isParagraphStart(parsed[0]) && isParagraphEnd(last(parsed));\n}\nfunction getOffset(chunk) {\n  return hasContent(chunk) ? 0 : chunk.length;\n}\nfunction addPageBreakAtEnd(subRendered) {\n  var j = subRendered.parts.length - 1;\n  if (subRendered.parts[j] === \"</w:p>\") {\n    subRendered.parts.splice(j, 0, '<w:r><w:br w:type=\"page\"/></w:r>');\n  } else {\n    subRendered.parts.push('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n  }\n}\nfunction addPageBreakAtBeginning(subRendered) {\n  subRendered.parts.unshift('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n}\nfunction isContinuous(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf(\"continuous\") !== -1;\n  });\n}\nfunction isNextPage(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf('w:val=\"nextPage\"') !== -1;\n  });\n}\nfunction addSectionBefore(parts, sect) {\n  return [\"<w:p><w:pPr>\".concat(sect.map(function (_ref) {\n    var value = _ref.value;\n    return value;\n  }).join(\"\"), \"</w:pPr></w:p>\")].concat(parts);\n}\nfunction addContinuousType(parts) {\n  var stop = false;\n  var inSectPr = false;\n  return parts.reduce(function (result, part) {\n    if (stop === false && startsWith(part, \"<w:sectPr\")) {\n      inSectPr = true;\n    }\n    if (inSectPr) {\n      if (startsWith(part, \"<w:type\")) {\n        stop = true;\n      }\n      if (stop === false && startsWith(part, \"</w:sectPr\")) {\n        result.push('<w:type w:val=\"continuous\"/>');\n      }\n    }\n    result.push(part);\n    return result;\n  }, []);\n}\nfunction dropHeaderFooterRefs(parts) {\n  return parts.filter(function (text) {\n    return !startsWith(text, \"<w:headerReference\") && !startsWith(text, \"<w:footerReference\");\n  });\n}\nfunction hasPageBreak(chunk) {\n  return chunk.some(function (part) {\n    return part.tag === \"w:br\" && part.value.indexOf('w:type=\"page\"') !== -1;\n  });\n}\nfunction hasImage(chunk) {\n  return chunk.some(function (_ref2) {\n    var tag = _ref2.tag;\n    return tag === \"w:drawing\";\n  });\n}\nfunction getSectPr(chunks) {\n  var collectSectPr = false;\n  var sectPrs = [];\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPrs.push([]);\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      sectPrs[sectPrs.length - 1].push(part);\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrs;\n}\nfunction getSectPrHeaderFooterChangeCount(chunks) {\n  var collectSectPr = false;\n  var sectPrCount = 0;\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      if (part.tag === \"w:headerReference\" || part.tag === \"w:footerReference\") {\n        sectPrCount++;\n        collectSectPr = false;\n      }\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrCount;\n}\nfunction getLastSectPr(parsed) {\n  var sectPr = [];\n  var inSectPr = false;\n  for (var i = parsed.length - 1; i >= 0; i--) {\n    var part = parsed[i];\n    if (isTagEnd(\"w:sectPr\", part)) {\n      inSectPr = true;\n    }\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPr.unshift(part.value);\n      inSectPr = false;\n    }\n    if (inSectPr) {\n      sectPr.unshift(part.value);\n    }\n    if (isParagraphStart(part)) {\n      if (sectPr.length > 0) {\n        return sectPr.join(\"\");\n      }\n      break;\n    }\n  }\n  return \"\";\n}\nvar LoopModule = /*#__PURE__*/function () {\n  function LoopModule() {\n    _classCallCheck(this, LoopModule);\n    this.name = \"LoopModule\";\n    this.inXfrm = false;\n    this.totalSectPr = 0;\n    this.prefix = {\n      start: \"#\",\n      end: \"/\",\n      dash: /^-([^\\s]+)\\s(.+)/,\n      inverted: \"^\"\n    };\n  }\n  return _createClass(LoopModule, [{\n    key: \"optionsTransformer\",\n    value: function optionsTransformer(opts, docxtemplater) {\n      this.docxtemplater = docxtemplater;\n      return opts;\n    }\n  }, {\n    key: \"preparse\",\n    value: function preparse(parsed, _ref3) {\n      var contentType = _ref3.contentType;\n      if (filetypes.main.indexOf(contentType) !== -1) {\n        this.sects = getSectPr(parsed);\n      }\n    }\n  }, {\n    key: \"matchers\",\n    value: function matchers() {\n      var module = moduleName;\n      return [[this.prefix.start, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: false\n      }], [this.prefix.inverted, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: true\n      }], [this.prefix.end, module, {\n        location: \"end\"\n      }], [this.prefix.dash, module, function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 3),\n          expandTo = _ref5[1],\n          value = _ref5[2];\n        return {\n          location: \"start\",\n          inverted: false,\n          expandTo: expandTo,\n          value: value\n        };\n      }]];\n    }\n  }, {\n    key: \"getTraits\",\n    value: function getTraits(traitName, parsed) {\n      // Stryker disable all : because getTraits should disappear in v4\n      if (traitName !== \"expandPair\") {\n        return;\n      }\n      // Stryker restore all\n\n      return parsed.reduce(function (tags, part, offset) {\n        if (isModule(part, moduleName) && part.subparsed == null) {\n          tags.push({\n            part: part,\n            offset: offset\n          });\n        }\n        return tags;\n      }, []);\n    }\n  }, {\n    key: \"postparse\",\n    value: function postparse(parsed, _ref6) {\n      var basePart = _ref6.basePart;\n      if (basePart && this.docxtemplater.fileType === \"docx\" && parsed.length > 0) {\n        basePart.sectPrCount = getSectPrHeaderFooterChangeCount(parsed);\n        this.totalSectPr += basePart.sectPrCount;\n        var sects = this.sects;\n        sects.some(function (sect, index) {\n          if (basePart.lIndex < sect[0].lIndex) {\n            if (index + 1 < sects.length && isContinuous(sects[index + 1])) {\n              basePart.addContinuousType = true;\n            }\n            return true;\n          }\n          if (parsed[0].lIndex < sect[0].lIndex && sect[0].lIndex < basePart.lIndex) {\n            if (isNextPage(sects[index])) {\n              basePart.addNextPage = {\n                index: index\n              };\n            }\n            return true;\n          }\n        });\n        basePart.lastParagrapSectPr = getLastSectPr(parsed);\n      }\n      if (!basePart || basePart.expandTo !== \"auto\" || basePart.module !== moduleName || !isEnclosedByParagraphs(parsed)) {\n        return parsed;\n      }\n      basePart.paragraphLoop = true;\n      var level = 0;\n      var chunks = chunkBy(parsed, function (p) {\n        if (isParagraphStart(p)) {\n          level++;\n          if (level === 1) {\n            return \"start\";\n          }\n        }\n        if (isParagraphEnd(p)) {\n          level--;\n          if (level === 0) {\n            return \"end\";\n          }\n        }\n        return null;\n      });\n      var firstChunk = chunks[0];\n      var lastChunk = last(chunks);\n      var firstOffset = getOffset(firstChunk);\n      var lastOffset = getOffset(lastChunk);\n      basePart.hasPageBreakBeginning = hasPageBreak(firstChunk);\n      basePart.hasPageBreak = hasPageBreak(lastChunk);\n      if (hasImage(firstChunk)) {\n        firstOffset = 0;\n      }\n      if (hasImage(lastChunk)) {\n        lastOffset = 0;\n      }\n      return parsed.slice(firstOffset, parsed.length - lastOffset);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(part, options) {\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var sm = options.scopeManager;\n      var promisedValue = sm.getValueAsync(part.value, {\n        part: part\n      });\n      var promises = [];\n      function loopOver(scope, i, length) {\n        var scopeManager = sm.createSubScopeManager(scope, part.value, i, part, length);\n        promises.push(options.resolve(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        })));\n      }\n      var errorList = [];\n      return promisedValue.then(function (values) {\n        return new Promise(function (resolve) {\n          if (values instanceof Array) {\n            Promise.all(values).then(resolve);\n          } else {\n            resolve(values);\n          }\n        }).then(function (values) {\n          sm.loopOverValue(values, loopOver, part.inverted);\n          return Promise.all(promises).then(function (r) {\n            return r.map(function (_ref7) {\n              var resolved = _ref7.resolved,\n                errors = _ref7.errors;\n              errorList.push.apply(errorList, _toConsumableArray(errors));\n              return resolved;\n            });\n          }).then(function (value) {\n            if (errorList.length > 0) {\n              throw errorList;\n            }\n            return value;\n          });\n        });\n      });\n    }\n    // eslint-disable-next-line complexity\n  }, {\n    key: \"render\",\n    value: function render(part, options) {\n      if (part.tag === \"p:xfrm\") {\n        this.inXfrm = part.position === \"start\";\n      }\n      if (part.tag === \"a:ext\" && this.inXfrm) {\n        this.lastExt = part;\n        return part;\n      }\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var totalValue = [];\n      var errors = [];\n      var heightOffset = 0;\n      var self = this;\n      var firstTag = part.subparsed[0];\n      var tagHeight = 0;\n      if ((firstTag === null || firstTag === void 0 ? void 0 : firstTag.tag) === \"a:tr\") {\n        tagHeight = +getSingleAttribute(firstTag.value, \"h\");\n      }\n      heightOffset -= tagHeight;\n      var a16RowIdOffset = 0;\n      var insideParagraphLoop = isInsideParagraphLoop(part);\n\n      // eslint-disable-next-line complexity\n      function loopOver(scope, i, length) {\n        heightOffset += tagHeight;\n        var scopeManager = options.scopeManager.createSubScopeManager(scope, part.value, i, part, length);\n        part.subparsed.forEach(function (pp) {\n          if (isTagStart(\"a16:rowId\", pp)) {\n            var val = +getSingleAttribute(pp.value, \"val\") + a16RowIdOffset;\n            a16RowIdOffset = 1;\n            pp.value = setSingleAttribute(pp.value, \"val\", val);\n          }\n        });\n        var subRendered = options.render(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n        if (part.hasPageBreak && i === length - 1 && insideParagraphLoop) {\n          addPageBreakAtEnd(subRendered);\n        }\n        var isNotFirst = scopeManager.scopePathItem.some(function (i) {\n          return i !== 0;\n        });\n        if (isNotFirst) {\n          if (part.sectPrCount === 1) {\n            subRendered.parts = dropHeaderFooterRefs(subRendered.parts);\n          }\n          if (part.addContinuousType) {\n            subRendered.parts = addContinuousType(subRendered.parts);\n          }\n        } else if (part.addNextPage) {\n          subRendered.parts = addSectionBefore(subRendered.parts, self.sects[part.addNextPage.index]);\n        }\n        if (part.addNextPage) {\n          addPageBreakAtEnd(subRendered);\n        }\n        if (part.hasPageBreakBeginning && insideParagraphLoop) {\n          addPageBreakAtBeginning(subRendered);\n        }\n        for (var _i = 0, len = subRendered.parts.length; _i < len; _i++) {\n          totalValue.push(subRendered.parts[_i]);\n        }\n        Array.prototype.push.apply(errors, subRendered.errors);\n      }\n      var result = options.scopeManager.loopOver(part.value, loopOver, part.inverted, {\n        part: part\n      });\n      // if the loop is showing empty content\n      if (result === false) {\n        if (part.lastParagrapSectPr) {\n          if (part.paragraphLoop) {\n            return {\n              value: \"<w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr></w:p>\")\n            };\n          }\n          return {\n            value: \"</w:t></w:r></w:p><w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr><w:r><w:t>\")\n          };\n        }\n        return {\n          value: getPageBreakIfApplies(part) || \"\",\n          errors: errors\n        };\n      }\n      if (heightOffset !== 0) {\n        var cy = +getSingleAttribute(this.lastExt.value, \"cy\");\n        this.lastExt.value = setSingleAttribute(this.lastExt.value, \"cy\", cy + heightOffset);\n      }\n      return {\n        value: options.joinUncorrupt(totalValue, _objectSpread(_objectSpread({}, options), {}, {\n          basePart: part\n        })),\n        errors: errors\n      };\n    }\n  }]);\n}();\nmodule.exports = function () {\n  return wrapper(new LoopModule());\n};","map":{"version":3,"names":["_typeof","o","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Array","from","isArray","_arrayLikeToArray","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","key","value","_toPropertyKey","configurable","writable","_slicedToArray","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","minLen","n","toString","call","slice","name","test","len","arr2","l","u","a","f","next","done","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","_createClass","protoProps","staticProps","_toPrimitive","toPrimitive","String","Number","_require","require","chunkBy","last","isParagraphStart","isModule","isParagraphEnd","isContent","startsWith","isTagEnd","isTagStart","getSingleAttribute","setSingleAttribute","filetypes","wrapper","moduleName","hasContent","parts","some","part","getFirstMeaningFulPart","parsed","type","isInsideParagraphLoop","firstMeaningfulPart","subparsed","tag","getPageBreakIfApplies","hasPageBreak","isEnclosedByParagraphs","getOffset","chunk","addPageBreakAtEnd","subRendered","j","splice","addPageBreakAtBeginning","unshift","isContinuous","indexOf","isNextPage","addSectionBefore","sect","concat","map","_ref","join","addContinuousType","stop","inSectPr","reduce","result","dropHeaderFooterRefs","text","hasImage","_ref2","getSectPr","chunks","collectSectPr","sectPrs","getSectPrHeaderFooterChangeCount","sectPrCount","getLastSectPr","sectPr","LoopModule","inXfrm","totalSectPr","prefix","start","end","dash","inverted","optionsTransformer","opts","docxtemplater","preparse","_ref3","contentType","main","sects","matchers","module","expandTo","location","_ref4","_ref5","getTraits","traitName","tags","offset","postparse","_ref6","basePart","fileType","index","lIndex","addNextPage","lastParagrapSectPr","paragraphLoop","level","p","firstChunk","lastChunk","firstOffset","lastOffset","hasPageBreakBeginning","resolve","options","sm","scopeManager","promisedValue","getValueAsync","promises","loopOver","scope","createSubScopeManager","compiled","errorList","then","values","Promise","all","loopOverValue","_ref7","resolved","errors","render","position","lastExt","totalValue","heightOffset","self","firstTag","tagHeight","a16RowIdOffset","insideParagraphLoop","pp","val","isNotFirst","scopePathItem","_i","cy","joinUncorrupt","exports"],"sources":["C:/Users/79131/OneDrive/Рабочий стол/react project/client/node_modules/docxtemplater/js/modules/loop.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar _require = require(\"../doc-utils.js\"),\n  chunkBy = _require.chunkBy,\n  last = _require.last,\n  isParagraphStart = _require.isParagraphStart,\n  isModule = _require.isModule,\n  isParagraphEnd = _require.isParagraphEnd,\n  isContent = _require.isContent,\n  startsWith = _require.startsWith,\n  isTagEnd = _require.isTagEnd,\n  isTagStart = _require.isTagStart,\n  getSingleAttribute = _require.getSingleAttribute,\n  setSingleAttribute = _require.setSingleAttribute;\nvar filetypes = require(\"../filetypes.js\");\nvar wrapper = require(\"../module-wrapper.js\");\nvar moduleName = \"loop\";\nfunction hasContent(parts) {\n  return parts.some(function (part) {\n    return isContent(part);\n  });\n}\nfunction getFirstMeaningFulPart(parsed) {\n  for (var i = 0, len = parsed.length; i < len; i++) {\n    if (parsed[i].type !== \"content\") {\n      return parsed[i];\n    }\n  }\n  return null;\n}\nfunction isInsideParagraphLoop(part) {\n  var firstMeaningfulPart = getFirstMeaningFulPart(part.subparsed);\n  return firstMeaningfulPart != null && firstMeaningfulPart.tag !== \"w:t\";\n}\nfunction getPageBreakIfApplies(part) {\n  return part.hasPageBreak && isInsideParagraphLoop(part) ? '<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>' : \"\";\n}\nfunction isEnclosedByParagraphs(parsed) {\n  return parsed.length && isParagraphStart(parsed[0]) && isParagraphEnd(last(parsed));\n}\nfunction getOffset(chunk) {\n  return hasContent(chunk) ? 0 : chunk.length;\n}\nfunction addPageBreakAtEnd(subRendered) {\n  var j = subRendered.parts.length - 1;\n  if (subRendered.parts[j] === \"</w:p>\") {\n    subRendered.parts.splice(j, 0, '<w:r><w:br w:type=\"page\"/></w:r>');\n  } else {\n    subRendered.parts.push('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n  }\n}\nfunction addPageBreakAtBeginning(subRendered) {\n  subRendered.parts.unshift('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n}\nfunction isContinuous(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf(\"continuous\") !== -1;\n  });\n}\nfunction isNextPage(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf('w:val=\"nextPage\"') !== -1;\n  });\n}\nfunction addSectionBefore(parts, sect) {\n  return [\"<w:p><w:pPr>\".concat(sect.map(function (_ref) {\n    var value = _ref.value;\n    return value;\n  }).join(\"\"), \"</w:pPr></w:p>\")].concat(parts);\n}\nfunction addContinuousType(parts) {\n  var stop = false;\n  var inSectPr = false;\n  return parts.reduce(function (result, part) {\n    if (stop === false && startsWith(part, \"<w:sectPr\")) {\n      inSectPr = true;\n    }\n    if (inSectPr) {\n      if (startsWith(part, \"<w:type\")) {\n        stop = true;\n      }\n      if (stop === false && startsWith(part, \"</w:sectPr\")) {\n        result.push('<w:type w:val=\"continuous\"/>');\n      }\n    }\n    result.push(part);\n    return result;\n  }, []);\n}\nfunction dropHeaderFooterRefs(parts) {\n  return parts.filter(function (text) {\n    return !startsWith(text, \"<w:headerReference\") && !startsWith(text, \"<w:footerReference\");\n  });\n}\nfunction hasPageBreak(chunk) {\n  return chunk.some(function (part) {\n    return part.tag === \"w:br\" && part.value.indexOf('w:type=\"page\"') !== -1;\n  });\n}\nfunction hasImage(chunk) {\n  return chunk.some(function (_ref2) {\n    var tag = _ref2.tag;\n    return tag === \"w:drawing\";\n  });\n}\nfunction getSectPr(chunks) {\n  var collectSectPr = false;\n  var sectPrs = [];\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPrs.push([]);\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      sectPrs[sectPrs.length - 1].push(part);\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrs;\n}\nfunction getSectPrHeaderFooterChangeCount(chunks) {\n  var collectSectPr = false;\n  var sectPrCount = 0;\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      if (part.tag === \"w:headerReference\" || part.tag === \"w:footerReference\") {\n        sectPrCount++;\n        collectSectPr = false;\n      }\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrCount;\n}\nfunction getLastSectPr(parsed) {\n  var sectPr = [];\n  var inSectPr = false;\n  for (var i = parsed.length - 1; i >= 0; i--) {\n    var part = parsed[i];\n    if (isTagEnd(\"w:sectPr\", part)) {\n      inSectPr = true;\n    }\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPr.unshift(part.value);\n      inSectPr = false;\n    }\n    if (inSectPr) {\n      sectPr.unshift(part.value);\n    }\n    if (isParagraphStart(part)) {\n      if (sectPr.length > 0) {\n        return sectPr.join(\"\");\n      }\n      break;\n    }\n  }\n  return \"\";\n}\nvar LoopModule = /*#__PURE__*/function () {\n  function LoopModule() {\n    _classCallCheck(this, LoopModule);\n    this.name = \"LoopModule\";\n    this.inXfrm = false;\n    this.totalSectPr = 0;\n    this.prefix = {\n      start: \"#\",\n      end: \"/\",\n      dash: /^-([^\\s]+)\\s(.+)/,\n      inverted: \"^\"\n    };\n  }\n  return _createClass(LoopModule, [{\n    key: \"optionsTransformer\",\n    value: function optionsTransformer(opts, docxtemplater) {\n      this.docxtemplater = docxtemplater;\n      return opts;\n    }\n  }, {\n    key: \"preparse\",\n    value: function preparse(parsed, _ref3) {\n      var contentType = _ref3.contentType;\n      if (filetypes.main.indexOf(contentType) !== -1) {\n        this.sects = getSectPr(parsed);\n      }\n    }\n  }, {\n    key: \"matchers\",\n    value: function matchers() {\n      var module = moduleName;\n      return [[this.prefix.start, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: false\n      }], [this.prefix.inverted, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: true\n      }], [this.prefix.end, module, {\n        location: \"end\"\n      }], [this.prefix.dash, module, function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 3),\n          expandTo = _ref5[1],\n          value = _ref5[2];\n        return {\n          location: \"start\",\n          inverted: false,\n          expandTo: expandTo,\n          value: value\n        };\n      }]];\n    }\n  }, {\n    key: \"getTraits\",\n    value: function getTraits(traitName, parsed) {\n      // Stryker disable all : because getTraits should disappear in v4\n      if (traitName !== \"expandPair\") {\n        return;\n      }\n      // Stryker restore all\n\n      return parsed.reduce(function (tags, part, offset) {\n        if (isModule(part, moduleName) && part.subparsed == null) {\n          tags.push({\n            part: part,\n            offset: offset\n          });\n        }\n        return tags;\n      }, []);\n    }\n  }, {\n    key: \"postparse\",\n    value: function postparse(parsed, _ref6) {\n      var basePart = _ref6.basePart;\n      if (basePart && this.docxtemplater.fileType === \"docx\" && parsed.length > 0) {\n        basePart.sectPrCount = getSectPrHeaderFooterChangeCount(parsed);\n        this.totalSectPr += basePart.sectPrCount;\n        var sects = this.sects;\n        sects.some(function (sect, index) {\n          if (basePart.lIndex < sect[0].lIndex) {\n            if (index + 1 < sects.length && isContinuous(sects[index + 1])) {\n              basePart.addContinuousType = true;\n            }\n            return true;\n          }\n          if (parsed[0].lIndex < sect[0].lIndex && sect[0].lIndex < basePart.lIndex) {\n            if (isNextPage(sects[index])) {\n              basePart.addNextPage = {\n                index: index\n              };\n            }\n            return true;\n          }\n        });\n        basePart.lastParagrapSectPr = getLastSectPr(parsed);\n      }\n      if (!basePart || basePart.expandTo !== \"auto\" || basePart.module !== moduleName || !isEnclosedByParagraphs(parsed)) {\n        return parsed;\n      }\n      basePart.paragraphLoop = true;\n      var level = 0;\n      var chunks = chunkBy(parsed, function (p) {\n        if (isParagraphStart(p)) {\n          level++;\n          if (level === 1) {\n            return \"start\";\n          }\n        }\n        if (isParagraphEnd(p)) {\n          level--;\n          if (level === 0) {\n            return \"end\";\n          }\n        }\n        return null;\n      });\n      var firstChunk = chunks[0];\n      var lastChunk = last(chunks);\n      var firstOffset = getOffset(firstChunk);\n      var lastOffset = getOffset(lastChunk);\n      basePart.hasPageBreakBeginning = hasPageBreak(firstChunk);\n      basePart.hasPageBreak = hasPageBreak(lastChunk);\n      if (hasImage(firstChunk)) {\n        firstOffset = 0;\n      }\n      if (hasImage(lastChunk)) {\n        lastOffset = 0;\n      }\n      return parsed.slice(firstOffset, parsed.length - lastOffset);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(part, options) {\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var sm = options.scopeManager;\n      var promisedValue = sm.getValueAsync(part.value, {\n        part: part\n      });\n      var promises = [];\n      function loopOver(scope, i, length) {\n        var scopeManager = sm.createSubScopeManager(scope, part.value, i, part, length);\n        promises.push(options.resolve(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        })));\n      }\n      var errorList = [];\n      return promisedValue.then(function (values) {\n        return new Promise(function (resolve) {\n          if (values instanceof Array) {\n            Promise.all(values).then(resolve);\n          } else {\n            resolve(values);\n          }\n        }).then(function (values) {\n          sm.loopOverValue(values, loopOver, part.inverted);\n          return Promise.all(promises).then(function (r) {\n            return r.map(function (_ref7) {\n              var resolved = _ref7.resolved,\n                errors = _ref7.errors;\n              errorList.push.apply(errorList, _toConsumableArray(errors));\n              return resolved;\n            });\n          }).then(function (value) {\n            if (errorList.length > 0) {\n              throw errorList;\n            }\n            return value;\n          });\n        });\n      });\n    }\n    // eslint-disable-next-line complexity\n  }, {\n    key: \"render\",\n    value: function render(part, options) {\n      if (part.tag === \"p:xfrm\") {\n        this.inXfrm = part.position === \"start\";\n      }\n      if (part.tag === \"a:ext\" && this.inXfrm) {\n        this.lastExt = part;\n        return part;\n      }\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var totalValue = [];\n      var errors = [];\n      var heightOffset = 0;\n      var self = this;\n      var firstTag = part.subparsed[0];\n      var tagHeight = 0;\n      if ((firstTag === null || firstTag === void 0 ? void 0 : firstTag.tag) === \"a:tr\") {\n        tagHeight = +getSingleAttribute(firstTag.value, \"h\");\n      }\n      heightOffset -= tagHeight;\n      var a16RowIdOffset = 0;\n      var insideParagraphLoop = isInsideParagraphLoop(part);\n\n      // eslint-disable-next-line complexity\n      function loopOver(scope, i, length) {\n        heightOffset += tagHeight;\n        var scopeManager = options.scopeManager.createSubScopeManager(scope, part.value, i, part, length);\n        part.subparsed.forEach(function (pp) {\n          if (isTagStart(\"a16:rowId\", pp)) {\n            var val = +getSingleAttribute(pp.value, \"val\") + a16RowIdOffset;\n            a16RowIdOffset = 1;\n            pp.value = setSingleAttribute(pp.value, \"val\", val);\n          }\n        });\n        var subRendered = options.render(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n        if (part.hasPageBreak && i === length - 1 && insideParagraphLoop) {\n          addPageBreakAtEnd(subRendered);\n        }\n        var isNotFirst = scopeManager.scopePathItem.some(function (i) {\n          return i !== 0;\n        });\n        if (isNotFirst) {\n          if (part.sectPrCount === 1) {\n            subRendered.parts = dropHeaderFooterRefs(subRendered.parts);\n          }\n          if (part.addContinuousType) {\n            subRendered.parts = addContinuousType(subRendered.parts);\n          }\n        } else if (part.addNextPage) {\n          subRendered.parts = addSectionBefore(subRendered.parts, self.sects[part.addNextPage.index]);\n        }\n        if (part.addNextPage) {\n          addPageBreakAtEnd(subRendered);\n        }\n        if (part.hasPageBreakBeginning && insideParagraphLoop) {\n          addPageBreakAtBeginning(subRendered);\n        }\n        for (var _i = 0, len = subRendered.parts.length; _i < len; _i++) {\n          totalValue.push(subRendered.parts[_i]);\n        }\n        Array.prototype.push.apply(errors, subRendered.errors);\n      }\n      var result = options.scopeManager.loopOver(part.value, loopOver, part.inverted, {\n        part: part\n      });\n      // if the loop is showing empty content\n      if (result === false) {\n        if (part.lastParagrapSectPr) {\n          if (part.paragraphLoop) {\n            return {\n              value: \"<w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr></w:p>\")\n            };\n          }\n          return {\n            value: \"</w:t></w:r></w:p><w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr><w:r><w:t>\")\n          };\n        }\n        return {\n          value: getPageBreakIfApplies(part) || \"\",\n          errors: errors\n        };\n      }\n      if (heightOffset !== 0) {\n        var cy = +getSingleAttribute(this.lastExt.value, \"cy\");\n        this.lastExt.value = setSingleAttribute(this.lastExt.value, \"cy\", cy + heightOffset);\n      }\n      return {\n        value: options.joinUncorrupt(totalValue, _objectSpread(_objectSpread({}, options), {}, {\n          basePart: part\n        })),\n        errors: errors\n      };\n    }\n  }]);\n}();\nmodule.exports = function () {\n  return wrapper(new LoopModule());\n};"],"mappings":"AAAA,YAAY;;AAEZ,SAASA,OAAOA,CAACC,CAAC,EAAE;EAAE,yBAAyB;;EAAE,OAAOD,OAAO,GAAG,UAAU,IAAI,OAAOE,MAAM,IAAI,QAAQ,IAAI,OAAOA,MAAM,CAACC,QAAQ,GAAG,UAAUF,CAAC,EAAE;IAAE,OAAO,OAAOA,CAAC;EAAE,CAAC,GAAG,UAAUA,CAAC,EAAE;IAAE,OAAOA,CAAC,IAAI,UAAU,IAAI,OAAOC,MAAM,IAAID,CAAC,CAACG,WAAW,KAAKF,MAAM,IAAID,CAAC,KAAKC,MAAM,CAACG,SAAS,GAAG,QAAQ,GAAG,OAAOJ,CAAC;EAAE,CAAC,EAAED,OAAO,CAACC,CAAC,CAAC;AAAE;AAC7T,SAASK,kBAAkBA,CAACC,GAAG,EAAE;EAAE,OAAOC,kBAAkB,CAACD,GAAG,CAAC,IAAIE,gBAAgB,CAACF,GAAG,CAAC,IAAIG,2BAA2B,CAACH,GAAG,CAAC,IAAII,kBAAkB,CAAC,CAAC;AAAE;AACxJ,SAASA,kBAAkBA,CAAA,EAAG;EAAE,MAAM,IAAIC,SAAS,CAAC,sIAAsI,CAAC;AAAE;AAC7L,SAASH,gBAAgBA,CAACI,IAAI,EAAE;EAAE,IAAI,OAAOX,MAAM,KAAK,WAAW,IAAIW,IAAI,CAACX,MAAM,CAACC,QAAQ,CAAC,IAAI,IAAI,IAAIU,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,EAAE,OAAOC,KAAK,CAACC,IAAI,CAACF,IAAI,CAAC;AAAE;AAC7J,SAASL,kBAAkBA,CAACD,GAAG,EAAE;EAAE,IAAIO,KAAK,CAACE,OAAO,CAACT,GAAG,CAAC,EAAE,OAAOU,iBAAiB,CAACV,GAAG,CAAC;AAAE;AAC1F,SAASW,OAAOA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAAE,IAAIC,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACJ,CAAC,CAAC;EAAE,IAAIG,MAAM,CAACE,qBAAqB,EAAE;IAAE,IAAIvB,CAAC,GAAGqB,MAAM,CAACE,qBAAqB,CAACL,CAAC,CAAC;IAAEC,CAAC,KAAKnB,CAAC,GAAGA,CAAC,CAACwB,MAAM,CAAC,UAAUL,CAAC,EAAE;MAAE,OAAOE,MAAM,CAACI,wBAAwB,CAACP,CAAC,EAAEC,CAAC,CAAC,CAACO,UAAU;IAAE,CAAC,CAAC,CAAC,EAAEN,CAAC,CAACO,IAAI,CAACC,KAAK,CAACR,CAAC,EAAEpB,CAAC,CAAC;EAAE;EAAE,OAAOoB,CAAC;AAAE;AAC9P,SAASS,aAAaA,CAACX,CAAC,EAAE;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGW,SAAS,CAACC,MAAM,EAAEZ,CAAC,EAAE,EAAE;IAAE,IAAIC,CAAC,GAAG,IAAI,IAAIU,SAAS,CAACX,CAAC,CAAC,GAAGW,SAAS,CAACX,CAAC,CAAC,GAAG,CAAC,CAAC;IAAEA,CAAC,GAAG,CAAC,GAAGF,OAAO,CAACI,MAAM,CAACD,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACY,OAAO,CAAC,UAAUb,CAAC,EAAE;MAAEc,eAAe,CAACf,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAACD,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,GAAGE,MAAM,CAACa,yBAAyB,GAAGb,MAAM,CAACc,gBAAgB,CAACjB,CAAC,EAAEG,MAAM,CAACa,yBAAyB,CAACd,CAAC,CAAC,CAAC,GAAGH,OAAO,CAACI,MAAM,CAACD,CAAC,CAAC,CAAC,CAACY,OAAO,CAAC,UAAUb,CAAC,EAAE;MAAEE,MAAM,CAACe,cAAc,CAAClB,CAAC,EAAEC,CAAC,EAAEE,MAAM,CAACI,wBAAwB,CAACL,CAAC,EAAED,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAAE;EAAE,OAAOD,CAAC;AAAE;AACtb,SAASe,eAAeA,CAACI,GAAG,EAAEC,GAAG,EAAEC,KAAK,EAAE;EAAED,GAAG,GAAGE,cAAc,CAACF,GAAG,CAAC;EAAE,IAAIA,GAAG,IAAID,GAAG,EAAE;IAAEhB,MAAM,CAACe,cAAc,CAACC,GAAG,EAAEC,GAAG,EAAE;MAAEC,KAAK,EAAEA,KAAK;MAAEb,UAAU,EAAE,IAAI;MAAEe,YAAY,EAAE,IAAI;MAAEC,QAAQ,EAAE;IAAK,CAAC,CAAC;EAAE,CAAC,MAAM;IAAEL,GAAG,CAACC,GAAG,CAAC,GAAGC,KAAK;EAAE;EAAE,OAAOF,GAAG;AAAE;AAC3O,SAASM,cAAcA,CAACrC,GAAG,EAAEsC,CAAC,EAAE;EAAE,OAAOC,eAAe,CAACvC,GAAG,CAAC,IAAIwC,qBAAqB,CAACxC,GAAG,EAAEsC,CAAC,CAAC,IAAInC,2BAA2B,CAACH,GAAG,EAAEsC,CAAC,CAAC,IAAIG,gBAAgB,CAAC,CAAC;AAAE;AAC7J,SAASA,gBAAgBA,CAAA,EAAG;EAAE,MAAM,IAAIpC,SAAS,CAAC,2IAA2I,CAAC;AAAE;AAChM,SAASF,2BAA2BA,CAACT,CAAC,EAAEgD,MAAM,EAAE;EAAE,IAAI,CAAChD,CAAC,EAAE;EAAQ,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE,OAAOgB,iBAAiB,CAAChB,CAAC,EAAEgD,MAAM,CAAC;EAAE,IAAIC,CAAC,GAAG5B,MAAM,CAACjB,SAAS,CAAC8C,QAAQ,CAACC,IAAI,CAACnD,CAAC,CAAC,CAACoD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAAE,IAAIH,CAAC,KAAK,QAAQ,IAAIjD,CAAC,CAACG,WAAW,EAAE8C,CAAC,GAAGjD,CAAC,CAACG,WAAW,CAACkD,IAAI;EAAE,IAAIJ,CAAC,KAAK,KAAK,IAAIA,CAAC,KAAK,KAAK,EAAE,OAAOpC,KAAK,CAACC,IAAI,CAACd,CAAC,CAAC;EAAE,IAAIiD,CAAC,KAAK,WAAW,IAAI,0CAA0C,CAACK,IAAI,CAACL,CAAC,CAAC,EAAE,OAAOjC,iBAAiB,CAAChB,CAAC,EAAEgD,MAAM,CAAC;AAAE;AAC/Z,SAAShC,iBAAiBA,CAACV,GAAG,EAAEiD,GAAG,EAAE;EAAE,IAAIA,GAAG,IAAI,IAAI,IAAIA,GAAG,GAAGjD,GAAG,CAACyB,MAAM,EAAEwB,GAAG,GAAGjD,GAAG,CAACyB,MAAM;EAAE,KAAK,IAAIa,CAAC,GAAG,CAAC,EAAEY,IAAI,GAAG,IAAI3C,KAAK,CAAC0C,GAAG,CAAC,EAAEX,CAAC,GAAGW,GAAG,EAAEX,CAAC,EAAE,EAAEY,IAAI,CAACZ,CAAC,CAAC,GAAGtC,GAAG,CAACsC,CAAC,CAAC;EAAE,OAAOY,IAAI;AAAE;AAClL,SAASV,qBAAqBA,CAAC3B,CAAC,EAAEsC,CAAC,EAAE;EAAE,IAAIrC,CAAC,GAAG,IAAI,IAAID,CAAC,GAAG,IAAI,GAAG,WAAW,IAAI,OAAOlB,MAAM,IAAIkB,CAAC,CAAClB,MAAM,CAACC,QAAQ,CAAC,IAAIiB,CAAC,CAAC,YAAY,CAAC;EAAE,IAAI,IAAI,IAAIC,CAAC,EAAE;IAAE,IAAIF,CAAC;MAAE+B,CAAC;MAAEL,CAAC;MAAEc,CAAC;MAAEC,CAAC,GAAG,EAAE;MAAEC,CAAC,GAAG,CAAC,CAAC;MAAE5D,CAAC,GAAG,CAAC,CAAC;IAAE,IAAI;MAAE,IAAI4C,CAAC,GAAG,CAACxB,CAAC,GAAGA,CAAC,CAAC+B,IAAI,CAAChC,CAAC,CAAC,EAAE0C,IAAI,EAAE,CAAC,KAAKJ,CAAC,EAAE;QAAE,IAAIpC,MAAM,CAACD,CAAC,CAAC,KAAKA,CAAC,EAAE;QAAQwC,CAAC,GAAG,CAAC,CAAC;MAAE,CAAC,MAAM,OAAO,EAAEA,CAAC,GAAG,CAAC1C,CAAC,GAAG0B,CAAC,CAACO,IAAI,CAAC/B,CAAC,CAAC,EAAE0C,IAAI,CAAC,KAAKH,CAAC,CAAChC,IAAI,CAACT,CAAC,CAACqB,KAAK,CAAC,EAAEoB,CAAC,CAAC5B,MAAM,KAAK0B,CAAC,CAAC,EAAEG,CAAC,GAAG,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,OAAOzC,CAAC,EAAE;MAAEnB,CAAC,GAAG,CAAC,CAAC,EAAEiD,CAAC,GAAG9B,CAAC;IAAE,CAAC,SAAS;MAAE,IAAI;QAAE,IAAI,CAACyC,CAAC,IAAI,IAAI,IAAIxC,CAAC,CAAC,QAAQ,CAAC,KAAKsC,CAAC,GAAGtC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAEC,MAAM,CAACqC,CAAC,CAAC,KAAKA,CAAC,CAAC,EAAE;MAAQ,CAAC,SAAS;QAAE,IAAI1D,CAAC,EAAE,MAAMiD,CAAC;MAAE;IAAE;IAAE,OAAOU,CAAC;EAAE;AAAE;AACzhB,SAASd,eAAeA,CAACvC,GAAG,EAAE;EAAE,IAAIO,KAAK,CAACE,OAAO,CAACT,GAAG,CAAC,EAAE,OAAOA,GAAG;AAAE;AACpE,SAASyD,eAAeA,CAACC,QAAQ,EAAEC,WAAW,EAAE;EAAE,IAAI,EAAED,QAAQ,YAAYC,WAAW,CAAC,EAAE;IAAE,MAAM,IAAItD,SAAS,CAAC,mCAAmC,CAAC;EAAE;AAAE;AACxJ,SAASuD,iBAAiBA,CAACC,MAAM,EAAEC,KAAK,EAAE;EAAE,KAAK,IAAIxB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwB,KAAK,CAACrC,MAAM,EAAEa,CAAC,EAAE,EAAE;IAAE,IAAIyB,UAAU,GAAGD,KAAK,CAACxB,CAAC,CAAC;IAAEyB,UAAU,CAAC3C,UAAU,GAAG2C,UAAU,CAAC3C,UAAU,IAAI,KAAK;IAAE2C,UAAU,CAAC5B,YAAY,GAAG,IAAI;IAAE,IAAI,OAAO,IAAI4B,UAAU,EAAEA,UAAU,CAAC3B,QAAQ,GAAG,IAAI;IAAErB,MAAM,CAACe,cAAc,CAAC+B,MAAM,EAAE3B,cAAc,CAAC6B,UAAU,CAAC/B,GAAG,CAAC,EAAE+B,UAAU,CAAC;EAAE;AAAE;AAC5U,SAASC,YAAYA,CAACL,WAAW,EAAEM,UAAU,EAAEC,WAAW,EAAE;EAAE,IAAID,UAAU,EAAEL,iBAAiB,CAACD,WAAW,CAAC7D,SAAS,EAAEmE,UAAU,CAAC;EAAE,IAAIC,WAAW,EAAEN,iBAAiB,CAACD,WAAW,EAAEO,WAAW,CAAC;EAAEnD,MAAM,CAACe,cAAc,CAAC6B,WAAW,EAAE,WAAW,EAAE;IAAEvB,QAAQ,EAAE;EAAM,CAAC,CAAC;EAAE,OAAOuB,WAAW;AAAE;AAC5R,SAASzB,cAAcA,CAACpB,CAAC,EAAE;EAAE,IAAIwB,CAAC,GAAG6B,YAAY,CAACrD,CAAC,EAAE,QAAQ,CAAC;EAAE,OAAO,QAAQ,IAAIrB,OAAO,CAAC6C,CAAC,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,EAAE;AAAE;AAC5G,SAAS6B,YAAYA,CAACrD,CAAC,EAAED,CAAC,EAAE;EAAE,IAAI,QAAQ,IAAIpB,OAAO,CAACqB,CAAC,CAAC,IAAI,CAACA,CAAC,EAAE,OAAOA,CAAC;EAAE,IAAIF,CAAC,GAAGE,CAAC,CAACnB,MAAM,CAACyE,WAAW,CAAC;EAAE,IAAI,KAAK,CAAC,KAAKxD,CAAC,EAAE;IAAE,IAAI0B,CAAC,GAAG1B,CAAC,CAACiC,IAAI,CAAC/B,CAAC,EAAED,CAAC,IAAI,SAAS,CAAC;IAAE,IAAI,QAAQ,IAAIpB,OAAO,CAAC6C,CAAC,CAAC,EAAE,OAAOA,CAAC;IAAE,MAAM,IAAIjC,SAAS,CAAC,8CAA8C,CAAC;EAAE;EAAE,OAAO,CAAC,QAAQ,KAAKQ,CAAC,GAAGwD,MAAM,GAAGC,MAAM,EAAExD,CAAC,CAAC;AAAE;AAC3T,IAAIyD,QAAQ,GAAGC,OAAO,CAAC,iBAAiB,CAAC;EACvCC,OAAO,GAAGF,QAAQ,CAACE,OAAO;EAC1BC,IAAI,GAAGH,QAAQ,CAACG,IAAI;EACpBC,gBAAgB,GAAGJ,QAAQ,CAACI,gBAAgB;EAC5CC,QAAQ,GAAGL,QAAQ,CAACK,QAAQ;EAC5BC,cAAc,GAAGN,QAAQ,CAACM,cAAc;EACxCC,SAAS,GAAGP,QAAQ,CAACO,SAAS;EAC9BC,UAAU,GAAGR,QAAQ,CAACQ,UAAU;EAChCC,QAAQ,GAAGT,QAAQ,CAACS,QAAQ;EAC5BC,UAAU,GAAGV,QAAQ,CAACU,UAAU;EAChCC,kBAAkB,GAAGX,QAAQ,CAACW,kBAAkB;EAChDC,kBAAkB,GAAGZ,QAAQ,CAACY,kBAAkB;AAClD,IAAIC,SAAS,GAAGZ,OAAO,CAAC,iBAAiB,CAAC;AAC1C,IAAIa,OAAO,GAAGb,OAAO,CAAC,sBAAsB,CAAC;AAC7C,IAAIc,UAAU,GAAG,MAAM;AACvB,SAASC,UAAUA,CAACC,KAAK,EAAE;EACzB,OAAOA,KAAK,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAE;IAChC,OAAOZ,SAAS,CAACY,IAAI,CAAC;EACxB,CAAC,CAAC;AACJ;AACA,SAASC,sBAAsBA,CAACC,MAAM,EAAE;EACtC,KAAK,IAAItD,CAAC,GAAG,CAAC,EAAEW,GAAG,GAAG2C,MAAM,CAACnE,MAAM,EAAEa,CAAC,GAAGW,GAAG,EAAEX,CAAC,EAAE,EAAE;IACjD,IAAIsD,MAAM,CAACtD,CAAC,CAAC,CAACuD,IAAI,KAAK,SAAS,EAAE;MAChC,OAAOD,MAAM,CAACtD,CAAC,CAAC;IAClB;EACF;EACA,OAAO,IAAI;AACb;AACA,SAASwD,qBAAqBA,CAACJ,IAAI,EAAE;EACnC,IAAIK,mBAAmB,GAAGJ,sBAAsB,CAACD,IAAI,CAACM,SAAS,CAAC;EAChE,OAAOD,mBAAmB,IAAI,IAAI,IAAIA,mBAAmB,CAACE,GAAG,KAAK,KAAK;AACzE;AACA,SAASC,qBAAqBA,CAACR,IAAI,EAAE;EACnC,OAAOA,IAAI,CAACS,YAAY,IAAIL,qBAAqB,CAACJ,IAAI,CAAC,GAAG,6CAA6C,GAAG,EAAE;AAC9G;AACA,SAASU,sBAAsBA,CAACR,MAAM,EAAE;EACtC,OAAOA,MAAM,CAACnE,MAAM,IAAIkD,gBAAgB,CAACiB,MAAM,CAAC,CAAC,CAAC,CAAC,IAAIf,cAAc,CAACH,IAAI,CAACkB,MAAM,CAAC,CAAC;AACrF;AACA,SAASS,SAASA,CAACC,KAAK,EAAE;EACxB,OAAOf,UAAU,CAACe,KAAK,CAAC,GAAG,CAAC,GAAGA,KAAK,CAAC7E,MAAM;AAC7C;AACA,SAAS8E,iBAAiBA,CAACC,WAAW,EAAE;EACtC,IAAIC,CAAC,GAAGD,WAAW,CAAChB,KAAK,CAAC/D,MAAM,GAAG,CAAC;EACpC,IAAI+E,WAAW,CAAChB,KAAK,CAACiB,CAAC,CAAC,KAAK,QAAQ,EAAE;IACrCD,WAAW,CAAChB,KAAK,CAACkB,MAAM,CAACD,CAAC,EAAE,CAAC,EAAE,kCAAkC,CAAC;EACpE,CAAC,MAAM;IACLD,WAAW,CAAChB,KAAK,CAACnE,IAAI,CAAC,6CAA6C,CAAC;EACvE;AACF;AACA,SAASsF,uBAAuBA,CAACH,WAAW,EAAE;EAC5CA,WAAW,CAAChB,KAAK,CAACoB,OAAO,CAAC,6CAA6C,CAAC;AAC1E;AACA,SAASC,YAAYA,CAACrB,KAAK,EAAE;EAC3B,OAAOA,KAAK,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAE;IAChC,OAAOT,UAAU,CAAC,QAAQ,EAAES,IAAI,CAAC,IAAIA,IAAI,CAACzD,KAAK,CAAC6E,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;EAC9E,CAAC,CAAC;AACJ;AACA,SAASC,UAAUA,CAACvB,KAAK,EAAE;EACzB,OAAOA,KAAK,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAE;IAChC,OAAOT,UAAU,CAAC,QAAQ,EAAES,IAAI,CAAC,IAAIA,IAAI,CAACzD,KAAK,CAAC6E,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;EACpF,CAAC,CAAC;AACJ;AACA,SAASE,gBAAgBA,CAACxB,KAAK,EAAEyB,IAAI,EAAE;EACrC,OAAO,CAAC,cAAc,CAACC,MAAM,CAACD,IAAI,CAACE,GAAG,CAAC,UAAUC,IAAI,EAAE;IACrD,IAAInF,KAAK,GAAGmF,IAAI,CAACnF,KAAK;IACtB,OAAOA,KAAK;EACd,CAAC,CAAC,CAACoF,IAAI,CAAC,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC,CAACH,MAAM,CAAC1B,KAAK,CAAC;AAC/C;AACA,SAAS8B,iBAAiBA,CAAC9B,KAAK,EAAE;EAChC,IAAI+B,IAAI,GAAG,KAAK;EAChB,IAAIC,QAAQ,GAAG,KAAK;EACpB,OAAOhC,KAAK,CAACiC,MAAM,CAAC,UAAUC,MAAM,EAAEhC,IAAI,EAAE;IAC1C,IAAI6B,IAAI,KAAK,KAAK,IAAIxC,UAAU,CAACW,IAAI,EAAE,WAAW,CAAC,EAAE;MACnD8B,QAAQ,GAAG,IAAI;IACjB;IACA,IAAIA,QAAQ,EAAE;MACZ,IAAIzC,UAAU,CAACW,IAAI,EAAE,SAAS,CAAC,EAAE;QAC/B6B,IAAI,GAAG,IAAI;MACb;MACA,IAAIA,IAAI,KAAK,KAAK,IAAIxC,UAAU,CAACW,IAAI,EAAE,YAAY,CAAC,EAAE;QACpDgC,MAAM,CAACrG,IAAI,CAAC,8BAA8B,CAAC;MAC7C;IACF;IACAqG,MAAM,CAACrG,IAAI,CAACqE,IAAI,CAAC;IACjB,OAAOgC,MAAM;EACf,CAAC,EAAE,EAAE,CAAC;AACR;AACA,SAASC,oBAAoBA,CAACnC,KAAK,EAAE;EACnC,OAAOA,KAAK,CAACtE,MAAM,CAAC,UAAU0G,IAAI,EAAE;IAClC,OAAO,CAAC7C,UAAU,CAAC6C,IAAI,EAAE,oBAAoB,CAAC,IAAI,CAAC7C,UAAU,CAAC6C,IAAI,EAAE,oBAAoB,CAAC;EAC3F,CAAC,CAAC;AACJ;AACA,SAASzB,YAAYA,CAACG,KAAK,EAAE;EAC3B,OAAOA,KAAK,CAACb,IAAI,CAAC,UAAUC,IAAI,EAAE;IAChC,OAAOA,IAAI,CAACO,GAAG,KAAK,MAAM,IAAIP,IAAI,CAACzD,KAAK,CAAC6E,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;EAC1E,CAAC,CAAC;AACJ;AACA,SAASe,QAAQA,CAACvB,KAAK,EAAE;EACvB,OAAOA,KAAK,CAACb,IAAI,CAAC,UAAUqC,KAAK,EAAE;IACjC,IAAI7B,GAAG,GAAG6B,KAAK,CAAC7B,GAAG;IACnB,OAAOA,GAAG,KAAK,WAAW;EAC5B,CAAC,CAAC;AACJ;AACA,SAAS8B,SAASA,CAACC,MAAM,EAAE;EACzB,IAAIC,aAAa,GAAG,KAAK;EACzB,IAAIC,OAAO,GAAG,EAAE;EAChBF,MAAM,CAACtG,OAAO,CAAC,UAAUgE,IAAI,EAAE;IAC7B,IAAIT,UAAU,CAAC,UAAU,EAAES,IAAI,CAAC,EAAE;MAChCwC,OAAO,CAAC7G,IAAI,CAAC,EAAE,CAAC;MAChB4G,aAAa,GAAG,IAAI;IACtB;IACA,IAAIA,aAAa,EAAE;MACjBC,OAAO,CAACA,OAAO,CAACzG,MAAM,GAAG,CAAC,CAAC,CAACJ,IAAI,CAACqE,IAAI,CAAC;IACxC;IACA,IAAIV,QAAQ,CAAC,UAAU,EAAEU,IAAI,CAAC,EAAE;MAC9BuC,aAAa,GAAG,KAAK;IACvB;EACF,CAAC,CAAC;EACF,OAAOC,OAAO;AAChB;AACA,SAASC,gCAAgCA,CAACH,MAAM,EAAE;EAChD,IAAIC,aAAa,GAAG,KAAK;EACzB,IAAIG,WAAW,GAAG,CAAC;EACnBJ,MAAM,CAACtG,OAAO,CAAC,UAAUgE,IAAI,EAAE;IAC7B,IAAIT,UAAU,CAAC,UAAU,EAAES,IAAI,CAAC,EAAE;MAChCuC,aAAa,GAAG,IAAI;IACtB;IACA,IAAIA,aAAa,EAAE;MACjB,IAAIvC,IAAI,CAACO,GAAG,KAAK,mBAAmB,IAAIP,IAAI,CAACO,GAAG,KAAK,mBAAmB,EAAE;QACxEmC,WAAW,EAAE;QACbH,aAAa,GAAG,KAAK;MACvB;IACF;IACA,IAAIjD,QAAQ,CAAC,UAAU,EAAEU,IAAI,CAAC,EAAE;MAC9BuC,aAAa,GAAG,KAAK;IACvB;EACF,CAAC,CAAC;EACF,OAAOG,WAAW;AACpB;AACA,SAASC,aAAaA,CAACzC,MAAM,EAAE;EAC7B,IAAI0C,MAAM,GAAG,EAAE;EACf,IAAId,QAAQ,GAAG,KAAK;EACpB,KAAK,IAAIlF,CAAC,GAAGsD,MAAM,CAACnE,MAAM,GAAG,CAAC,EAAEa,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC3C,IAAIoD,IAAI,GAAGE,MAAM,CAACtD,CAAC,CAAC;IACpB,IAAI0C,QAAQ,CAAC,UAAU,EAAEU,IAAI,CAAC,EAAE;MAC9B8B,QAAQ,GAAG,IAAI;IACjB;IACA,IAAIvC,UAAU,CAAC,UAAU,EAAES,IAAI,CAAC,EAAE;MAChC4C,MAAM,CAAC1B,OAAO,CAAClB,IAAI,CAACzD,KAAK,CAAC;MAC1BuF,QAAQ,GAAG,KAAK;IAClB;IACA,IAAIA,QAAQ,EAAE;MACZc,MAAM,CAAC1B,OAAO,CAAClB,IAAI,CAACzD,KAAK,CAAC;IAC5B;IACA,IAAI0C,gBAAgB,CAACe,IAAI,CAAC,EAAE;MAC1B,IAAI4C,MAAM,CAAC7G,MAAM,GAAG,CAAC,EAAE;QACrB,OAAO6G,MAAM,CAACjB,IAAI,CAAC,EAAE,CAAC;MACxB;MACA;IACF;EACF;EACA,OAAO,EAAE;AACX;AACA,IAAIkB,UAAU,GAAG,aAAa,YAAY;EACxC,SAASA,UAAUA,CAAA,EAAG;IACpB9E,eAAe,CAAC,IAAI,EAAE8E,UAAU,CAAC;IACjC,IAAI,CAACxF,IAAI,GAAG,YAAY;IACxB,IAAI,CAACyF,MAAM,GAAG,KAAK;IACnB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,MAAM,GAAG;MACZC,KAAK,EAAE,GAAG;MACVC,GAAG,EAAE,GAAG;MACRC,IAAI,EAAE,kBAAkB;MACxBC,QAAQ,EAAE;IACZ,CAAC;EACH;EACA,OAAO9E,YAAY,CAACuE,UAAU,EAAE,CAAC;IAC/BvG,GAAG,EAAE,oBAAoB;IACzBC,KAAK,EAAE,SAAS8G,kBAAkBA,CAACC,IAAI,EAAEC,aAAa,EAAE;MACtD,IAAI,CAACA,aAAa,GAAGA,aAAa;MAClC,OAAOD,IAAI;IACb;EACF,CAAC,EAAE;IACDhH,GAAG,EAAE,UAAU;IACfC,KAAK,EAAE,SAASiH,QAAQA,CAACtD,MAAM,EAAEuD,KAAK,EAAE;MACtC,IAAIC,WAAW,GAAGD,KAAK,CAACC,WAAW;MACnC,IAAIhE,SAAS,CAACiE,IAAI,CAACvC,OAAO,CAACsC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE;QAC9C,IAAI,CAACE,KAAK,GAAGvB,SAAS,CAACnC,MAAM,CAAC;MAChC;IACF;EACF,CAAC,EAAE;IACD5D,GAAG,EAAE,UAAU;IACfC,KAAK,EAAE,SAASsH,QAAQA,CAAA,EAAG;MACzB,IAAIC,MAAM,GAAGlE,UAAU;MACvB,OAAO,CAAC,CAAC,IAAI,CAACoD,MAAM,CAACC,KAAK,EAAEa,MAAM,EAAE;QAClCC,QAAQ,EAAE,MAAM;QAChBC,QAAQ,EAAE,OAAO;QACjBZ,QAAQ,EAAE;MACZ,CAAC,CAAC,EAAE,CAAC,IAAI,CAACJ,MAAM,CAACI,QAAQ,EAAEU,MAAM,EAAE;QACjCC,QAAQ,EAAE,MAAM;QAChBC,QAAQ,EAAE,OAAO;QACjBZ,QAAQ,EAAE;MACZ,CAAC,CAAC,EAAE,CAAC,IAAI,CAACJ,MAAM,CAACE,GAAG,EAAEY,MAAM,EAAE;QAC5BE,QAAQ,EAAE;MACZ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAChB,MAAM,CAACG,IAAI,EAAEW,MAAM,EAAE,UAAUG,KAAK,EAAE;QAC9C,IAAIC,KAAK,GAAGvH,cAAc,CAACsH,KAAK,EAAE,CAAC,CAAC;UAClCF,QAAQ,GAAGG,KAAK,CAAC,CAAC,CAAC;UACnB3H,KAAK,GAAG2H,KAAK,CAAC,CAAC,CAAC;QAClB,OAAO;UACLF,QAAQ,EAAE,OAAO;UACjBZ,QAAQ,EAAE,KAAK;UACfW,QAAQ,EAAEA,QAAQ;UAClBxH,KAAK,EAAEA;QACT,CAAC;MACH,CAAC,CAAC,CAAC;IACL;EACF,CAAC,EAAE;IACDD,GAAG,EAAE,WAAW;IAChBC,KAAK,EAAE,SAAS4H,SAASA,CAACC,SAAS,EAAElE,MAAM,EAAE;MAC3C;MACA,IAAIkE,SAAS,KAAK,YAAY,EAAE;QAC9B;MACF;MACA;;MAEA,OAAOlE,MAAM,CAAC6B,MAAM,CAAC,UAAUsC,IAAI,EAAErE,IAAI,EAAEsE,MAAM,EAAE;QACjD,IAAIpF,QAAQ,CAACc,IAAI,EAAEJ,UAAU,CAAC,IAAII,IAAI,CAACM,SAAS,IAAI,IAAI,EAAE;UACxD+D,IAAI,CAAC1I,IAAI,CAAC;YACRqE,IAAI,EAAEA,IAAI;YACVsE,MAAM,EAAEA;UACV,CAAC,CAAC;QACJ;QACA,OAAOD,IAAI;MACb,CAAC,EAAE,EAAE,CAAC;IACR;EACF,CAAC,EAAE;IACD/H,GAAG,EAAE,WAAW;IAChBC,KAAK,EAAE,SAASgI,SAASA,CAACrE,MAAM,EAAEsE,KAAK,EAAE;MACvC,IAAIC,QAAQ,GAAGD,KAAK,CAACC,QAAQ;MAC7B,IAAIA,QAAQ,IAAI,IAAI,CAAClB,aAAa,CAACmB,QAAQ,KAAK,MAAM,IAAIxE,MAAM,CAACnE,MAAM,GAAG,CAAC,EAAE;QAC3E0I,QAAQ,CAAC/B,WAAW,GAAGD,gCAAgC,CAACvC,MAAM,CAAC;QAC/D,IAAI,CAAC6C,WAAW,IAAI0B,QAAQ,CAAC/B,WAAW;QACxC,IAAIkB,KAAK,GAAG,IAAI,CAACA,KAAK;QACtBA,KAAK,CAAC7D,IAAI,CAAC,UAAUwB,IAAI,EAAEoD,KAAK,EAAE;UAChC,IAAIF,QAAQ,CAACG,MAAM,GAAGrD,IAAI,CAAC,CAAC,CAAC,CAACqD,MAAM,EAAE;YACpC,IAAID,KAAK,GAAG,CAAC,GAAGf,KAAK,CAAC7H,MAAM,IAAIoF,YAAY,CAACyC,KAAK,CAACe,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE;cAC9DF,QAAQ,CAAC7C,iBAAiB,GAAG,IAAI;YACnC;YACA,OAAO,IAAI;UACb;UACA,IAAI1B,MAAM,CAAC,CAAC,CAAC,CAAC0E,MAAM,GAAGrD,IAAI,CAAC,CAAC,CAAC,CAACqD,MAAM,IAAIrD,IAAI,CAAC,CAAC,CAAC,CAACqD,MAAM,GAAGH,QAAQ,CAACG,MAAM,EAAE;YACzE,IAAIvD,UAAU,CAACuC,KAAK,CAACe,KAAK,CAAC,CAAC,EAAE;cAC5BF,QAAQ,CAACI,WAAW,GAAG;gBACrBF,KAAK,EAAEA;cACT,CAAC;YACH;YACA,OAAO,IAAI;UACb;QACF,CAAC,CAAC;QACFF,QAAQ,CAACK,kBAAkB,GAAGnC,aAAa,CAACzC,MAAM,CAAC;MACrD;MACA,IAAI,CAACuE,QAAQ,IAAIA,QAAQ,CAACV,QAAQ,KAAK,MAAM,IAAIU,QAAQ,CAACX,MAAM,KAAKlE,UAAU,IAAI,CAACc,sBAAsB,CAACR,MAAM,CAAC,EAAE;QAClH,OAAOA,MAAM;MACf;MACAuE,QAAQ,CAACM,aAAa,GAAG,IAAI;MAC7B,IAAIC,KAAK,GAAG,CAAC;MACb,IAAI1C,MAAM,GAAGvD,OAAO,CAACmB,MAAM,EAAE,UAAU+E,CAAC,EAAE;QACxC,IAAIhG,gBAAgB,CAACgG,CAAC,CAAC,EAAE;UACvBD,KAAK,EAAE;UACP,IAAIA,KAAK,KAAK,CAAC,EAAE;YACf,OAAO,OAAO;UAChB;QACF;QACA,IAAI7F,cAAc,CAAC8F,CAAC,CAAC,EAAE;UACrBD,KAAK,EAAE;UACP,IAAIA,KAAK,KAAK,CAAC,EAAE;YACf,OAAO,KAAK;UACd;QACF;QACA,OAAO,IAAI;MACb,CAAC,CAAC;MACF,IAAIE,UAAU,GAAG5C,MAAM,CAAC,CAAC,CAAC;MAC1B,IAAI6C,SAAS,GAAGnG,IAAI,CAACsD,MAAM,CAAC;MAC5B,IAAI8C,WAAW,GAAGzE,SAAS,CAACuE,UAAU,CAAC;MACvC,IAAIG,UAAU,GAAG1E,SAAS,CAACwE,SAAS,CAAC;MACrCV,QAAQ,CAACa,qBAAqB,GAAG7E,YAAY,CAACyE,UAAU,CAAC;MACzDT,QAAQ,CAAChE,YAAY,GAAGA,YAAY,CAAC0E,SAAS,CAAC;MAC/C,IAAIhD,QAAQ,CAAC+C,UAAU,CAAC,EAAE;QACxBE,WAAW,GAAG,CAAC;MACjB;MACA,IAAIjD,QAAQ,CAACgD,SAAS,CAAC,EAAE;QACvBE,UAAU,GAAG,CAAC;MAChB;MACA,OAAOnF,MAAM,CAAC9C,KAAK,CAACgI,WAAW,EAAElF,MAAM,CAACnE,MAAM,GAAGsJ,UAAU,CAAC;IAC9D;EACF,CAAC,EAAE;IACD/I,GAAG,EAAE,SAAS;IACdC,KAAK,EAAE,SAASgJ,OAAOA,CAACvF,IAAI,EAAEwF,OAAO,EAAE;MACrC,IAAI,CAACtG,QAAQ,CAACc,IAAI,EAAEJ,UAAU,CAAC,EAAE;QAC/B,OAAO,IAAI;MACb;MACA,IAAI6F,EAAE,GAAGD,OAAO,CAACE,YAAY;MAC7B,IAAIC,aAAa,GAAGF,EAAE,CAACG,aAAa,CAAC5F,IAAI,CAACzD,KAAK,EAAE;QAC/CyD,IAAI,EAAEA;MACR,CAAC,CAAC;MACF,IAAI6F,QAAQ,GAAG,EAAE;MACjB,SAASC,QAAQA,CAACC,KAAK,EAAEnJ,CAAC,EAAEb,MAAM,EAAE;QAClC,IAAI2J,YAAY,GAAGD,EAAE,CAACO,qBAAqB,CAACD,KAAK,EAAE/F,IAAI,CAACzD,KAAK,EAAEK,CAAC,EAAEoD,IAAI,EAAEjE,MAAM,CAAC;QAC/E8J,QAAQ,CAAClK,IAAI,CAAC6J,OAAO,CAACD,OAAO,CAAC1J,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE2J,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;UAC1ES,QAAQ,EAAEjG,IAAI,CAACM,SAAS;UACxB+D,IAAI,EAAE,CAAC,CAAC;UACRqB,YAAY,EAAEA;QAChB,CAAC,CAAC,CAAC,CAAC;MACN;MACA,IAAIQ,SAAS,GAAG,EAAE;MAClB,OAAOP,aAAa,CAACQ,IAAI,CAAC,UAAUC,MAAM,EAAE;QAC1C,OAAO,IAAIC,OAAO,CAAC,UAAUd,OAAO,EAAE;UACpC,IAAIa,MAAM,YAAYvL,KAAK,EAAE;YAC3BwL,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CAACD,IAAI,CAACZ,OAAO,CAAC;UACnC,CAAC,MAAM;YACLA,OAAO,CAACa,MAAM,CAAC;UACjB;QACF,CAAC,CAAC,CAACD,IAAI,CAAC,UAAUC,MAAM,EAAE;UACxBX,EAAE,CAACc,aAAa,CAACH,MAAM,EAAEN,QAAQ,EAAE9F,IAAI,CAACoD,QAAQ,CAAC;UACjD,OAAOiD,OAAO,CAACC,GAAG,CAACT,QAAQ,CAAC,CAACM,IAAI,CAAC,UAAUhL,CAAC,EAAE;YAC7C,OAAOA,CAAC,CAACsG,GAAG,CAAC,UAAU+E,KAAK,EAAE;cAC5B,IAAIC,QAAQ,GAAGD,KAAK,CAACC,QAAQ;gBAC3BC,MAAM,GAAGF,KAAK,CAACE,MAAM;cACvBR,SAAS,CAACvK,IAAI,CAACC,KAAK,CAACsK,SAAS,EAAE7L,kBAAkB,CAACqM,MAAM,CAAC,CAAC;cAC3D,OAAOD,QAAQ;YACjB,CAAC,CAAC;UACJ,CAAC,CAAC,CAACN,IAAI,CAAC,UAAU5J,KAAK,EAAE;YACvB,IAAI2J,SAAS,CAACnK,MAAM,GAAG,CAAC,EAAE;cACxB,MAAMmK,SAAS;YACjB;YACA,OAAO3J,KAAK;UACd,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IACA;EACF,CAAC,EAAE;IACDD,GAAG,EAAE,QAAQ;IACbC,KAAK,EAAE,SAASoK,MAAMA,CAAC3G,IAAI,EAAEwF,OAAO,EAAE;MACpC,IAAIxF,IAAI,CAACO,GAAG,KAAK,QAAQ,EAAE;QACzB,IAAI,CAACuC,MAAM,GAAG9C,IAAI,CAAC4G,QAAQ,KAAK,OAAO;MACzC;MACA,IAAI5G,IAAI,CAACO,GAAG,KAAK,OAAO,IAAI,IAAI,CAACuC,MAAM,EAAE;QACvC,IAAI,CAAC+D,OAAO,GAAG7G,IAAI;QACnB,OAAOA,IAAI;MACb;MACA,IAAI,CAACd,QAAQ,CAACc,IAAI,EAAEJ,UAAU,CAAC,EAAE;QAC/B,OAAO,IAAI;MACb;MACA,IAAIkH,UAAU,GAAG,EAAE;MACnB,IAAIJ,MAAM,GAAG,EAAE;MACf,IAAIK,YAAY,GAAG,CAAC;MACpB,IAAIC,IAAI,GAAG,IAAI;MACf,IAAIC,QAAQ,GAAGjH,IAAI,CAACM,SAAS,CAAC,CAAC,CAAC;MAChC,IAAI4G,SAAS,GAAG,CAAC;MACjB,IAAI,CAACD,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC1G,GAAG,MAAM,MAAM,EAAE;QACjF2G,SAAS,GAAG,CAAC1H,kBAAkB,CAACyH,QAAQ,CAAC1K,KAAK,EAAE,GAAG,CAAC;MACtD;MACAwK,YAAY,IAAIG,SAAS;MACzB,IAAIC,cAAc,GAAG,CAAC;MACtB,IAAIC,mBAAmB,GAAGhH,qBAAqB,CAACJ,IAAI,CAAC;;MAErD;MACA,SAAS8F,QAAQA,CAACC,KAAK,EAAEnJ,CAAC,EAAEb,MAAM,EAAE;QAClCgL,YAAY,IAAIG,SAAS;QACzB,IAAIxB,YAAY,GAAGF,OAAO,CAACE,YAAY,CAACM,qBAAqB,CAACD,KAAK,EAAE/F,IAAI,CAACzD,KAAK,EAAEK,CAAC,EAAEoD,IAAI,EAAEjE,MAAM,CAAC;QACjGiE,IAAI,CAACM,SAAS,CAACtE,OAAO,CAAC,UAAUqL,EAAE,EAAE;UACnC,IAAI9H,UAAU,CAAC,WAAW,EAAE8H,EAAE,CAAC,EAAE;YAC/B,IAAIC,GAAG,GAAG,CAAC9H,kBAAkB,CAAC6H,EAAE,CAAC9K,KAAK,EAAE,KAAK,CAAC,GAAG4K,cAAc;YAC/DA,cAAc,GAAG,CAAC;YAClBE,EAAE,CAAC9K,KAAK,GAAGkD,kBAAkB,CAAC4H,EAAE,CAAC9K,KAAK,EAAE,KAAK,EAAE+K,GAAG,CAAC;UACrD;QACF,CAAC,CAAC;QACF,IAAIxG,WAAW,GAAG0E,OAAO,CAACmB,MAAM,CAAC9K,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE2J,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;UAC7ES,QAAQ,EAAEjG,IAAI,CAACM,SAAS;UACxB+D,IAAI,EAAE,CAAC,CAAC;UACRqB,YAAY,EAAEA;QAChB,CAAC,CAAC,CAAC;QACH,IAAI1F,IAAI,CAACS,YAAY,IAAI7D,CAAC,KAAKb,MAAM,GAAG,CAAC,IAAIqL,mBAAmB,EAAE;UAChEvG,iBAAiB,CAACC,WAAW,CAAC;QAChC;QACA,IAAIyG,UAAU,GAAG7B,YAAY,CAAC8B,aAAa,CAACzH,IAAI,CAAC,UAAUnD,CAAC,EAAE;UAC5D,OAAOA,CAAC,KAAK,CAAC;QAChB,CAAC,CAAC;QACF,IAAI2K,UAAU,EAAE;UACd,IAAIvH,IAAI,CAAC0C,WAAW,KAAK,CAAC,EAAE;YAC1B5B,WAAW,CAAChB,KAAK,GAAGmC,oBAAoB,CAACnB,WAAW,CAAChB,KAAK,CAAC;UAC7D;UACA,IAAIE,IAAI,CAAC4B,iBAAiB,EAAE;YAC1Bd,WAAW,CAAChB,KAAK,GAAG8B,iBAAiB,CAACd,WAAW,CAAChB,KAAK,CAAC;UAC1D;QACF,CAAC,MAAM,IAAIE,IAAI,CAAC6E,WAAW,EAAE;UAC3B/D,WAAW,CAAChB,KAAK,GAAGwB,gBAAgB,CAACR,WAAW,CAAChB,KAAK,EAAEkH,IAAI,CAACpD,KAAK,CAAC5D,IAAI,CAAC6E,WAAW,CAACF,KAAK,CAAC,CAAC;QAC7F;QACA,IAAI3E,IAAI,CAAC6E,WAAW,EAAE;UACpBhE,iBAAiB,CAACC,WAAW,CAAC;QAChC;QACA,IAAId,IAAI,CAACsF,qBAAqB,IAAI8B,mBAAmB,EAAE;UACrDnG,uBAAuB,CAACH,WAAW,CAAC;QACtC;QACA,KAAK,IAAI2G,EAAE,GAAG,CAAC,EAAElK,GAAG,GAAGuD,WAAW,CAAChB,KAAK,CAAC/D,MAAM,EAAE0L,EAAE,GAAGlK,GAAG,EAAEkK,EAAE,EAAE,EAAE;UAC/DX,UAAU,CAACnL,IAAI,CAACmF,WAAW,CAAChB,KAAK,CAAC2H,EAAE,CAAC,CAAC;QACxC;QACA5M,KAAK,CAACT,SAAS,CAACuB,IAAI,CAACC,KAAK,CAAC8K,MAAM,EAAE5F,WAAW,CAAC4F,MAAM,CAAC;MACxD;MACA,IAAI1E,MAAM,GAAGwD,OAAO,CAACE,YAAY,CAACI,QAAQ,CAAC9F,IAAI,CAACzD,KAAK,EAAEuJ,QAAQ,EAAE9F,IAAI,CAACoD,QAAQ,EAAE;QAC9EpD,IAAI,EAAEA;MACR,CAAC,CAAC;MACF;MACA,IAAIgC,MAAM,KAAK,KAAK,EAAE;QACpB,IAAIhC,IAAI,CAAC8E,kBAAkB,EAAE;UAC3B,IAAI9E,IAAI,CAAC+E,aAAa,EAAE;YACtB,OAAO;cACLxI,KAAK,EAAE,cAAc,CAACiF,MAAM,CAACxB,IAAI,CAAC8E,kBAAkB,EAAE,gBAAgB;YACxE,CAAC;UACH;UACA,OAAO;YACLvI,KAAK,EAAE,gCAAgC,CAACiF,MAAM,CAACxB,IAAI,CAAC8E,kBAAkB,EAAE,oBAAoB;UAC9F,CAAC;QACH;QACA,OAAO;UACLvI,KAAK,EAAEiE,qBAAqB,CAACR,IAAI,CAAC,IAAI,EAAE;UACxC0G,MAAM,EAAEA;QACV,CAAC;MACH;MACA,IAAIK,YAAY,KAAK,CAAC,EAAE;QACtB,IAAIW,EAAE,GAAG,CAAClI,kBAAkB,CAAC,IAAI,CAACqH,OAAO,CAACtK,KAAK,EAAE,IAAI,CAAC;QACtD,IAAI,CAACsK,OAAO,CAACtK,KAAK,GAAGkD,kBAAkB,CAAC,IAAI,CAACoH,OAAO,CAACtK,KAAK,EAAE,IAAI,EAAEmL,EAAE,GAAGX,YAAY,CAAC;MACtF;MACA,OAAO;QACLxK,KAAK,EAAEiJ,OAAO,CAACmC,aAAa,CAACb,UAAU,EAAEjL,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE2J,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;UACrFf,QAAQ,EAAEzE;QACZ,CAAC,CAAC,CAAC;QACH0G,MAAM,EAAEA;MACV,CAAC;IACH;EACF,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AACH5C,MAAM,CAAC8D,OAAO,GAAG,YAAY;EAC3B,OAAOjI,OAAO,CAAC,IAAIkD,UAAU,CAAC,CAAC,CAAC;AAClC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}