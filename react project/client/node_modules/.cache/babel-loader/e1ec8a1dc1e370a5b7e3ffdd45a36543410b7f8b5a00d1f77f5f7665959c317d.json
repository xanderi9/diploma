{"ast":null,"code":"import { upperFirst, capitalize, last, pick, compose, evolve, mapValues, matchPercent, isNil, get, castArray, omit, asyncCompose } from '@react-pdf/fns';\nimport * as P from '@react-pdf/primitives';\nimport { TextInstance } from '@react-pdf/primitives';\nimport stylesheet, { transformColor, processTransform, flatten } from '@react-pdf/stylesheet';\nimport layoutEngine, { bidi, linebreaker, justification, textDecoration, scriptItemizer, wordHyphenation } from '@react-pdf/textkit';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport { PDFFont } from '@react-pdf/pdfkit';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport * as Yoga from 'yoga-layout';\nimport _extends from '@babel/runtime/helpers/extends';\nimport emojiRegex from 'emoji-regex';\nimport resolveImage from '@react-pdf/image';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\n\n/**\n * Create attributed string from text fragments\n *\n * @param {Object[]} fragments fragments\n * @returns {Object} attributed string\n */\nvar fromFragments = function fromFragments(fragments) {\n  var offset = 0;\n  var string = '';\n  var runs = [];\n  fragments.forEach(function (fragment) {\n    string += fragment.string;\n    runs.push({\n      start: offset,\n      end: offset + fragment.string.length,\n      attributes: fragment.attributes || {}\n    });\n    offset += fragment.string.length;\n  });\n  return {\n    string: string,\n    runs: runs\n  };\n};\n\n/**\n * Apply transformation to text string\n *\n * @param {string} text\n * @param {string} transformation type\n * @returns {string} transformed text\n */\nvar transformText = function transformText(text, transformation) {\n  switch (transformation) {\n    case 'uppercase':\n      return text.toUpperCase();\n    case 'lowercase':\n      return text.toLowerCase();\n    case 'capitalize':\n      return capitalize(text);\n    case 'upperfirst':\n      return upperFirst(text);\n    default:\n      return text;\n  }\n};\nvar StandardFont = /*#__PURE__*/function () {\n  function StandardFont(src) {\n    this.name = src;\n    this.src = PDFFont.open(null, src);\n  }\n  var _proto = StandardFont.prototype;\n  _proto.encode = function encode(str) {\n    return this.src.encode(str);\n  };\n  _proto.layout = function layout(str) {\n    var _this = this;\n    var _this$encode = this.encode(str),\n      encoded = _this$encode[0],\n      positions = _this$encode[1];\n    return {\n      positions: positions,\n      stringIndices: positions.map(function (_, i) {\n        return i;\n      }),\n      glyphs: encoded.map(function (g, i) {\n        var glyph = _this.getGlyph(parseInt(g, 16));\n        glyph.advanceWidth = positions[i].advanceWidth;\n        return glyph;\n      })\n    };\n  };\n  _proto.glyphForCodePoint = function glyphForCodePoint(codePoint) {\n    var glyph = this.getGlyph(codePoint);\n    glyph.advanceWidth = 400;\n    return glyph;\n  };\n  _proto.getGlyph = function getGlyph(id) {\n    return {\n      id: id,\n      _font: this.src,\n      codePoints: [id],\n      isLigature: false,\n      name: this.src.font.characterToGlyph(id)\n    };\n  };\n  _proto.hasGlyphForCodePoint = function hasGlyphForCodePoint(codePoint) {\n    return this.src.font.characterToGlyph(codePoint) !== '.notdef';\n  }\n\n  // Based on empirical observation\n  ;\n  _createClass(StandardFont, [{\n    key: \"ascent\",\n    get: function get() {\n      return 900;\n    }\n\n    // Based on empirical observation\n  }, {\n    key: \"capHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 650;\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 550;\n        default:\n          return 690;\n      }\n    }\n\n    // Based on empirical observation\n  }, {\n    key: \"xHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 440;\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 390;\n        default:\n          return 490;\n      }\n    }\n\n    // Based on empirical observation\n  }, {\n    key: \"descent\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return -220;\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return -230;\n        default:\n          return -200;\n      }\n    }\n  }, {\n    key: \"lineGap\",\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: \"unitsPerEm\",\n    get: function get() {\n      return 1000;\n    }\n  }]);\n  return StandardFont;\n}();\nvar fontCache = {};\nvar IGNORED_CODE_POINTS = [173];\nvar getFontSize = function getFontSize(node) {\n  return node.attributes.fontSize || 12;\n};\nvar getOrCreateFont = function getOrCreateFont(name) {\n  if (fontCache[name]) return fontCache[name];\n  var font = new StandardFont(name);\n  fontCache[name] = font;\n  return font;\n};\nvar getFallbackFont = function getFallbackFont() {\n  return getOrCreateFont('Helvetica');\n};\nvar pickFontFromFontStack = function pickFontFromFontStack(codePoint, fontStack, lastFont) {\n  var fontStackWithFallback = [].concat(fontStack, [getFallbackFont()]);\n  if (lastFont) {\n    fontStackWithFallback.unshift(lastFont);\n  }\n  for (var i = 0; i < fontStackWithFallback.length; i += 1) {\n    var font = fontStackWithFallback[i];\n    if (!IGNORED_CODE_POINTS.includes(codePoint) && font && font.hasGlyphForCodePoint && font.hasGlyphForCodePoint(codePoint)) {\n      return font;\n    }\n  }\n  return getFallbackFont();\n};\nvar fontSubstitution = function fontSubstitution() {\n  return function (_ref) {\n    var string = _ref.string,\n      runs = _ref.runs;\n    var lastFont = null;\n    var lastFontSize = null;\n    var lastIndex = 0;\n    var index = 0;\n    var res = [];\n    for (var i = 0; i < runs.length; i += 1) {\n      var run = runs[i];\n      var defaultFont = typeof run.attributes.font === 'string' ? getOrCreateFont(run.attributes.font) : run.attributes.font;\n      if (string.length === 0) {\n        res.push({\n          start: 0,\n          end: 0,\n          attributes: {\n            font: defaultFont\n          }\n        });\n        break;\n      }\n      var chars = string.slice(run.start, run.end);\n      for (var j = 0; j < chars.length; j += 1) {\n        var char = chars[j];\n        var codePoint = char.codePointAt();\n        // If the default font does not have a glyph and the fallback font does, we use it\n        var font = pickFontFromFontStack(codePoint, run.attributes.font, lastFont);\n        var fontSize = getFontSize(run);\n\n        // If anything that would impact res has changed, update it\n        if (font !== lastFont || fontSize !== lastFontSize || font.unitsPerEm !== lastFont.unitsPerEm) {\n          if (lastFont) {\n            res.push({\n              start: lastIndex,\n              end: index,\n              attributes: {\n                font: lastFont,\n                scale: lastFontSize / lastFont.unitsPerEm\n              }\n            });\n          }\n          lastFont = font;\n          lastFontSize = fontSize;\n          lastIndex = index;\n        }\n        index += char.length;\n      }\n    }\n    if (lastIndex < string.length) {\n      var _fontSize = getFontSize(last(runs));\n      res.push({\n        start: lastIndex,\n        end: string.length,\n        attributes: {\n          font: lastFont,\n          scale: _fontSize / lastFont.unitsPerEm\n        }\n      });\n    }\n    return {\n      string: string,\n      runs: res\n    };\n  };\n};\nvar isTextInstance$4 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\nvar engines$1 = {\n  bidi: bidi,\n  linebreaker: linebreaker,\n  justification: justification,\n  textDecoration: textDecoration,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution\n};\nvar engine$1 = layoutEngine(engines$1);\nvar getFragments$1 = function getFragments(fontStore, instance) {\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$props = instance.props,\n    _instance$props$fill = _instance$props.fill,\n    fill = _instance$props$fill === void 0 ? 'black' : _instance$props$fill,\n    _instance$props$fontF = _instance$props.fontFamily,\n    fontFamily = _instance$props$fontF === void 0 ? 'Helvetica' : _instance$props$fontF,\n    fontWeight = _instance$props.fontWeight,\n    fontStyle = _instance$props.fontStyle,\n    _instance$props$fontS = _instance$props.fontSize,\n    fontSize = _instance$props$fontS === void 0 ? 18 : _instance$props$fontS,\n    textDecorationColor = _instance$props.textDecorationColor,\n    textDecorationStyle = _instance$props.textDecorationStyle,\n    textTransform = _instance$props.textTransform,\n    opacity = _instance$props.opacity;\n  var _textDecoration = instance.props.textDecoration;\n  var obj = fontStore ? fontStore.getFont({\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  }) : null;\n  var font = obj ? obj.data : fontFamily;\n  var attributes = {\n    font: font,\n    opacity: opacity,\n    fontSize: fontSize,\n    color: fill,\n    underlineStyle: textDecorationStyle,\n    underline: _textDecoration === 'underline' || _textDecoration === 'underline line-through' || _textDecoration === 'line-through underline',\n    underlineColor: textDecorationColor || fill,\n    strike: _textDecoration === 'line-through' || _textDecoration === 'underline line-through' || _textDecoration === 'line-through underline',\n    strikeStyle: textDecorationStyle,\n    strikeColor: textDecorationColor || fill\n  };\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n    if (isTextInstance$4(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      fragments.push.apply(fragments, getFragments(child));\n    }\n  }\n  return fragments;\n};\nvar getAttributedString$1 = function getAttributedString(fontStore, instance) {\n  return fromFragments(getFragments$1(fontStore, instance));\n};\nvar AlmostInfinity = 999999999999;\nvar shrinkWhitespaceFactor = {\n  before: -0.5,\n  after: -0.5\n};\nvar layoutTspan = function layoutTspan(fontStore) {\n  return function (node) {\n    var _node$props, _node$props2;\n    var attributedString = getAttributedString$1(fontStore, node);\n    var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n    var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n    var container = {\n      x: x,\n      y: y,\n      width: AlmostInfinity,\n      height: AlmostInfinity\n    };\n    var hyphenationCallback = node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null;\n    var layoutOptions = {\n      hyphenationCallback: hyphenationCallback,\n      shrinkWhitespaceFactor: shrinkWhitespaceFactor\n    };\n    var lines = engine$1(attributedString, container, layoutOptions).flat();\n    return Object.assign({}, node, {\n      lines: lines\n    });\n  };\n};\nvar layoutText$1 = function layoutText(fontStore, node) {\n  if (!node.children) return node;\n  var children = node.children.map(layoutTspan(fontStore));\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar isDefs = function isDefs(node) {\n  return node.type === P.Defs;\n};\nvar getDefs = function getDefs(node) {\n  var children = node.children || [];\n  var defs = children.find(isDefs) || {};\n  var values = defs.children || [];\n  return values.reduce(function (acc, value) {\n    var _value$props;\n    var id = (_value$props = value.props) === null || _value$props === void 0 ? void 0 : _value$props.id;\n    if (id) acc[id] = value;\n    return acc;\n  }, {});\n};\nvar isNotDefs = function isNotDefs(node) {\n  return node.type !== P.Defs;\n};\nvar detachDefs = function detachDefs(node) {\n  if (!node.children) return node;\n  var children = node.children.filter(isNotDefs);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar URL_REGEX = /url\\(['\"]?#([^'\"]+)['\"]?\\)/;\nvar replaceDef = function replaceDef(defs, value) {\n  if (!value) return undefined;\n  if (!URL_REGEX.test(value)) return value;\n  var match = value.match(URL_REGEX);\n  return defs[match[1]];\n};\nvar parseNodeDefs = function parseNodeDefs(defs) {\n  return function (node) {\n    var _node$props, _node$props2;\n    var fill = replaceDef(defs, (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fill);\n    var clipPath = replaceDef(defs, (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.clipPath);\n    var props = Object.assign({}, node.props, {\n      fill: fill,\n      clipPath: clipPath\n    });\n    var children = node.children ? node.children.map(parseNodeDefs(defs)) : undefined;\n    return Object.assign({}, node, {\n      props: props,\n      children: children\n    });\n  };\n};\nvar parseDefs = function parseDefs(root) {\n  if (!root.children) return root;\n  var defs = getDefs(root);\n  var children = root.children.map(parseNodeDefs(defs));\n  return Object.assign({}, root, {\n    children: children\n  });\n};\nvar replaceDefs = function replaceDefs(node) {\n  return detachDefs(parseDefs(node));\n};\nvar parseViewbox = function parseViewbox(value) {\n  if (!value) return null;\n  var values = value.split(/[,\\s]+/).map(parseFloat);\n  if (values.length !== 4) return null;\n  return {\n    minX: values[0],\n    minY: values[1],\n    maxX: values[2],\n    maxY: values[3]\n  };\n};\nvar getContainer$1 = function getContainer(node) {\n  var viewbox = parseViewbox(node.props.viewBox);\n  if (viewbox) {\n    return {\n      width: viewbox.maxX,\n      height: viewbox.maxY\n    };\n  }\n  if (node.props.width && node.props.height) {\n    return {\n      width: parseFloat(node.props.width),\n      height: parseFloat(node.props.height)\n    };\n  }\n  return {\n    width: 0,\n    height: 0\n  };\n};\nvar SVG_INHERITED_PROPS = ['x', 'y', 'clipPath', 'clipRule', 'opacity', 'fill', 'fillOpacity', 'fillRule', 'stroke', 'strokeLinecap', 'strokeLinejoin', 'strokeOpacity', 'strokeWidth', 'textAnchor', 'dominantBaseline', 'color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\nvar getInheritProps = function getInheritProps(node) {\n  var props = node.props || {};\n  return pick(SVG_INHERITED_PROPS, props);\n};\nvar inheritProps = function inheritProps(node) {\n  if (!node.children) return node;\n  var inheritedProps = getInheritProps(node);\n  var children = node.children.map(function (child) {\n    var props = Object.assign({}, inheritedProps, child.props || {});\n    var newChild = Object.assign({}, child, {\n      props: props\n    });\n    return inheritProps(newChild);\n  });\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar parseAspectRatio = function parseAspectRatio(value) {\n  var match = value.replace(/[\\s\\r\\t\\n]+/gm, ' ').replace(/^defer\\s/, '').split(' ');\n  var align = match[0] || 'xMidYMid';\n  var meetOrSlice = match[1] || 'meet';\n  return {\n    align: align,\n    meetOrSlice: meetOrSlice\n  };\n};\nvar STYLE_PROPS = ['width', 'height', 'color', 'stroke', 'strokeWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'fill', 'fillRule', 'clipPath', 'offset', 'transform', 'strokeLinejoin', 'strokeLinecap', 'strokeDasharray'];\nvar VERTICAL_PROPS = ['y', 'y1', 'y2', 'height', 'cy', 'ry'];\nvar HORIZONTAL_PROPS = ['x', 'x1', 'x2', 'width', 'cx', 'rx'];\nvar isType$3 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isSvg$3 = isType$3(P.Svg);\nvar isText$5 = isType$3(P.Text);\nvar isTextInstance$3 = isType$3(P.TextInstance);\nvar transformPercent = function transformPercent(container) {\n  return function (props) {\n    return mapValues(props, function (value, key) {\n      var match = matchPercent(value);\n      if (match && VERTICAL_PROPS.includes(key)) {\n        return match.percent * container.height;\n      }\n      if (match && HORIZONTAL_PROPS.includes(key)) {\n        return match.percent * container.width;\n      }\n      return value;\n    });\n  };\n};\nvar parsePercent = function parsePercent(value) {\n  var match = matchPercent(value);\n  return match ? match.percent : parseFloat(value);\n};\nvar parseProps = function parseProps(container) {\n  return function (node) {\n    var props = transformPercent(container)(node.props);\n    props = evolve({\n      x: parseFloat,\n      x1: parseFloat,\n      x2: parseFloat,\n      y: parseFloat,\n      y1: parseFloat,\n      y2: parseFloat,\n      r: parseFloat,\n      rx: parseFloat,\n      ry: parseFloat,\n      cx: parseFloat,\n      cy: parseFloat,\n      width: parseFloat,\n      height: parseFloat,\n      offset: parsePercent,\n      fill: transformColor,\n      opacity: parsePercent,\n      stroke: transformColor,\n      stopOpacity: parsePercent,\n      stopColor: transformColor,\n      transform: processTransform\n    }, props);\n    return Object.assign({}, node, {\n      props: props\n    });\n  };\n};\nvar mergeStyles$1 = function mergeStyles(node) {\n  var style = node.style || {};\n  var props = Object.assign({}, style, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\nvar removeNoneValues = function removeNoneValues(node) {\n  var removeNone = function removeNone(value) {\n    return value === 'none' ? null : value;\n  };\n  var props = mapValues(node.props, removeNone);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\nvar pickStyleProps = function pickStyleProps(node) {\n  var props = node.props || {};\n  var styleProps = pick(STYLE_PROPS, props);\n  var style = Object.assign({}, styleProps, node.style || {});\n  return Object.assign({}, node, {\n    style: style\n  });\n};\nvar parseSvgProps = function parseSvgProps(node) {\n  var props = evolve({\n    width: parseFloat,\n    height: parseFloat,\n    viewBox: parseViewbox,\n    preserveAspectRatio: parseAspectRatio\n  }, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\nvar wrapBetweenTspan = function wrapBetweenTspan(node) {\n  return {\n    type: P.Tspan,\n    props: {},\n    children: [node]\n  };\n};\nvar addMissingTspan = function addMissingTspan(node) {\n  if (!isText$5(node)) return node;\n  if (!node.children) return node;\n  var resolveChild = function resolveChild(child) {\n    return isTextInstance$3(child) ? wrapBetweenTspan(child) : child;\n  };\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar parseText = function parseText(fontStore) {\n  return function (node) {\n    if (isText$5(node)) return layoutText$1(fontStore, node);\n    if (!node.children) return node;\n    var children = node.children.map(parseText(fontStore));\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\nvar resolveSvgNode = function resolveSvgNode(container) {\n  return compose(parseProps(container), addMissingTspan, removeNoneValues, mergeStyles$1);\n};\nvar resolveChildren = function resolveChildren(container) {\n  return function (node) {\n    if (!node.children) return node;\n    var resolveChild = compose(resolveChildren(container), resolveSvgNode(container));\n    var children = node.children.map(resolveChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\nvar resolveSvgRoot = function resolveSvgRoot(node, fontStore) {\n  var container = getContainer$1(node);\n  return compose(replaceDefs, parseText(fontStore), parseSvgProps, pickStyleProps, inheritProps, resolveChildren(container))(node);\n};\n\n/**\n * Pre-process SVG nodes so they can be rendered in the next steps\n *\n * @param {Object} node root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\nvar resolveSvg = function resolveSvg(node, fontStore) {\n  if (!node.children) return node;\n  var resolveChild = function resolveChild(child) {\n    return resolveSvg(child, fontStore);\n  };\n  var root = isSvg$3(node) ? resolveSvgRoot(node, fontStore) : node;\n  var children = root.children.map(resolveChild);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\nvar loadYoga = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var instance, config, node;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return Yoga.loadYoga();\n        case 2:\n          instance = _context.sent;\n          config = instance.Config.create();\n          config.setPointScaleFactor(0);\n          node = {\n            create: function create() {\n              return instance.Node.createWithConfig(config);\n            }\n          };\n          return _context.abrupt(\"return\", {\n            node: node\n          });\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function loadYoga() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar resolveYoga = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(root) {\n    var yoga;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return loadYoga();\n        case 2:\n          yoga = _context.sent;\n          return _context.abrupt(\"return\", Object.assign({}, root, {\n            yoga: yoga\n          }));\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveYoga(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getZIndex = function getZIndex(node) {\n  return node.style.zIndex;\n};\nvar shouldSort = function shouldSort(node) {\n  return node.type !== P.Document && node.type !== P.Svg;\n};\nvar sortZIndex = function sortZIndex(a, b) {\n  var za = getZIndex(a);\n  var zb = getZIndex(b);\n  if (!za && !zb) return 0;\n  if (!za) return 1;\n  if (!zb) return -1;\n  return zb - za;\n};\n\n/**\n * Sort children by zIndex value\n *\n * @param {Object} node\n * @returns {Object} node\n */\nvar resolveZIndex = function resolveZIndex(node) {\n  if (!node.children) return node;\n  var sortedChildren = shouldSort(node) ? node.children.sort(sortZIndex) : node.children;\n  var children = sortedChildren.map(resolveZIndex);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\n// Caches emoji images data\nvar emojis = {};\nvar regex = emojiRegex();\nvar reflect = function reflect(promise) {\n  return function () {\n    return promise.apply(void 0, arguments).then(function (v) {\n      return v;\n    }, function (e) {\n      return e;\n    });\n  };\n};\n\n// Returns a function to be able to mock resolveImage.\nvar makeFetchEmojiImage = function makeFetchEmojiImage() {\n  return reflect(resolveImage);\n};\n\n/**\n * When an emoji as no variations, it might still have 2 parts,\n * the canonical emoji and an empty string.\n * ex.\n *   (no color) Array.from('❤️') => [\"❤\", \"️\"]\n *   (w/ color) Array.from('👍🏿') => [\"👍\", \"🏿\"]\n *\n * The empty string needs to be removed otherwise the generated\n * url will be incorect.\n */\nvar _removeVariationSelectors = function _removeVariationSelectors(x) {\n  return x !== '️';\n};\nvar getCodePoints = function getCodePoints(string, withVariationSelectors) {\n  return Array.from(string).filter(withVariationSelectors ? function () {\n    return true;\n  } : _removeVariationSelectors).map(function (char) {\n    return char.codePointAt(0).toString(16);\n  }).join('-');\n};\nvar buildEmojiUrl = function buildEmojiUrl(emoji, source) {\n  var url = source.url,\n    format = source.format,\n    builder = source.builder,\n    withVariationSelectors = source.withVariationSelectors;\n  if (typeof builder === 'function') {\n    return builder(getCodePoints(emoji, withVariationSelectors));\n  }\n  return \"\" + url + getCodePoints(emoji, withVariationSelectors) + \".\" + format;\n};\nvar fetchEmojis = function fetchEmojis(string, source) {\n  if (!source || !source.url && !source.builder) return [];\n  var promises = [];\n  Array.from(string.matchAll(regex)).forEach(function (match) {\n    var emoji = match[0];\n    if (!emojis[emoji] || emojis[emoji].loading) {\n      var emojiUrl = buildEmojiUrl(emoji, source);\n      emojis[emoji] = {\n        loading: true\n      };\n      var fetchEmojiImage = makeFetchEmojiImage();\n      promises.push(fetchEmojiImage({\n        uri: emojiUrl\n      }).then(function (image) {\n        emojis[emoji].loading = false;\n        emojis[emoji].data = image.data;\n      }));\n    }\n  });\n  return promises;\n};\nvar specialCases = ['©️', '®', '™']; // Do not treat these as emojis if emoji not present\n\nvar embedEmojis = function embedEmojis(fragments) {\n  var result = [];\n  var _loop = function _loop() {\n    var fragment = fragments[i];\n    var lastIndex = 0;\n    Array.from(fragment.string.matchAll(regex)).forEach(function (match) {\n      var index = match.index;\n      var emoji = match[0];\n      var isSpecialCase = specialCases.includes(emoji);\n      var emojiSize = fragment.attributes.fontSize;\n      var chunk = fragment.string.slice(lastIndex, index + match[0].length);\n\n      // If emoji image was found, we create a new fragment with the\n      // correct attachment and object substitution character;\n      if (emojis[emoji] && emojis[emoji].data) {\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0xfffc)),\n          attributes: _extends({}, fragment.attributes, {\n            attachment: {\n              width: emojiSize,\n              height: emojiSize,\n              yOffset: Math.floor(emojiSize * 0.1),\n              image: emojis[emoji].data\n            }\n          })\n        });\n      } else if (isSpecialCase) {\n        result.push({\n          string: chunk,\n          attributes: fragment.attributes\n        });\n      } else {\n        // If no emoji data, we just replace the emoji with a nodef char\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0)),\n          attributes: fragment.attributes\n        });\n      }\n      lastIndex = index + emoji.length;\n    });\n    if (lastIndex < fragment.string.length) {\n      result.push({\n        string: fragment.string.slice(lastIndex),\n        attributes: fragment.attributes\n      });\n    }\n  };\n  for (var i = 0; i < fragments.length; i += 1) {\n    _loop();\n  }\n  return result;\n};\n\n/**\n * Get image source\n *\n * @param {Object} node image node\n * @returns {string | Object} image src\n */\nvar getSource = function getSource(node) {\n  var _node$props, _node$props2, _node$props3;\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.src) || ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.source) || ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.href);\n};\n\n/**\n * Resolves `src` to `@react-pdf/image` interface.\n *\n * Also it handles factories and async sources.\n *\n * @param {string | Object | Function} src\n * @returns {Promise<Object>} resolved src\n */\nvar resolveSource = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(src) {\n    var source;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(typeof src === 'function')) {\n            _context.next = 6;\n            break;\n          }\n          _context.next = 3;\n          return src();\n        case 3:\n          _context.t0 = _context.sent;\n          _context.next = 9;\n          break;\n        case 6:\n          _context.next = 8;\n          return src;\n        case 8:\n          _context.t0 = _context.sent;\n        case 9:\n          source = _context.t0;\n          return _context.abrupt(\"return\", typeof source === 'string' ? {\n            uri: source\n          } : source);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveSource(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Fetches image and append data to node\n * Ideally this fn should be immutable.\n *\n * @param {Object} node\n */\nvar fetchImage = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(node) {\n    var src, cache, source;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          src = getSource(node);\n          cache = node.props.cache;\n          if (src) {\n            _context.next = 5;\n            break;\n          }\n          console.warn(false, 'Image should receive either a \"src\" or \"source\" prop');\n          return _context.abrupt(\"return\");\n        case 5:\n          _context.prev = 5;\n          _context.next = 8;\n          return resolveSource(src);\n        case 8:\n          source = _context.sent;\n          if (source) {\n            _context.next = 11;\n            break;\n          }\n          throw new Error(\"Image's \\\"src\\\" or \\\"source\\\" prop returned \" + source);\n        case 11:\n          _context.next = 13;\n          return resolveImage(source, {\n            cache: cache\n          });\n        case 13:\n          node.image = _context.sent;\n          node.image.key = source.data ? source.data.toString() : source.uri;\n          _context.next = 21;\n          break;\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](5);\n          node.image = {\n            width: 0,\n            height: 0,\n            key: null\n          };\n          console.warn(_context.t0.message);\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[5, 17]]);\n  }));\n  return function fetchImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar isImage$2 = function isImage(node) {\n  return node.type === P.Image;\n};\n\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} fontStore font store\n * @param {Object} node root node\n * @returns {Promise<void>[]} asset promises\n */\nvar fetchAssets = function fetchAssets(fontStore, node) {\n  var _node$children;\n  var promises = [];\n  var listToExplore = ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.slice(0)) || [];\n  var emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n  while (listToExplore.length > 0) {\n    var _n$style;\n    var n = listToExplore.shift();\n    if (isImage$2(n)) {\n      promises.push(fetchImage(n));\n    }\n    if (fontStore && (_n$style = n.style) !== null && _n$style !== void 0 && _n$style.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n    if (typeof n === 'string') {\n      promises.push.apply(promises, fetchEmojis(n, emojiSource));\n    }\n    if (typeof n.value === 'string') {\n      promises.push.apply(promises, fetchEmojis(n.value, emojiSource));\n    }\n    if (n.children) {\n      n.children.forEach(function (childNode) {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n  return promises;\n};\n\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} node root node\n * @param {Object} fontStore font store\n * @returns {Promise<Object>} root node\n */\nvar resolveAssets = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(node, fontStore) {\n    var promises;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          promises = fetchAssets(fontStore, node);\n          _context.next = 3;\n          return Promise.all(promises);\n        case 3:\n          return _context.abrupt(\"return\", node);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveAssets(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar isLink$1 = function isLink(node) {\n  return node.type === P.Link;\n};\nvar DEFAULT_LINK_STYLES = {\n  color: 'blue',\n  textDecoration: 'underline'\n};\n\n/**\n * Computes styles using stylesheet\n *\n * @param {Object} container\n * @param {Object} node document node\n * @returns {Object} computed styles\n */\nvar computeStyle = function computeStyle(container, node) {\n  var baseStyle = node.style;\n  if (isLink$1(node)) {\n    baseStyle = Array.isArray(node.style) ? [DEFAULT_LINK_STYLES].concat(node.style) : [DEFAULT_LINK_STYLES, node.style];\n  }\n  return stylesheet(container, baseStyle);\n};\n\n/**\n * @typedef {Function} ResolveNodeStyles\n * @param {Object} node document node\n * @returns {Object} node (and subnodes) with resolved styles\n */\n\n/**\n * Resolves node styles\n *\n * @param {Object} container\n * @returns {ResolveNodeStyles} resolve node styles\n */\nvar resolveNodeStyles = function resolveNodeStyles(container) {\n  return function (node) {\n    var style = computeStyle(container, node);\n    if (!node.children) return Object.assign({}, node, {\n      style: style\n    });\n    var children = node.children.map(resolveNodeStyles(container));\n    return Object.assign({}, node, {\n      style: style,\n      children: children\n    });\n  };\n};\n\n/**\n * Resolves page styles\n *\n * @param {Object} page document page\n * @returns {Object} document page with resolved styles\n */\nvar resolvePageStyles = function resolvePageStyles(page) {\n  var _page$props, _page$box, _page$box2, _page$props2;\n  var dpi = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.dpi) || 72;\n  var width = ((_page$box = page.box) === null || _page$box === void 0 ? void 0 : _page$box.width) || page.style.width;\n  var height = ((_page$box2 = page.box) === null || _page$box2 === void 0 ? void 0 : _page$box2.height) || page.style.height;\n  var orientation = ((_page$props2 = page.props) === null || _page$props2 === void 0 ? void 0 : _page$props2.orientation) || 'portrait';\n  var container = {\n    width: width,\n    height: height,\n    orientation: orientation,\n    dpi: dpi\n  };\n  return resolveNodeStyles(container)(page);\n};\n\n/**\n * Resolves document styles\n *\n * @param {Object} root document root\n * @returns {Object} document root with resolved styles\n */\nvar resolveStyles = function resolveStyles(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageStyles);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\nvar getTransformStyle = function getTransformStyle(s) {\n  return function (node) {\n    var _node$style, _node$style2;\n    return isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style[s]) ? '50%' : (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2[s];\n  };\n};\n\n/**\n * Get node origin\n *\n * @param {Object} node\n * @returns {{ left?: number, top?: number }} node origin\n */\nvar getOrigin = function getOrigin(node) {\n  if (!node.box) return {};\n  var _node$box = node.box,\n    left = _node$box.left,\n    top = _node$box.top,\n    width = _node$box.width,\n    height = _node$box.height;\n  var transformOriginX = getTransformStyle('transformOriginX')(node);\n  var transformOriginY = getTransformStyle('transformOriginY')(node);\n  var percentX = matchPercent(transformOriginX);\n  var percentY = matchPercent(transformOriginY);\n  var offsetX = percentX ? width * percentX.percent : transformOriginX;\n  var offsetY = percentY ? height * percentY.percent : transformOriginY;\n  return {\n    left: left + offsetX,\n    top: top + offsetY\n  };\n};\n\n/**\n * Resolve node origin\n *\n * @param {Object} node\n * @returns {Object} node with origin attribute\n */\nvar resolveNodeOrigin = function resolveNodeOrigin(node) {\n  var origin = getOrigin(node);\n  var newNode = Object.assign({}, node, {\n    origin: origin\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolveNodeOrigin);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Resolve document origins\n *\n * @param {Object} root document root\n * @returns {Object} document root\n */\n\nvar resolveOrigin = function resolveOrigin(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolveNodeOrigin);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\n/* eslint-disable no-plusplus */\n/* eslint-disable prefer-const */\n/* eslint-disable prefer-destructuring */\n\nvar getBookmarkValue = function getBookmarkValue(title) {\n  return typeof title === 'string' ? {\n    title: title,\n    fit: false,\n    expanded: false\n  } : title;\n};\nvar resolveBookmarks = function resolveBookmarks(node) {\n  var refs = 0;\n  var children = (node.children || []).slice(0);\n  var listToExplore = children.map(function (value) {\n    return {\n      value: value,\n      parent: null\n    };\n  });\n  var _loop = function _loop() {\n    var _child$props;\n    var element = listToExplore.shift();\n    var child = element.value;\n    var parent = element.parent;\n    if ((_child$props = child.props) !== null && _child$props !== void 0 && _child$props.bookmark) {\n      var _parent;\n      var bookmark = getBookmarkValue(child.props.bookmark);\n      var ref = refs++;\n      var newHierarchy = _extends({\n        ref: ref,\n        parent: (_parent = parent) === null || _parent === void 0 ? void 0 : _parent.ref\n      }, bookmark);\n      child.props.bookmark = newHierarchy;\n      parent = newHierarchy;\n    }\n    if (child.children) {\n      child.children.forEach(function (childNode) {\n        listToExplore.push({\n          value: childNode,\n          parent: parent\n        });\n      });\n    }\n  };\n  while (listToExplore.length > 0) {\n    _loop();\n  }\n  return node;\n};\nvar VALID_ORIENTATIONS = ['portrait', 'landscape'];\n\n/**\n * Get page orientation. Defaults to portrait\n *\n * @param {Object} page object\n * @returns {string} page orientation\n */\nvar getOrientation = function getOrientation(page) {\n  var _page$props;\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.orientation) || 'portrait';\n  return VALID_ORIENTATIONS.includes(value) ? value : 'portrait';\n};\n\n/**\n * Return true if page is landscape\n *\n * @param {Object} page instance\n * @returns {boolean} is page landscape\n */\nvar isLandscape = function isLandscape(page) {\n  return getOrientation(page) === 'landscape';\n};\nvar PAGE_SIZES = {\n  '4A0': [4767.87, 6740.79],\n  '2A0': [3370.39, 4767.87],\n  A0: [2383.94, 3370.39],\n  A1: [1683.78, 2383.94],\n  A2: [1190.55, 1683.78],\n  A3: [841.89, 1190.55],\n  A4: [595.28, 841.89],\n  A5: [419.53, 595.28],\n  A6: [297.64, 419.53],\n  A7: [209.76, 297.64],\n  A8: [147.4, 209.76],\n  A9: [104.88, 147.4],\n  A10: [73.7, 104.88],\n  B0: [2834.65, 4008.19],\n  B1: [2004.09, 2834.65],\n  B2: [1417.32, 2004.09],\n  B3: [1000.63, 1417.32],\n  B4: [708.66, 1000.63],\n  B5: [498.9, 708.66],\n  B6: [354.33, 498.9],\n  B7: [249.45, 354.33],\n  B8: [175.75, 249.45],\n  B9: [124.72, 175.75],\n  B10: [87.87, 124.72],\n  C0: [2599.37, 3676.54],\n  C1: [1836.85, 2599.37],\n  C2: [1298.27, 1836.85],\n  C3: [918.43, 1298.27],\n  C4: [649.13, 918.43],\n  C5: [459.21, 649.13],\n  C6: [323.15, 459.21],\n  C7: [229.61, 323.15],\n  C8: [161.57, 229.61],\n  C9: [113.39, 161.57],\n  C10: [79.37, 113.39],\n  RA0: [2437.8, 3458.27],\n  RA1: [1729.13, 2437.8],\n  RA2: [1218.9, 1729.13],\n  RA3: [864.57, 1218.9],\n  RA4: [609.45, 864.57],\n  SRA0: [2551.18, 3628.35],\n  SRA1: [1814.17, 2551.18],\n  SRA2: [1275.59, 1814.17],\n  SRA3: [907.09, 1275.59],\n  SRA4: [637.8, 907.09],\n  EXECUTIVE: [521.86, 756.0],\n  FOLIO: [612.0, 936.0],\n  LEGAL: [612.0, 1008.0],\n  LETTER: [612.0, 792.0],\n  TABLOID: [792.0, 1224.0],\n  ID1: [153, 243]\n};\n\n/**\n * Transforms array into size object\n *\n * @param {number[]} v array\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar toSizeObject = function toSizeObject(v) {\n  return {\n    width: v[0],\n    height: v[1]\n  };\n};\n\n/**\n * Flip size object\n *\n * @param {{ width: number, height: number }} v size object\n * @returns {{ width: number, height: number }} flipped size object\n */\nvar flipSizeObject = function flipSizeObject(v) {\n  return {\n    width: v.height,\n    height: v.width\n  };\n};\n\n/**\n * Adjust page size to passed DPI\n *\n * @param {{ width: number, height: number }} v size object\n * @param {number} dpi DPI\n * @returns {{ width: number, height: number }} adjusted size object\n */\nvar adjustDpi = function adjustDpi(v, dpi) {\n  return {\n    width: v.width ? v.width * dpi : v.width,\n    height: v.height ? v.height * dpi : v.height\n  };\n};\n\n/**\n * Returns size object from a given string\n *\n * @param {string} v page size string\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar getStringSize = function getStringSize(v) {\n  return toSizeObject(PAGE_SIZES[v.toUpperCase()]);\n};\n\n/**\n * Returns size object from a single number\n *\n * @param {number} n page size number\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar getNumberSize = function getNumberSize(n) {\n  return toSizeObject([n]);\n};\n\n/**\n * Return page size in an object { width, height }\n *\n * @param {Object} page instance\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar getSize = function getSize(page) {\n  var _page$props, _page$props2;\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.size) || 'A4';\n  var dpi = parseFloat(((_page$props2 = page.props) === null || _page$props2 === void 0 ? void 0 : _page$props2.dpi) || 72);\n  var type = typeof value;\n\n  /**\n   * @type {{ width: number, height: number }}\n   */\n  var size;\n  if (type === 'string') {\n    size = getStringSize(value);\n  } else if (Array.isArray(value)) {\n    size = toSizeObject(value);\n  } else if (type === 'number') {\n    size = getNumberSize(value);\n  } else {\n    size = value;\n  }\n  size = adjustDpi(size, dpi / 72);\n  return isLandscape(page) ? flipSizeObject(size) : size;\n};\n\n/**\n * Resolves page size\n *\n * @param {Object} page\n * @returns {Object} page with resolved size in style attribute\n */\nvar resolvePageSize = function resolvePageSize(page) {\n  var size = getSize(page);\n  var style = flatten(page.style || {});\n  return _extends({}, page, {\n    style: _extends({}, style, size)\n  });\n};\n\n/**\n * Resolves page sizes\n *\n * @param {Object} root document root\n * @returns {Object} document root with resolved page sizes\n */\nvar resolvePageSizes = function resolvePageSizes(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageSize);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\nvar isFixed = function isFixed(node) {\n  var _node$props;\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fixed) === true;\n};\n\n/**\n * Get line index at given height\n *\n * @param {Object} node\n * @param {number} height\n */\nvar lineIndexAtHeight = function lineIndexAtHeight(node, height) {\n  var y = 0;\n  if (!node.lines) return 0;\n  for (var i = 0; i < node.lines.length; i += 1) {\n    var line = node.lines[i];\n    if (y + line.box.height > height) return i;\n    y += line.box.height;\n  }\n  return node.lines.length;\n};\n\n/**\n * Get height for given text line index\n *\n * @param {Object} node\n * @param {number} index\n */\nvar heightAtLineIndex = function heightAtLineIndex(node, index) {\n  var counter = 0;\n  if (!node.lines) return counter;\n  for (var i = 0; i < index; i += 1) {\n    var line = node.lines[i];\n    if (!line) break;\n    counter += line.box.height;\n  }\n  return counter;\n};\nvar getLineBreak = function getLineBreak(node, height) {\n  var top = get(node, ['box', 'top'], 0);\n  var widows = get(node, ['props', 'widows'], 2);\n  var orphans = get(node, ['props', 'orphans'], 2);\n  var linesQuantity = node.lines.length;\n  var slicedLine = lineIndexAtHeight(node, height - top);\n  if (slicedLine === 0) {\n    return 0;\n  }\n  if (linesQuantity < orphans) {\n    return linesQuantity;\n  }\n  if (slicedLine < orphans || linesQuantity < orphans + widows) {\n    return 0;\n  }\n  if (linesQuantity === orphans + widows) {\n    return orphans;\n  }\n  if (linesQuantity - slicedLine < widows) {\n    return linesQuantity - widows;\n  }\n  return slicedLine;\n};\n\n// Also receives contentArea in case it's needed\nvar splitText = function splitText(node, height) {\n  var slicedLineIndex = getLineBreak(node, height);\n  var currentHeight = heightAtLineIndex(node, slicedLineIndex);\n  var nextHeight = node.box.height - currentHeight;\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      height: currentHeight,\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    }),\n    lines: node.lines.slice(0, slicedLineIndex)\n  });\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      height: nextHeight,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    }),\n    lines: node.lines.slice(slicedLineIndex)\n  });\n  return [current, next];\n};\nvar getTop$1 = function getTop(node) {\n  var _node$box;\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\nvar hasFixedHeight = function hasFixedHeight(node) {\n  var _node$style;\n  return !isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height);\n};\nvar splitNode = function splitNode(node, height) {\n  if (!node) return [null, null];\n  var nodeTop = getTop$1(node);\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    })\n  });\n  current.style.height = height - nodeTop;\n  var nextHeight = hasFixedHeight(node) ? node.box.height - (height - nodeTop) : null;\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    })\n  });\n  if (nextHeight) {\n    next.style.height = nextHeight;\n  }\n  return [current, next];\n};\nvar NON_WRAP_TYPES = [P.Svg, P.Note, P.Image, P.Canvas];\nvar getWrap = function getWrap(node) {\n  var _node$props;\n  if (NON_WRAP_TYPES.includes(node.type)) return false;\n  return isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.wrap) ? true : node.props.wrap;\n};\nvar getComputedPadding = function getComputedPadding(node, edge) {\n  var yogaNode = node.yogaNode;\n  return yogaNode ? yogaNode.getComputedPadding(edge) : null;\n};\n\n/**\n * Get Yoga computed paddings. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ paddingTop: number, paddingRight: number, paddingBottom: number, paddingLeft: number }} paddings\n */\nvar getPadding = function getPadding(node) {\n  var style = node.style,\n    box = node.box;\n  var paddingTop = getComputedPadding(node, Yoga.Edge.Top) || (box === null || box === void 0 ? void 0 : box.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingRight = getComputedPadding(node, Yoga.Edge.Right) || (box === null || box === void 0 ? void 0 : box.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingBottom = getComputedPadding(node, Yoga.Edge.Bottom) || (box === null || box === void 0 ? void 0 : box.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingLeft = getComputedPadding(node, Yoga.Edge.Left) || (box === null || box === void 0 ? void 0 : box.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  return {\n    paddingTop: paddingTop,\n    paddingRight: paddingRight,\n    paddingBottom: paddingBottom,\n    paddingLeft: paddingLeft\n  };\n};\nvar getWrapArea = function getWrapArea(page) {\n  var _page$style;\n  var _getPadding = getPadding(page),\n    paddingBottom = _getPadding.paddingBottom;\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n  return height - paddingBottom;\n};\nvar getContentArea = function getContentArea(page) {\n  var _page$style;\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n  var _getPadding = getPadding(page),\n    paddingTop = _getPadding.paddingTop,\n    paddingBottom = _getPadding.paddingBottom;\n  return height - paddingBottom - paddingTop;\n};\nvar _excluded = [\"style\", \"children\"];\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\nvar isNumber = function isNumber(value) {\n  return typeof value === 'number';\n};\nvar isFragment = function isFragment(value) {\n  return value && value.type === Symbol.for('react.fragment');\n};\n\n/**\n * Transforms a react element instance to internal element format.\n *\n * Can return multiple instances in the case of arrays or fragments.\n *\n * @param {Object} element React element\n * @returns {Object[]} parsed React elements\n */\nvar createInstances = function createInstances(element) {\n  if (!element) return [];\n  if (isString(element) || isNumber(element)) {\n    return [{\n      type: TextInstance,\n      value: \"\" + element\n    }];\n  }\n  if (isFragment(element)) {\n    return createInstances(element.props.children);\n  }\n  if (Array.isArray(element)) {\n    return element.reduce(function (acc, el) {\n      return acc.concat(createInstances(el));\n    }, []);\n  }\n  if (!isString(element.type)) {\n    return createInstances(element.type(element.props));\n  }\n  var type = element.type,\n    _element$props = element.props,\n    _element$props$style = _element$props.style,\n    style = _element$props$style === void 0 ? {} : _element$props$style,\n    _element$props$childr = _element$props.children,\n    children = _element$props$childr === void 0 ? [] : _element$props$childr,\n    props = _objectWithoutPropertiesLoose(_element$props, _excluded);\n  var nextChildren = castArray(children).reduce(function (acc, child) {\n    return acc.concat(createInstances(child));\n  }, []);\n  return [{\n    type: type,\n    style: style,\n    props: props,\n    box: {},\n    children: nextChildren\n  }];\n};\n\n/* eslint-disable no-continue */\n\nvar getBreak = function getBreak(node) {\n  var _node$props;\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.break) || false;\n};\nvar getMinPresenceAhead = function getMinPresenceAhead(node) {\n  var _node$props2;\n  return ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.minPresenceAhead) || 0;\n};\nvar getFurthestEnd = function getFurthestEnd(elements) {\n  return Math.max.apply(Math, elements.map(function (node) {\n    return node.box.top + node.box.height;\n  }));\n};\nvar getEndOfMinPresenceAhead = function getEndOfMinPresenceAhead(child) {\n  return child.box.top + child.box.height + child.box.marginBottom + getMinPresenceAhead(child);\n};\nvar getEndOfPresence = function getEndOfPresence(child, futureElements) {\n  var afterMinPresenceAhead = getEndOfMinPresenceAhead(child);\n  var endOfFurthestFutureElement = getFurthestEnd(futureElements.filter(function (node) {\n    var _node$props3;\n    return !((_node$props3 = node.props) !== null && _node$props3 !== void 0 && _node$props3.fixed);\n  }));\n  return Math.min(afterMinPresenceAhead, endOfFurthestFutureElement);\n};\nvar shouldBreak = function shouldBreak(child, futureElements, height) {\n  var _child$props;\n  if ((_child$props = child.props) !== null && _child$props !== void 0 && _child$props.fixed) return false;\n  var shouldSplit = height < child.box.top + child.box.height;\n  var canWrap = getWrap(child);\n\n  // Calculate the y coordinate where the desired presence of the child ends\n  var endOfPresence = getEndOfPresence(child, futureElements);\n  // If the child is already at the top of the page, breaking won't improve its presence\n  // (as long as react-pdf does not support breaking into differently sized containers)\n  var breakingImprovesPresence = child.box.top > child.box.marginTop;\n  return getBreak(child) || shouldSplit && !canWrap || !shouldSplit && endOfPresence > height && breakingImprovesPresence;\n};\nvar IGNORABLE_CODEPOINTS = [8232,\n// LINE_SEPARATOR\n8233 // PARAGRAPH_SEPARATOR\n];\nvar buildSubsetForFont = function buildSubsetForFont(font) {\n  return IGNORABLE_CODEPOINTS.reduce(function (acc, codePoint) {\n    if (font && font.hasGlyphForCodePoint && font.hasGlyphForCodePoint(codePoint)) {\n      return acc;\n    }\n    return [].concat(acc, [String.fromCharCode(codePoint)]);\n  }, []);\n};\nvar ignoreChars = function ignoreChars(fragments) {\n  return fragments.map(function (fragment) {\n    var charSubset = buildSubsetForFont(fragment.attributes.font);\n    var subsetRegex = new RegExp(charSubset.join('|'));\n    return {\n      string: fragment.string.replace(subsetRegex, ''),\n      attributes: fragment.attributes\n    };\n  });\n};\nvar PREPROCESSORS = [ignoreChars, embedEmojis];\nvar isImage$1 = function isImage(node) {\n  return node.type === P.Image;\n};\nvar isTextInstance$2 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\n\n/**\n * Get textkit fragments of given node object\n *\n * @param {Object} fontStore font store\n * @param {Object} instance node\n * @param {string} [parentLink] parent link\n * @param {number} [level] fragment level\n * @returns {Object[]} text fragments\n */\nvar getFragments = function getFragments(fontStore, instance, parentLink, level) {\n  var _instance$props, _instance$props2;\n  if (level === void 0) {\n    level = 0;\n  }\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n    _instance$style$color = _instance$style.color,\n    color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n    _instance$style$direc = _instance$style.direction,\n    direction = _instance$style$direc === void 0 ? 'ltr' : _instance$style$direc,\n    _instance$style$fontF = _instance$style.fontFamily,\n    fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n    fontWeight = _instance$style.fontWeight,\n    fontStyle = _instance$style.fontStyle,\n    _instance$style$fontS = _instance$style.fontSize,\n    fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n    textAlign = _instance$style.textAlign,\n    lineHeight = _instance$style.lineHeight,\n    textDecoration = _instance$style.textDecoration,\n    textDecorationColor = _instance$style.textDecorationColor,\n    textDecorationStyle = _instance$style.textDecorationStyle,\n    textTransform = _instance$style.textTransform,\n    letterSpacing = _instance$style.letterSpacing,\n    textIndent = _instance$style.textIndent,\n    opacity = _instance$style.opacity,\n    verticalAlign = _instance$style.verticalAlign;\n  var fontFamilies = typeof fontFamily === 'string' ? [fontFamily] : [].concat(fontFamily || []);\n  var font = fontFamilies.map(function (fontFamilyName) {\n    if (typeof fontFamilyName !== 'string') return fontFamilyName;\n    var opts = {\n      fontFamily: fontFamilyName,\n      fontWeight: fontWeight,\n      fontStyle: fontStyle\n    };\n    var obj = fontStore ? fontStore.getFont(opts) : null;\n    return obj ? obj.data : fontFamilyName;\n  });\n\n  // Don't pass main background color to textkit. Will be rendered by the render package instead\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    direction: direction,\n    verticalAlign: verticalAlign,\n    backgroundColor: backgroundColor,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: parentLink || ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null,\n    align: textAlign || (direction === 'rtl' ? 'right' : 'left')\n  };\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n    if (isImage$1(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: _extends({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance$2(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, attributes.link, level + 1));\n    }\n  }\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n  return fragments;\n};\n\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} fontStore font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return fromFragments(fragments);\n};\nvar engines = {\n  bidi: bidi,\n  linebreaker: linebreaker,\n  justification: justification,\n  textDecoration: textDecoration,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution\n};\nvar engine = layoutEngine(engines);\nvar getMaxLines = function getMaxLines(node) {\n  var _node$style;\n  return (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.maxLines;\n};\nvar getTextOverflow = function getTextOverflow(node) {\n  var _node$style2;\n  return (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.textOverflow;\n};\n\n/**\n * Get layout container for specific text node\n *\n * @param {number} width\n * @param {number} height\n * @param {Object} node\n * @returns {Object} layout container\n */\nvar getContainer = function getContainer(width, height, node) {\n  var maxLines = getMaxLines(node);\n  var textOverflow = getTextOverflow(node);\n  return {\n    x: 0,\n    y: 0,\n    width: width,\n    maxLines: maxLines,\n    height: height || Infinity,\n    truncateMode: textOverflow\n  };\n};\n\n/**\n * Get text layout options for specific text node\n *\n * @param {Object} node instance\n * @returns {Object} layout options\n */\nvar getLayoutOptions = function getLayoutOptions(fontStore, node) {\n  return {\n    hyphenationPenalty: node.props.hyphenationPenalty,\n    shrinkWhitespaceFactor: {\n      before: -0.5,\n      after: -0.5\n    },\n    hyphenationCallback: node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null\n  };\n};\n\n/**\n * Get text lines for given node\n *\n * @param {Object} node node\n * @param {number} width container width\n * @param {number} height container height\n * @param {number} fontStore font store\n * @returns {Object[]} layout lines\n */\nvar layoutText = function layoutText(node, width, height, fontStore) {\n  var attributedString = getAttributedString(fontStore, node);\n  var container = getContainer(width, height, node);\n  var options = getLayoutOptions(fontStore, node);\n  var lines = engine(attributedString, container, options);\n  return lines.reduce(function (acc, line) {\n    return [].concat(acc, line);\n  }, []);\n};\nvar isType$2 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isSvg$2 = isType$2(P.Svg);\nvar isText$4 = isType$2(P.Text);\nvar shouldIterate = function shouldIterate(node) {\n  return !isSvg$2(node) && !isText$4(node);\n};\nvar shouldLayoutText = function shouldLayoutText(node) {\n  return isText$4(node) && !node.lines;\n};\n\n/**\n * Performs text layout on text node if wasn't calculated before.\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\n * but we need to layout those nodes with fixed width and height.\n *\n * @param {Object} node\n * @returns {Object} layout node\n */\nvar resolveTextLayout = function resolveTextLayout(node, fontStore) {\n  if (shouldLayoutText(node)) {\n    var width = node.box.width - (node.box.paddingRight + node.box.paddingLeft);\n    var height = node.box.height - (node.box.paddingTop + node.box.paddingBottom);\n\n    // eslint-disable-next-line no-param-reassign\n    node.lines = layoutText(node, width, height, fontStore);\n  }\n  if (shouldIterate(node)) {\n    if (!node.children) return node;\n    var mapChild = function mapChild(child) {\n      return resolveTextLayout(child, fontStore);\n    };\n    var children = node.children.map(mapChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  }\n  return node;\n};\nvar BASE_INHERITABLE_PROPERTIES = ['color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'textTransform', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\nvar TEXT_INHERITABLE_PROPERTIES = [].concat(BASE_INHERITABLE_PROPERTIES, ['backgroundColor']);\nvar isSvg$1 = function isSvg(node) {\n  return node.type === P.Svg;\n};\nvar isText$3 = function isText(node) {\n  return node.type === P.Text;\n};\n\n// Merge style values\nvar mergeValues = function mergeValues(styleName, value, inheritedValue) {\n  switch (styleName) {\n    case 'textDecoration':\n      {\n        // merge not none and not false textDecoration values to one rule\n        return [inheritedValue, value].filter(function (v) {\n          return v && v !== 'none';\n        }).join(' ');\n      }\n    default:\n      return value;\n  }\n};\n\n// Merge inherited and node styles\nvar merge = function merge(inheritedStyles, style) {\n  var mergedStyles = _extends({}, inheritedStyles);\n  Object.entries(style).forEach(function (_ref) {\n    var styleName = _ref[0],\n      value = _ref[1];\n    mergedStyles[styleName] = mergeValues(styleName, value, inheritedStyles[styleName]);\n  });\n  return mergedStyles;\n};\n\n/**\n * @typedef {Function} MergeStyles\n * @param {Object} node\n * @returns {Object} node with styles merged\n */\n\n/**\n * Merges styles with node\n *\n * @param {Object} inheritedStyles style object\n * @returns {MergeStyles} merge styles function\n */\nvar mergeStyles = function mergeStyles(inheritedStyles) {\n  return function (node) {\n    var style = merge(inheritedStyles, node.style || {});\n    return Object.assign({}, node, {\n      style: style\n    });\n  };\n};\n\n/**\n * Inherit style values from the root to the leafs\n *\n * @param {Object} node document root\n * @returns {Object} document root with inheritance\n *\n */\nvar resolveInheritance = function resolveInheritance(node) {\n  if (isSvg$1(node)) return node;\n  if (!node.children) return node;\n  var inheritableProperties = isText$3(node) ? TEXT_INHERITABLE_PROPERTIES : BASE_INHERITABLE_PROPERTIES;\n  var inheritStyles = pick(inheritableProperties, node.style || {});\n  var resolveChild = compose(resolveInheritance, mergeStyles(inheritStyles));\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar getComputedMargin = function getComputedMargin(node, edge) {\n  var yogaNode = node.yogaNode;\n  return yogaNode ? yogaNode.getComputedMargin(edge) : null;\n};\n\n/**\n * Get Yoga computed magins. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ marginTop: number, marginRight: number, marginBottom: number, marginLeft: number }} margins\n */\nvar getMargin = function getMargin(node) {\n  var style = node.style,\n    box = node.box;\n  var marginTop = getComputedMargin(node, Yoga.Edge.Top) || (box === null || box === void 0 ? void 0 : box.marginTop) || (style === null || style === void 0 ? void 0 : style.marginTop) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginRight = getComputedMargin(node, Yoga.Edge.Right) || (box === null || box === void 0 ? void 0 : box.marginRight) || (style === null || style === void 0 ? void 0 : style.marginRight) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginBottom = getComputedMargin(node, Yoga.Edge.Bottom) || (box === null || box === void 0 ? void 0 : box.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginLeft = getComputedMargin(node, Yoga.Edge.Left) || (box === null || box === void 0 ? void 0 : box.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  return {\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom,\n    marginLeft: marginLeft\n  };\n};\n\n/**\n * Get Yoga computed position. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ top: number, right: number, bottom: number, left: number }} position\n */\nvar getPosition = function getPosition(node) {\n  var yogaNode = node.yogaNode;\n  return {\n    top: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedTop()) || 0,\n    right: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedRight()) || 0,\n    bottom: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedBottom()) || 0,\n    left: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedLeft()) || 0\n  };\n};\nvar DEFAULT_DIMENSION = {\n  width: 0,\n  height: 0\n};\n\n/**\n * Get Yoga computed dimensions. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ width: number, height: number }} dimensions\n */\nvar getDimension = function getDimension(node) {\n  var yogaNode = node.yogaNode;\n  if (!yogaNode) return DEFAULT_DIMENSION;\n  return {\n    width: yogaNode.getComputedWidth(),\n    height: yogaNode.getComputedHeight()\n  };\n};\nvar getComputedBorder = function getComputedBorder(yogaNode, edge) {\n  return yogaNode ? yogaNode.getComputedBorder(edge) : 0;\n};\n\n/**\n * Get Yoga computed border width. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ borderTopWidth: number, borderRightWidth: number, borderBottomWidth: number, borderLeftWidth: number }} border widths\n */\nvar getBorderWidth = function getBorderWidth(node) {\n  var yogaNode = node.yogaNode;\n  return {\n    borderTopWidth: getComputedBorder(yogaNode, Yoga.Edge.Top),\n    borderRightWidth: getComputedBorder(yogaNode, Yoga.Edge.Right),\n    borderBottomWidth: getComputedBorder(yogaNode, Yoga.Edge.Bottom),\n    borderLeftWidth: getComputedBorder(yogaNode, Yoga.Edge.Left)\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set display attribute to node's Yoga instance\n *\n * @param {string} value display\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setDisplay = function setDisplay(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (yogaNode) {\n      yogaNode.setDisplay(value === 'none' ? Yoga.Display.None : Yoga.Display.Flex);\n    }\n    return node;\n  };\n};\nvar OVERFLOW = {\n  hidden: Yoga.Overflow.Hidden,\n  scroll: Yoga.Overflow.Scroll\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set overflow attribute to node's Yoga instance\n *\n * @param {string} value overflow value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setOverflow = function setOverflow(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      var overflow = OVERFLOW[value] || Yoga.Overflow.Visible;\n      yogaNode.setOverflow(overflow);\n    }\n    return node;\n  };\n};\nvar FLEX_WRAP = {\n  wrap: Yoga.Wrap.Wrap,\n  'wrap-reverse': Yoga.Wrap.WrapReverse\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex wrap attribute to node's Yoga instance\n *\n * @param {string} value flex wrap value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexWrap = function setFlexWrap(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (yogaNode) {\n      var flexWrap = FLEX_WRAP[value] || Yoga.Wrap.NoWrap;\n      yogaNode.setFlexWrap(flexWrap);\n    }\n    return node;\n  };\n};\n\n/* eslint-disable no-unused-expressions */\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * @typedef {Function} YogaValueSetter\n * @param {any} value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\n\n/**\n * Set generic yoga attribute to node's Yoga instance, handing `auto`, edges and percentage cases\n *\n * @param {string} attr property\n * @param {number} [edge] edge\n * @returns {YogaValueSetter} node instance wrapper\n */\nvar setYogaValue = function setYogaValue(attr, edge) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node.yogaNode;\n      if (!isNil(value) && yogaNode) {\n        var hasEdge = !isNil(edge);\n        var fixedMethod = \"set\" + upperFirst(attr);\n        var autoMethod = fixedMethod + \"Auto\";\n        var percentMethod = fixedMethod + \"Percent\";\n        var percent = matchPercent(value);\n        if (percent && !yogaNode[percentMethod]) {\n          throw new Error(\"You can't pass percentage values to \" + attr + \" property\");\n        }\n        if (percent) {\n          if (hasEdge) {\n            var _yogaNode$percentMeth;\n            (_yogaNode$percentMeth = yogaNode[percentMethod]) === null || _yogaNode$percentMeth === void 0 ? void 0 : _yogaNode$percentMeth.call(yogaNode, edge, percent.value);\n          } else {\n            var _yogaNode$percentMeth2;\n            (_yogaNode$percentMeth2 = yogaNode[percentMethod]) === null || _yogaNode$percentMeth2 === void 0 ? void 0 : _yogaNode$percentMeth2.call(yogaNode, percent.value);\n          }\n        } else if (value === 'auto') {\n          if (hasEdge) {\n            var _yogaNode$autoMethod;\n            (_yogaNode$autoMethod = yogaNode[autoMethod]) === null || _yogaNode$autoMethod === void 0 ? void 0 : _yogaNode$autoMethod.call(yogaNode, edge);\n          } else {\n            var _yogaNode$autoMethod2;\n            (_yogaNode$autoMethod2 = yogaNode[autoMethod]) === null || _yogaNode$autoMethod2 === void 0 ? void 0 : _yogaNode$autoMethod2.call(yogaNode);\n          }\n        } else if (hasEdge) {\n          var _yogaNode$fixedMethod;\n          (_yogaNode$fixedMethod = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod === void 0 ? void 0 : _yogaNode$fixedMethod.call(yogaNode, edge, value);\n        } else {\n          var _yogaNode$fixedMethod2;\n          (_yogaNode$fixedMethod2 = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod2 === void 0 ? void 0 : _yogaNode$fixedMethod2.call(yogaNode, value);\n        }\n      }\n      return node;\n    };\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex grow attribute to node's Yoga instance\n *\n * @param {number} value flex grow value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexGrow = function setFlexGrow(value) {\n  return function (node) {\n    return setYogaValue('flexGrow')(value || 0)(node);\n  };\n};\n\n/**\n * Set flex basis attribute to node's Yoga instance\n *\n * @param {number} flex basis value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setFlexBasis = setYogaValue('flexBasis');\nvar ALIGN = {\n  'flex-start': Yoga.Align.FlexStart,\n  center: Yoga.Align.Center,\n  'flex-end': Yoga.Align.FlexEnd,\n  stretch: Yoga.Align.Stretch,\n  baseline: Yoga.Align.Baseline,\n  'space-between': Yoga.Align.SpaceBetween,\n  'space-around': Yoga.Align.SpaceAround\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * @typedef {Function} AlignSetter\n * @param {string} value align value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\n\n/**\n * Set generic align attribute to node's Yoga instance\n *\n * @param {string} attr specific align property\n * @returns {AlignSetter} align setter\n */\nvar setAlign = function setAlign(attr) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node.yogaNode;\n      var defaultValue = attr === 'items' ? Yoga.Align.Stretch : Yoga.Align.Auto;\n      if (yogaNode) {\n        var align = ALIGN[value] || defaultValue;\n        yogaNode[\"setAlign\" + upperFirst(attr)](align);\n      }\n      return node;\n    };\n  };\n};\n\n/**\n * Set align self attribute to node's Yoga instance\n *\n * @param {string} align value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setAlignSelf = setAlign('self');\n\n/**\n * Set align items attribute to node's Yoga instance\n *\n * @param {string} align value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setAlignItems = setAlign('items');\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex shrink attribute to node's Yoga instance\n *\n * @param {number} value flex shrink value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexShrink = function setFlexShrink(value) {\n  return function (node) {\n    return setYogaValue('flexShrink')(value || 1)(node);\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set aspect ratio attribute to node's Yoga instance\n *\n * @param {number} value ratio\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setAspectRatio = function setAspectRatio(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setAspectRatio(value);\n    }\n    return node;\n  };\n};\n\n/**\n * Set align content attribute to node's Yoga instance\n *\n * @param {string} align value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setAlignContent = setAlign('content');\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set position type attribute to node's Yoga instance\n *\n * @param {string} value position position type\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setPositionType = function setPositionType(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setPositionType(value === 'absolute' ? Yoga.PositionType.Absolute : Yoga.PositionType.Relative);\n    }\n    return node;\n  };\n};\nvar FLEX_DIRECTIONS = {\n  row: Yoga.FlexDirection.Row,\n  'row-reverse': Yoga.FlexDirection.RowReverse,\n  'column-reverse': Yoga.FlexDirection.ColumnReverse\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex direction attribute to node's Yoga instance\n *\n * @param {string} value flex direction value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexDirection = function setFlexDirection(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (yogaNode) {\n      var flexDirection = FLEX_DIRECTIONS[value] || Yoga.FlexDirection.Column;\n      yogaNode.setFlexDirection(flexDirection);\n    }\n    return node;\n  };\n};\nvar JUSTIFY_CONTENT = {\n  center: Yoga.Justify.Center,\n  'flex-end': Yoga.Justify.FlexEnd,\n  'space-between': Yoga.Justify.SpaceBetween,\n  'space-around': Yoga.Justify.SpaceAround,\n  'space-evenly': Yoga.Justify.SpaceEvenly\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set justify content attribute to node's Yoga instance\n *\n * @param {string} value justify content value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setJustifyContent = function setJustifyContent(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      var justifyContent = JUSTIFY_CONTENT[value] || Yoga.Justify.FlexStart;\n      yogaNode.setJustifyContent(justifyContent);\n    }\n    return node;\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set margin top attribute to node's Yoga instance\n *\n * @param {number} margin margin top\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginTop = setYogaValue('margin', Yoga.Edge.Top);\n\n/**\n * Set margin right attribute to node's Yoga instance\n *\n * @param {number} margin margin right\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginRight = setYogaValue('margin', Yoga.Edge.Right);\n\n/**\n * Set margin bottom attribute to node's Yoga instance\n *\n * @param {number} margin margin bottom\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginBottom = setYogaValue('margin', Yoga.Edge.Bottom);\n\n/**\n * Set margin left attribute to node's Yoga instance\n *\n * @param {number} margin margin left\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginLeft = setYogaValue('margin', Yoga.Edge.Left);\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set padding top attribute to node's Yoga instance\n *\n * @param {number} padding padding top\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingTop = setYogaValue('padding', Yoga.Edge.Top);\n\n/**\n * Set padding right attribute to node's Yoga instance\n *\n * @param {number} padding padding right\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingRight = setYogaValue('padding', Yoga.Edge.Right);\n\n/**\n * Set padding bottom attribute to node's Yoga instance\n *\n * @param {number} padding padding bottom\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingBottom = setYogaValue('padding', Yoga.Edge.Bottom);\n\n/**\n * Set padding left attribute to node's Yoga instance\n *\n * @param {number} padding padding left\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingLeft = setYogaValue('padding', Yoga.Edge.Left);\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set border top attribute to node's Yoga instance\n *\n * @param {number} border border top width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderTop = setYogaValue('border', Yoga.Edge.Top);\n\n/**\n * Set border right attribute to node's Yoga instance\n *\n * @param {number} border border right width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderRight = setYogaValue('border', Yoga.Edge.Right);\n\n/**\n * Set border bottom attribute to node's Yoga instance\n *\n * @param {number} border border bottom width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderBottom = setYogaValue('border', Yoga.Edge.Bottom);\n\n/**\n * Set border left attribute to node's Yoga instance\n *\n * @param {number} border border left width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderLeft = setYogaValue('border', Yoga.Edge.Left);\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set position top attribute to node's Yoga instance\n *\n * @param {number} position position top\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionTop = setYogaValue('position', Yoga.Edge.Top);\n\n/**\n * Set position right attribute to node's Yoga instance\n *\n * @param {number} position position right\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionRight = setYogaValue('position', Yoga.Edge.Right);\n\n/**\n * Set position bottom attribute to node's Yoga instance\n *\n * @param {number} position position bottom\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionBottom = setYogaValue('position', Yoga.Edge.Bottom);\n\n/**\n * Set position left attribute to node's Yoga instance\n *\n * @param {number} position position left\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionLeft = setYogaValue('position', Yoga.Edge.Left);\n\n/**\n * Set width to node's Yoga instance\n *\n * @param {number} width\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setWidth = setYogaValue('width');\n\n/**\n * Set min width to node's Yoga instance\n *\n * @param {number} min width\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMinWidth = setYogaValue('minWidth');\n\n/**\n * Set max width to node's Yoga instance\n *\n * @param {number} max width\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMaxWidth = setYogaValue('maxWidth');\n\n/**\n * Set height to node's Yoga instance\n *\n * @param {number} height\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setHeight = setYogaValue('height');\n\n/**\n * Set min height to node's Yoga instance\n *\n * @param {number} min height\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMinHeight = setYogaValue('minHeight');\n\n/**\n * Set max height to node's Yoga instance\n *\n * @param {number} max height\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMaxHeight = setYogaValue('maxHeight');\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Check if value is a percentage and throw error if so\n *\n * @param {string} attr property\n * @param {unknown} value\n * @returns {void}\n */\nvar checkPercents = function checkPercents(attr, value) {\n  var percent = matchPercent(value);\n  if (percent) {\n    throw new Error(\"You can't pass percentage values to \" + attr + \" property\");\n  }\n};\n\n/**\n * Set rowGap value to node's Yoga instance\n *\n * @param {number} value gap value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setRowGap = function setRowGap(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      checkPercents('rowGap', value);\n      yogaNode.setGap(Yoga.Gutter.Row, value);\n    }\n    return node;\n  };\n};\n\n/**\n * Set columnGap value to node's Yoga instance\n *\n * @param {number} value gap value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setColumnGap = function setColumnGap(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      checkPercents('columnGap', value);\n      yogaNode.setGap(Yoga.Gutter.Column, value);\n    }\n    return node;\n  };\n};\nvar getAspectRatio = function getAspectRatio(viewbox) {\n  if (!viewbox) return null;\n  return (viewbox.maxX - viewbox.minX) / (viewbox.maxY - viewbox.minY);\n};\n\n/**\n * @typedef {Function} MeasureSvg\n * @param {number} width\n * @param {number} widthMode\n * @param {number} height\n * @param {number} heightMode\n * @returns {{ width: number, height: number }} svg width and height\n */\n\n/**\n * Yoga svg measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @returns {MeasureSvg} measure svg\n */\nvar measureCanvas$1 = function measureCanvas(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var aspectRatio = getAspectRatio(node.props.viewBox) || 1;\n    if (widthMode === Yoga.MeasureMode.Exactly || widthMode === Yoga.MeasureMode.AtMost) {\n      return {\n        width: width,\n        height: width / aspectRatio\n      };\n    }\n    if (heightMode === Yoga.MeasureMode.Exactly) {\n      return {\n        width: height * aspectRatio\n      };\n    }\n    return {};\n  };\n};\n\n/**\n * Get lines width (if any)\n *\n * @param {Object} node\n * @returns {number} lines width\n */\nvar linesWidth = function linesWidth(node) {\n  if (!node.lines) return 0;\n  return Math.max.apply(Math, [0].concat(node.lines.map(function (line) {\n    return line.xAdvance;\n  })));\n};\n\n/**\n * Get lines height (if any)\n *\n * @param {Object} node\n * @returns {number} lines height\n */\nvar linesHeight = function linesHeight(node) {\n  if (!node.lines) return -1;\n  return node.lines.reduce(function (acc, line) {\n    return acc + line.box.height;\n  }, 0);\n};\n\n/* eslint-disable no-param-reassign */\n\nvar ALIGNMENT_FACTORS = {\n  center: 0.5,\n  right: 1\n};\n\n/**\n * @typedef {Function} MeasureText\n * @param {number} width\n * @param {number} widthMode\n * @param {number} height\n * @returns {{ width: number, height: number }} text width and height\n */\n\n/**\n * Yoga text measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Object} fontStore\n * @returns {MeasureText} measure text function\n */\nvar measureText = function measureText(page, node, fontStore) {\n  return function (width, widthMode, height) {\n    if (widthMode === Yoga.MeasureMode.Exactly) {\n      if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\n      return {\n        height: linesHeight(node)\n      };\n    }\n    if (widthMode === Yoga.MeasureMode.AtMost) {\n      var _node$style;\n      var alignFactor = ALIGNMENT_FACTORS[(_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.textAlign] || 0;\n      if (!node.lines) {\n        node.lines = layoutText(node, width, height, fontStore);\n        node.alignOffset = (width - linesWidth(node)) * alignFactor; // Compensate align in variable width containers\n      }\n      return {\n        height: linesHeight(node),\n        width: Math.min(width, linesWidth(node))\n      };\n    }\n    return {};\n  };\n};\n\n/**\n * Get image ratio\n *\n * @param {Object} node image node\n * @returns {number} image ratio\n */\nvar getRatio = function getRatio(node) {\n  var _node$image;\n  return (_node$image = node.image) !== null && _node$image !== void 0 && _node$image.data ? node.image.width / node.image.height : 1;\n};\n\n/**\n * Checks if page has auto height\n *\n * @param {Object} page\n * @returns {boolean} is page height auto\n */\nvar isHeightAuto = function isHeightAuto(page) {\n  var _page$box;\n  return isNil((_page$box = page.box) === null || _page$box === void 0 ? void 0 : _page$box.height);\n};\nvar SAFETY_HEIGHT$1 = 10;\n\n/**\n * @typedef {Function} MeasureImage\n * @param {number} width\n * @param {number} widthMode\n * @param {number} height\n * @param {number} heightMode\n * @returns {{ width: number, height: number }} image width and height\n */\n\n/**\n * Yoga image measure function\n *\n * @param {Object} page page\n * @param {Object} node node\n * @returns {MeasureImage} measure image\n */\nvar measureImage = function measureImage(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var imageRatio = getRatio(node);\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT$1;\n\n    // Skip measure if image data not present yet\n    if (!node.image) return {\n      width: 0,\n      height: 0\n    };\n    if (widthMode === Yoga.MeasureMode.Exactly && heightMode === Yoga.MeasureMode.Undefined) {\n      var scaledHeight = width / imageRatio;\n      return {\n        height: Math.min(pageArea, scaledHeight)\n      };\n    }\n    if (heightMode === Yoga.MeasureMode.Exactly && (widthMode === Yoga.MeasureMode.AtMost || widthMode === Yoga.MeasureMode.Undefined)) {\n      return {\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n    if (widthMode === Yoga.MeasureMode.Exactly && heightMode === Yoga.MeasureMode.AtMost) {\n      var _scaledHeight = width / imageRatio;\n      return {\n        height: Math.min(height, pageArea, _scaledHeight)\n      };\n    }\n    if (widthMode === Yoga.MeasureMode.AtMost && heightMode === Yoga.MeasureMode.AtMost) {\n      if (imageRatio > 1) {\n        return {\n          width: width,\n          height: Math.min(width / imageRatio, height)\n        };\n      }\n      return {\n        height: height,\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n    return {\n      height: height,\n      width: width\n    };\n  };\n};\n\n/* eslint-disable no-param-reassign */\n\nvar SAFETY_HEIGHT = 10;\nvar getMax = function getMax(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n\n/**\n * Helper object to predict canvas size\n * TODO: Implement remaining functions (as close as possible);\n */\nvar measureCtx = function measureCtx() {\n  var ctx = {};\n  var points = [];\n  var nil = function nil() {\n    return ctx;\n  };\n  var addPoint = function addPoint(x, y) {\n    return points.push([x, y]);\n  };\n  var moveTo = function moveTo() {\n    addPoint.apply(void 0, arguments);\n    return ctx;\n  };\n  var rect = function rect(x, y, w, h) {\n    addPoint(x, y);\n    addPoint(x + w, y);\n    addPoint(x, y + h);\n    addPoint(x + w, y + h);\n    return ctx;\n  };\n  var ellipse = function ellipse(x, y, rx, ry) {\n    ry = ry || rx;\n    addPoint(x - rx, y - ry);\n    addPoint(x + rx, y - ry);\n    addPoint(x + rx, y + ry);\n    addPoint(x - rx, y + ry);\n    return ctx;\n  };\n  var polygon = function polygon() {\n    points.push.apply(points, arguments);\n    return ctx;\n  };\n\n  // Change dimensions\n  ctx.rect = rect;\n  ctx.moveTo = moveTo;\n  ctx.lineTo = moveTo;\n  ctx.circle = ellipse;\n  ctx.polygon = polygon;\n  ctx.ellipse = ellipse;\n  ctx.roundedRect = rect;\n\n  // To be implemented\n  ctx.text = nil;\n  ctx.path = nil;\n  ctx.lineWidth = nil;\n  ctx.bezierCurveTo = nil;\n  ctx.quadraticCurveTo = nil;\n  ctx.scale = nil;\n  ctx.rotate = nil;\n  ctx.translate = nil;\n\n  // These don't change dimensions\n  ctx.dash = nil;\n  ctx.clip = nil;\n  ctx.save = nil;\n  ctx.fill = nil;\n  ctx.font = nil;\n  ctx.stroke = nil;\n  ctx.lineCap = nil;\n  ctx.opacity = nil;\n  ctx.restore = nil;\n  ctx.lineJoin = nil;\n  ctx.fontSize = nil;\n  ctx.fillColor = nil;\n  ctx.miterLimit = nil;\n  ctx.strokeColor = nil;\n  ctx.fillOpacity = nil;\n  ctx.strokeOpacity = nil;\n  ctx.linearGradient = nil;\n  ctx.radialGradient = nil;\n  ctx.getWidth = function () {\n    return getMax(points.map(function (p) {\n      return p[0];\n    }));\n  };\n  ctx.getHeight = function () {\n    return getMax(points.map(function (p) {\n      return p[1];\n    }));\n  };\n  return ctx;\n};\n\n/**\n * @typedef {Function} MeasureCanvas\n * @returns {{ width: number, height: number }} canvas width and height\n */\n\n/**\n * Yoga canvas measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @returns {MeasureCanvas} measure canvas\n */\nvar measureCanvas = function measureCanvas(page, node) {\n  return function () {\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT;\n    var ctx = measureCtx();\n    node.props.paint(ctx);\n    var width = ctx.getWidth();\n    var height = Math.min(pageArea, ctx.getHeight());\n    return {\n      width: width,\n      height: height\n    };\n  };\n};\nvar isType$1 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isSvg = isType$1(P.Svg);\nvar isText$2 = isType$1(P.Text);\nvar isNote = isType$1(P.Note);\nvar isPage = isType$1(P.Page);\nvar isImage = isType$1(P.Image);\nvar isCanvas = isType$1(P.Canvas);\nvar isTextInstance$1 = isType$1(P.TextInstance);\nvar setNodeHeight = function setNodeHeight(node) {\n  var value = isPage(node) ? node.box.height : node.style.height;\n  return setHeight(value);\n};\n\n/**\n * Set styles valeus into yoga node before layout calculation\n *\n * @param {Object} node\n * @returns {Object} node\n */\nvar setYogaValues = function setYogaValues(node) {\n  compose(setNodeHeight(node), setWidth(node.style.width), setMinWidth(node.style.minWidth), setMaxWidth(node.style.maxWidth), setMinHeight(node.style.minHeight), setMaxHeight(node.style.maxHeight), setMarginTop(node.style.marginTop), setMarginRight(node.style.marginRight), setMarginBottom(node.style.marginBottom), setMarginLeft(node.style.marginLeft), setPaddingTop(node.style.paddingTop), setPaddingRight(node.style.paddingRight), setPaddingBottom(node.style.paddingBottom), setPaddingLeft(node.style.paddingLeft), setPositionType(node.style.position), setPositionTop(node.style.top), setPositionRight(node.style.right), setPositionBottom(node.style.bottom), setPositionLeft(node.style.left), setBorderTop(node.style.borderTopWidth), setBorderRight(node.style.borderRightWidth), setBorderBottom(node.style.borderBottomWidth), setBorderLeft(node.style.borderLeftWidth), setDisplay(node.style.display), setFlexDirection(node.style.flexDirection), setAlignSelf(node.style.alignSelf), setAlignContent(node.style.alignContent), setAlignItems(node.style.alignItems), setJustifyContent(node.style.justifyContent), setFlexWrap(node.style.flexWrap), setOverflow(node.style.overflow), setAspectRatio(node.style.aspectRatio), setFlexBasis(node.style.flexBasis), setFlexGrow(node.style.flexGrow), setFlexShrink(node.style.flexShrink), setRowGap(node.style.rowGap), setColumnGap(node.style.columnGap))(node);\n};\n\n/**\n * @typedef {Function} InsertYogaNodes\n * @param {Object} child child node\n * @returns {Object} node\n */\n\n/**\n * Inserts child into parent' yoga node\n *\n * @param {Object} parent parent\n * @returns {InsertYogaNodes} insert yoga nodes\n */\nvar insertYogaNodes = function insertYogaNodes(parent) {\n  return function (child) {\n    parent.insertChild(child.yogaNode, parent.getChildCount());\n    return child;\n  };\n};\nvar setMeasureFunc = function setMeasureFunc(node, page, fontStore) {\n  var yogaNode = node.yogaNode;\n  if (isText$2(node)) {\n    yogaNode.setMeasureFunc(measureText(page, node, fontStore));\n  }\n  if (isImage(node)) {\n    yogaNode.setMeasureFunc(measureImage(page, node));\n  }\n  if (isCanvas(node)) {\n    yogaNode.setMeasureFunc(measureCanvas(page, node));\n  }\n  if (isSvg(node)) {\n    yogaNode.setMeasureFunc(measureCanvas$1(page, node));\n  }\n  return node;\n};\nvar isLayoutElement = function isLayoutElement(node) {\n  return !isText$2(node) && !isNote(node) && !isSvg(node);\n};\n\n/**\n * @typedef {Function} CreateYogaNodes\n * @param {Object} node\n * @returns {Object} node with appended yoga node\n */\n\n/**\n * Creates and add yoga node to document tree\n * Handles measure function for text and image nodes\n *\n * @returns {CreateYogaNodes} create yoga nodes\n */\nvar createYogaNodes = function createYogaNodes(page, fontStore, yoga) {\n  return function (node) {\n    var yogaNode = yoga.node.create();\n    var result = Object.assign({}, node, {\n      yogaNode: yogaNode\n    });\n    setYogaValues(result);\n    if (isLayoutElement(node) && node.children) {\n      var resolveChild = compose(insertYogaNodes(yogaNode), createYogaNodes(page, fontStore, yoga));\n      result.children = node.children.map(resolveChild);\n    }\n    setMeasureFunc(result, page, fontStore);\n    return result;\n  };\n};\n\n/**\n * Performs yoga calculation\n *\n * @param {Object} page page node\n * @returns {Object} page node\n */\nvar calculateLayout = function calculateLayout(page) {\n  page.yogaNode.calculateLayout();\n  return page;\n};\n\n/**\n * Saves Yoga layout result into 'box' attribute of node\n *\n * @param {Object} node\n * @returns {Object} node with box data\n */\nvar persistDimensions = function persistDimensions(node) {\n  if (isTextInstance$1(node)) return node;\n  var box = Object.assign(getPadding(node), getMargin(node), getBorderWidth(node), getPosition(node), getDimension(node));\n  var newNode = Object.assign({}, node, {\n    box: box\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(persistDimensions);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Removes yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\nvar destroyYogaNodes = function destroyYogaNodes(node) {\n  var newNode = Object.assign({}, node);\n  delete newNode.yogaNode;\n  if (!node.children) return newNode;\n  var children = node.children.map(destroyYogaNodes);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Free yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\nvar freeYogaNodes = function freeYogaNodes(node) {\n  if (node.yogaNode) node.yogaNode.freeRecursive();\n  return node;\n};\n\n/**\n * Calculates page object layout using Yoga.\n * Takes node values from 'box' and 'style' attributes, and persist them back into 'box'\n * Destroy yoga values at the end.\n *\n * @param {Object} page object\n * @returns {Object} page object with correct 'box' layout attributes\n */\nvar resolvePageDimensions = function resolvePageDimensions(page, fontStore, yoga) {\n  if (isNil(page)) return null;\n  return compose(destroyYogaNodes, freeYogaNodes, persistDimensions, calculateLayout, createYogaNodes(page, fontStore, yoga))(page);\n};\n\n/**\n * Calculates root object layout using Yoga.\n *\n * @param {Object} node root object\n * @param {Object} fontStore font store\n * @returns {Object} root object with correct 'box' layout attributes\n */\nvar resolveDimensions = function resolveDimensions(node, fontStore) {\n  if (!node.children) return node;\n  var resolveChild = function resolveChild(child) {\n    return resolvePageDimensions(child, fontStore, node.yoga);\n  };\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar isText$1 = function isText(node) {\n  return node.type === P.Text;\n};\n\n// Prevent splitting elements by low decimal numbers\nvar SAFETY_THRESHOLD = 0.001;\nvar assingChildren = function assingChildren(children, node) {\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar getTop = function getTop(node) {\n  var _node$box;\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\nvar allFixed = function allFixed(nodes) {\n  return nodes.every(isFixed);\n};\nvar isDynamic = function isDynamic(node) {\n  var _node$props;\n  return !isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.render);\n};\nvar relayoutPage = compose(resolveTextLayout, resolvePageDimensions, resolveInheritance, resolvePageStyles);\nvar warnUnavailableSpace = function warnUnavailableSpace(node) {\n  console.warn(\"Node of type \" + node.type + \" can't wrap between pages and it's bigger than available page height\");\n};\nvar splitNodes = function splitNodes(height, contentArea, nodes) {\n  var currentChildren = [];\n  var nextChildren = [];\n  for (var i = 0; i < nodes.length; i += 1) {\n    var child = nodes[i];\n    var futureNodes = nodes.slice(i + 1);\n    var futureFixedNodes = futureNodes.filter(isFixed);\n    var nodeTop = getTop(child);\n    var nodeHeight = child.box.height;\n    var isOutside = height <= nodeTop;\n    var shouldBreak$1 = shouldBreak(child, futureNodes, height);\n    var shouldSplit = height + SAFETY_THRESHOLD < nodeTop + nodeHeight;\n    var canWrap = getWrap(child);\n    var fitsInsidePage = nodeHeight <= contentArea;\n    if (isFixed(child)) {\n      nextChildren.push(child);\n      currentChildren.push(child);\n      continue;\n    }\n    if (isOutside) {\n      var box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n      var next = Object.assign({}, child, {\n        box: box\n      });\n      nextChildren.push(next);\n      continue;\n    }\n    if (!fitsInsidePage && !canWrap) {\n      currentChildren.push(child);\n      nextChildren.push.apply(nextChildren, futureNodes);\n      warnUnavailableSpace(child);\n      break;\n    }\n    if (shouldBreak$1) {\n      var _box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n      var props = Object.assign({}, child.props, {\n        wrap: true,\n        break: false\n      });\n      var _next = Object.assign({}, child, {\n        box: _box,\n        props: props\n      });\n      currentChildren.push.apply(currentChildren, futureFixedNodes);\n      nextChildren.push.apply(nextChildren, [_next].concat(futureNodes));\n      break;\n    }\n    if (shouldSplit) {\n      var _split = split(child, height, contentArea),\n        currentChild = _split[0],\n        nextChild = _split[1];\n\n      // All children are moved to the next page, it doesn't make sense to show the parent on the current page\n      if (child.children.length > 0 && currentChild.children.length === 0) {\n        var _box2 = Object.assign({}, child.box, {\n          top: child.box.top - height\n        });\n        var _next2 = Object.assign({}, child, {\n          box: _box2\n        });\n        currentChildren.push.apply(currentChildren, futureFixedNodes);\n        nextChildren.push.apply(nextChildren, [_next2].concat(futureNodes));\n        break;\n      }\n      if (currentChild) currentChildren.push(currentChild);\n      if (nextChild) nextChildren.push(nextChild);\n      continue;\n    }\n    currentChildren.push(child);\n  }\n  return [currentChildren, nextChildren];\n};\nvar splitChildren = function splitChildren(height, contentArea, node) {\n  var children = node.children || [];\n  var availableHeight = height - getTop(node);\n  return splitNodes(availableHeight, contentArea, children);\n};\nvar splitView = function splitView(node, height, contentArea) {\n  var _splitNode = splitNode(node, height),\n    currentNode = _splitNode[0],\n    nextNode = _splitNode[1];\n  var _splitChildren = splitChildren(height, contentArea, node),\n    currentChilds = _splitChildren[0],\n    nextChildren = _splitChildren[1];\n  return [assingChildren(currentChilds, currentNode), assingChildren(nextChildren, nextNode)];\n};\nvar split = function split(node, height, contentArea) {\n  return isText$1(node) ? splitText(node, height) : splitView(node, height, contentArea);\n};\nvar shouldResolveDynamicNodes = function shouldResolveDynamicNodes(node) {\n  var children = node.children || [];\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\n};\nvar resolveDynamicNodes = function resolveDynamicNodes(props, node) {\n  var isNodeDynamic = isDynamic(node);\n\n  // Call render prop on dynamic nodes and append result to children\n  var resolveChildren = function resolveChildren(children) {\n    if (children === void 0) {\n      children = [];\n    }\n    if (isNodeDynamic) {\n      var res = node.props.render(props);\n      return createInstances(res).filter(Boolean).map(function (n) {\n        return resolveDynamicNodes(props, n);\n      });\n    }\n    return children.map(function (c) {\n      return resolveDynamicNodes(props, c);\n    });\n  };\n\n  // We reset dynamic text box so it can be computed again later on\n  var resetHeight = isNodeDynamic && isText$1(node);\n  var box = resetHeight ? _extends({}, node.box, {\n    height: 0\n  }) : node.box;\n  var children = resolveChildren(node.children);\n  var lines = isNodeDynamic ? null : node.lines;\n  return Object.assign({}, node, {\n    box: box,\n    lines: lines,\n    children: children\n  });\n};\nvar resolveDynamicPage = function resolveDynamicPage(props, page, fontStore, yoga) {\n  if (shouldResolveDynamicNodes(page)) {\n    var resolvedPage = resolveDynamicNodes(props, page);\n    return relayoutPage(resolvedPage, fontStore, yoga);\n  }\n  return page;\n};\nvar splitPage = function splitPage(page, pageNumber, fontStore, yoga) {\n  var wrapArea = getWrapArea(page);\n  var contentArea = getContentArea(page);\n  var dynamicPage = resolveDynamicPage({\n    pageNumber: pageNumber\n  }, page, fontStore, yoga);\n  var height = page.style.height;\n  var _splitNodes = splitNodes(wrapArea, contentArea, dynamicPage.children),\n    currentChilds = _splitNodes[0],\n    nextChilds = _splitNodes[1];\n  var relayout = function relayout(node) {\n    return relayoutPage(node, fontStore, yoga);\n  };\n  var currentBox = _extends({}, page.box, {\n    height: height\n  });\n  var currentPage = relayout(Object.assign({}, page, {\n    box: currentBox,\n    children: currentChilds\n  }));\n  if (nextChilds.length === 0 || allFixed(nextChilds)) return [currentPage, null];\n  var nextBox = omit('height', page.box);\n  var nextProps = omit('bookmark', page.props);\n  var nextPage = relayout(Object.assign({}, page, {\n    props: nextProps,\n    box: nextBox,\n    children: nextChilds\n  }));\n  return [currentPage, nextPage];\n};\nvar resolvePageIndices = function resolvePageIndices(fontStore, yoga, page, pageNumber, pages) {\n  var totalPages = pages.length;\n  var props = {\n    totalPages: totalPages,\n    pageNumber: pageNumber + 1,\n    subPageNumber: page.subPageNumber + 1,\n    subPageTotalPages: page.subPageTotalPages\n  };\n  return resolveDynamicPage(props, page, fontStore, yoga);\n};\nvar assocSubPageData = function assocSubPageData(subpages) {\n  return subpages.map(function (page, i) {\n    return _extends({}, page, {\n      subPageNumber: i,\n      subPageTotalPages: subpages.length\n    });\n  });\n};\nvar dissocSubPageData = function dissocSubPageData(page) {\n  return omit(['subPageNumber', 'subPageTotalPages'], page);\n};\nvar paginate = function paginate(page, pageNumber, fontStore, yoga) {\n  var _page$props;\n  if (!page) return [];\n  if (((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.wrap) === false) return [page];\n  var splittedPage = splitPage(page, pageNumber, fontStore, yoga);\n  var pages = [splittedPage[0]];\n  var nextPage = splittedPage[1];\n  while (nextPage !== null) {\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore, yoga);\n    pages.push(splittedPage[0]);\n    nextPage = splittedPage[1];\n  }\n  return pages;\n};\n\n/**\n * Performs pagination. This is the step responsible of breaking the whole document\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\n *\n * @param {Object} doc node\n * @param {Object} fontStore font store\n * @returns {Object} layout node\n */\nvar resolvePagination = function resolvePagination(doc, fontStore) {\n  var pages = [];\n  var pageNumber = 1;\n  for (var i = 0; i < doc.children.length; i += 1) {\n    var page = doc.children[i];\n    var subpages = paginate(page, pageNumber, fontStore, doc.yoga);\n    subpages = assocSubPageData(subpages);\n    pageNumber += subpages.length;\n    pages = pages.concat(subpages);\n  }\n  pages = pages.map(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return dissocSubPageData(resolvePageIndices.apply(void 0, [fontStore, doc.yoga].concat(args)));\n  });\n  return assingChildren(pages, doc);\n};\n\n/**\n * @typedef {Function} ResolvePageHorizontalPadding\n * @param {string} value padding value\n * @returns {Object} translated padding value\n */\n\n/**\n * Translates page percentage horizontal paddings in fixed ones\n *\n * @param {Object} container page container\n * @returns {ResolvePageHorizontalPadding} resolve page horizontal padding\n */\nvar resolvePageHorizontalPadding = function resolvePageHorizontalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.width : value;\n  };\n};\n\n/**\n * @typedef {Function} ResolvePageVerticalPadding\n * @param {string} padding value\n * @returns {Object} translated padding value\n */\n\n/**\n * Translates page percentage vertical paddings in fixed ones\n *\n * @param {Object} container page container\n * @returns {ResolvePageVerticalPadding} resolve page vertical padding\n */\nvar resolvePageVerticalPadding = function resolvePageVerticalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.height : value;\n  };\n};\n\n/**\n * Translates page percentage paddings in fixed ones\n *\n * @param {Object} page\n * @returns {Object} page with fixed paddings\n */\nvar resolvePagePaddings = function resolvePagePaddings(page) {\n  var container = page.style;\n  var style = evolve({\n    paddingTop: resolvePageVerticalPadding(container),\n    paddingLeft: resolvePageHorizontalPadding(container),\n    paddingRight: resolvePageHorizontalPadding(container),\n    paddingBottom: resolvePageVerticalPadding(container)\n  }, page.style);\n  return Object.assign({}, page, {\n    style: style\n  });\n};\n\n/**\n * Translates all pages percentage paddings in fixed ones\n * This has to be computed from pages calculated size and not by Yoga\n * because at this point we didn't performed pagination yet.\n *\n * @param {Object} root document root\n * @returns {Object} document root with translated page paddings\n */\nvar resolvePagesPaddings = function resolvePagesPaddings(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePaddings);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\n/**\n * @typedef {Function} ResolveRadius\n * @param {string | number} value border radius value\n * @returns {number} resolved radius value\n */\n\n/**\n *\n * @param {{ width: number, height: number }} container width and height\n * @returns {ResolveRadius} resolve radius function\n */\nvar resolveRadius = function resolveRadius(container) {\n  return function (value) {\n    if (!value) return undefined;\n    var match = matchPercent(value);\n    return match ? match.percent * Math.min(container.width, container.height) : value;\n  };\n};\n\n/**\n * Transforms percent border radius into fixed values\n *\n * @param {Object} node\n * @returns {Object} node\n */\nvar resolvePercentRadius = function resolvePercentRadius(node) {\n  var style = evolve({\n    borderTopLeftRadius: resolveRadius(node.box),\n    borderTopRightRadius: resolveRadius(node.box),\n    borderBottomRightRadius: resolveRadius(node.box),\n    borderBottomLeftRadius: resolveRadius(node.box)\n  }, node.style || {});\n  var newNode = Object.assign({}, node, {\n    style: style\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolvePercentRadius);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Transform percent height into fixed\n *\n * @param {number} height\n * @returns {number} height\n */\nvar transformHeight = function transformHeight(pageArea, height) {\n  var match = matchPercent(height);\n  return match ? match.percent * pageArea : height;\n};\n\n/**\n * Get page area (height minus paddings)\n *\n * @param {Object} page\n * @returns {number} page area\n */\nvar getPageArea = function getPageArea(page) {\n  var _page$style, _page$style2;\n  var pageHeight = page.style.height;\n  var pagePaddingTop = ((_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.paddingTop) || 0;\n  var pagePaddingBottom = ((_page$style2 = page.style) === null || _page$style2 === void 0 ? void 0 : _page$style2.paddingBottom) || 0;\n  return pageHeight - pagePaddingTop - pagePaddingBottom;\n};\n\n/**\n * Transform node percent height to fixed\n *\n * @param {Object} page\n * @param {Object} node\n * @returns {Object} transformed node\n */\nvar resolveNodePercentHeight = function resolveNodePercentHeight(page, node) {\n  var _page$style3, _node$style;\n  if (isNil((_page$style3 = page.style) === null || _page$style3 === void 0 ? void 0 : _page$style3.height)) return node;\n  if (isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height)) return node;\n  var pageArea = getPageArea(page);\n  var height = transformHeight(pageArea, node.style.height);\n  var style = Object.assign({}, node.style, {\n    height: height\n  });\n  return Object.assign({}, node, {\n    style: style\n  });\n};\n\n/**\n * Transform page immediate children with percent height to fixed\n *\n * @param {Object} page\n * @returns {Object} transformed page\n */\nvar resolvePagePercentHeight = function resolvePagePercentHeight(page) {\n  if (!page.children) return page;\n  var resolveChild = function resolveChild(child) {\n    return resolveNodePercentHeight(page, child);\n  };\n  var children = page.children.map(resolveChild);\n  return Object.assign({}, page, {\n    children: children\n  });\n};\n\n/**\n * Transform all page immediate children with percent height to fixed.\n * This is needed for computing correct dimensions on pre-pagination layout.\n *\n * @param {Object} root document root\n * @returns {Object} transformed document root\n */\nvar resolvePercentHeight = function resolvePercentHeight(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePercentHeight);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\nvar isType = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isLink = isType(P.Link);\nvar isText = isType(P.Text);\nvar isTextInstance = isType(P.TextInstance);\n\n/**\n * Checks if node has render prop\n *\n * @param {Object} node\n * @returns {boolean} has render prop?\n */\nvar hasRenderProp = function hasRenderProp(node) {\n  var _node$props;\n  return !!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.render);\n};\n\n/**\n * Checks if node is text type (Text or TextInstance)\n *\n * @param {Object} node\n * @returns {boolean} are all children text instances?\n */\nvar isTextType = function isTextType(node) {\n  return isText(node) || isTextInstance(node);\n};\n\n/**\n * Checks if is tet link that needs to be wrapped in Text\n *\n * @param {Object} node\n * @returns {boolean} are all children text instances?\n */\nvar isTextLink = function isTextLink(node) {\n  var children = node.children || [];\n\n  // Text string inside a Link\n  if (children.every(isTextInstance)) return true;\n\n  // Text node inside a Link\n  if (children.every(isText)) return false;\n  return children.every(isTextType);\n};\n\n/**\n * Wraps node children inside Text node\n *\n * @param {Object} node\n * @returns {boolean} node with intermediate Text child\n */\nvar wrapText = function wrapText(node) {\n  var textElement = {\n    type: P.Text,\n    props: {},\n    style: {},\n    box: {},\n    children: node.children\n  };\n  return Object.assign({}, node, {\n    children: [textElement]\n  });\n};\nvar transformLink = function transformLink(node) {\n  if (!isLink(node)) return node;\n\n  // If has render prop substitute the instance by a Text, that will\n  // ultimately render the inline Link via the textkit PDF renderer.\n  if (hasRenderProp(node)) return Object.assign({}, node, {\n    type: P.Text\n  });\n\n  // If is a text link (either contains Text or TextInstalce), wrap it\n  // inside a Text element so styles are applied correctly\n\n  if (isTextLink(node)) return wrapText(node);\n  return node;\n};\n\n/**\n * Transforms Link layout to correctly render text and dynamic rendered links\n *\n * @param {Object} node\n * @returns {Object} node with link substitution\n */\nvar resolveLinkSubstitution = function resolveLinkSubstitution(node) {\n  if (!node.children) return node;\n  var resolveChild = compose(transformLink, resolveLinkSubstitution);\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar layout = asyncCompose(resolveZIndex, resolveOrigin, resolveAssets, resolvePagination, resolveTextLayout, resolvePercentRadius, resolveDimensions, resolveSvg, resolveAssets, resolveInheritance, resolvePercentHeight, resolvePagesPaddings, resolveStyles, resolveLinkSubstitution, resolveBookmarks, resolvePageSizes, resolveYoga);\nexport { layout as default };","map":{"version":3,"names":["upperFirst","capitalize","last","pick","compose","evolve","mapValues","matchPercent","isNil","get","castArray","omit","asyncCompose","P","TextInstance","stylesheet","transformColor","processTransform","flatten","layoutEngine","bidi","linebreaker","justification","textDecoration","scriptItemizer","wordHyphenation","_createClass","PDFFont","_regeneratorRuntime","_asyncToGenerator","Yoga","_extends","emojiRegex","resolveImage","_objectWithoutPropertiesLoose","fromFragments","fragments","offset","string","runs","forEach","fragment","push","start","end","length","attributes","transformText","text","transformation","toUpperCase","toLowerCase","StandardFont","src","name","open","_proto","prototype","encode","str","layout","_this","_this$encode","encoded","positions","stringIndices","map","_","i","glyphs","g","glyph","getGlyph","parseInt","advanceWidth","glyphForCodePoint","codePoint","id","_font","codePoints","isLigature","font","characterToGlyph","hasGlyphForCodePoint","key","fontCache","IGNORED_CODE_POINTS","getFontSize","node","fontSize","getOrCreateFont","getFallbackFont","pickFontFromFontStack","fontStack","lastFont","fontStackWithFallback","concat","unshift","includes","fontSubstitution","_ref","lastFontSize","lastIndex","index","res","run","defaultFont","chars","slice","j","char","codePointAt","unitsPerEm","scale","_fontSize","isTextInstance$4","isTextInstance","type","engines$1","engine$1","getFragments$1","getFragments","fontStore","instance","_instance$props","props","_instance$props$fill","fill","_instance$props$fontF","fontFamily","fontWeight","fontStyle","_instance$props$fontS","textDecorationColor","textDecorationStyle","textTransform","opacity","_textDecoration","obj","getFont","data","color","underlineStyle","underline","underlineColor","strike","strikeStyle","strikeColor","children","child","value","apply","getAttributedString$1","getAttributedString","AlmostInfinity","shrinkWhitespaceFactor","before","after","layoutTspan","_node$props","_node$props2","attributedString","x","y","container","width","height","hyphenationCallback","getHyphenationCallback","layoutOptions","lines","flat","Object","assign","layoutText$1","layoutText","isDefs","Defs","getDefs","defs","find","values","reduce","acc","_value$props","isNotDefs","detachDefs","filter","URL_REGEX","replaceDef","undefined","test","match","parseNodeDefs","clipPath","parseDefs","root","replaceDefs","parseViewbox","split","parseFloat","minX","minY","maxX","maxY","getContainer$1","getContainer","viewbox","viewBox","SVG_INHERITED_PROPS","getInheritProps","inheritProps","inheritedProps","newChild","parseAspectRatio","replace","align","meetOrSlice","STYLE_PROPS","VERTICAL_PROPS","HORIZONTAL_PROPS","isType$3","isType","isSvg$3","Svg","isText$5","Text","isTextInstance$3","transformPercent","percent","parsePercent","parseProps","x1","x2","y1","y2","r","rx","ry","cx","cy","stroke","stopOpacity","stopColor","transform","mergeStyles$1","mergeStyles","style","removeNoneValues","removeNone","pickStyleProps","styleProps","parseSvgProps","preserveAspectRatio","wrapBetweenTspan","Tspan","addMissingTspan","resolveChild","parseText","resolveSvgNode","resolveChildren","resolveSvgRoot","resolveSvg","loadYoga","mark","_callee","config","wrap","_callee$","_context","prev","next","sent","Config","create","setPointScaleFactor","Node","createWithConfig","abrupt","stop","arguments","resolveYoga","yoga","_x","getZIndex","zIndex","shouldSort","Document","sortZIndex","a","b","za","zb","resolveZIndex","sortedChildren","sort","emojis","regex","reflect","promise","then","v","e","makeFetchEmojiImage","_removeVariationSelectors","getCodePoints","withVariationSelectors","Array","from","toString","join","buildEmojiUrl","emoji","source","url","format","builder","fetchEmojis","promises","matchAll","loading","emojiUrl","fetchEmojiImage","uri","image","specialCases","embedEmojis","result","_loop","isSpecialCase","emojiSize","chunk","String","fromCharCode","attachment","yOffset","Math","floor","getSource","_node$props3","href","resolveSource","t0","fetchImage","cache","console","warn","Error","message","isImage$2","isImage","Image","fetchAssets","_node$children","listToExplore","emojiSource","getEmojiSource","_n$style","n","shift","load","childNode","resolveAssets","Promise","all","_x2","isLink$1","isLink","Link","DEFAULT_LINK_STYLES","computeStyle","baseStyle","isArray","resolveNodeStyles","resolvePageStyles","page","_page$props","_page$box","_page$box2","_page$props2","dpi","box","orientation","resolveStyles","getTransformStyle","s","_node$style","_node$style2","getOrigin","_node$box","left","top","transformOriginX","transformOriginY","percentX","percentY","offsetX","offsetY","resolveNodeOrigin","origin","newNode","resolveOrigin","getBookmarkValue","title","fit","expanded","resolveBookmarks","refs","parent","_child$props","element","bookmark","_parent","ref","newHierarchy","VALID_ORIENTATIONS","getOrientation","isLandscape","PAGE_SIZES","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","RA0","RA1","RA2","RA3","RA4","SRA0","SRA1","SRA2","SRA3","SRA4","EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID","ID1","toSizeObject","flipSizeObject","adjustDpi","getStringSize","getNumberSize","getSize","size","resolvePageSize","resolvePageSizes","isFixed","fixed","lineIndexAtHeight","line","heightAtLineIndex","counter","getLineBreak","widows","orphans","linesQuantity","slicedLine","splitText","slicedLineIndex","currentHeight","nextHeight","current","borderBottomWidth","marginBottom","paddingBottom","borderBottomLeftRadius","borderBottomRightRadius","borderTopWidth","marginTop","paddingTop","borderTopLeftRadius","borderTopRightRadius","getTop$1","getTop","hasFixedHeight","splitNode","nodeTop","NON_WRAP_TYPES","Note","Canvas","getWrap","getComputedPadding","edge","yogaNode","getPadding","Edge","Top","paddingVertical","padding","paddingRight","Right","paddingHorizontal","Bottom","paddingLeft","Left","getWrapArea","_page$style","_getPadding","getContentArea","_excluded","isString","isNumber","isFragment","Symbol","for","createInstances","el","_element$props","_element$props$style","_element$props$childr","nextChildren","getBreak","break","getMinPresenceAhead","minPresenceAhead","getFurthestEnd","elements","max","getEndOfMinPresenceAhead","getEndOfPresence","futureElements","afterMinPresenceAhead","endOfFurthestFutureElement","min","shouldBreak","shouldSplit","canWrap","endOfPresence","breakingImprovesPresence","IGNORABLE_CODEPOINTS","buildSubsetForFont","ignoreChars","charSubset","subsetRegex","RegExp","PREPROCESSORS","isImage$1","isTextInstance$2","parentLink","level","_instance$props2","_instance$style","_instance$style$color","_instance$style$direc","direction","_instance$style$fontF","_instance$style$fontS","textAlign","lineHeight","letterSpacing","textIndent","verticalAlign","fontFamilies","fontFamilyName","opts","backgroundColor","indent","characterSpacing","link","_fragments","_i","preprocessor","engines","engine","getMaxLines","maxLines","getTextOverflow","textOverflow","Infinity","truncateMode","getLayoutOptions","hyphenationPenalty","options","isType$2","isSvg$2","isText$4","shouldIterate","shouldLayoutText","resolveTextLayout","mapChild","BASE_INHERITABLE_PROPERTIES","TEXT_INHERITABLE_PROPERTIES","isSvg$1","isSvg","isText$3","isText","mergeValues","styleName","inheritedValue","merge","inheritedStyles","mergedStyles","entries","resolveInheritance","inheritableProperties","inheritStyles","getComputedMargin","getMargin","marginVertical","margin","marginRight","marginHorizontal","marginLeft","getPosition","getComputedTop","right","getComputedRight","bottom","getComputedBottom","getComputedLeft","DEFAULT_DIMENSION","getDimension","getComputedWidth","getComputedHeight","getComputedBorder","getBorderWidth","borderRightWidth","borderLeftWidth","setDisplay","Display","None","Flex","OVERFLOW","hidden","Overflow","Hidden","scroll","Scroll","setOverflow","overflow","Visible","FLEX_WRAP","Wrap","WrapReverse","setFlexWrap","flexWrap","NoWrap","setYogaValue","attr","hasEdge","fixedMethod","autoMethod","percentMethod","_yogaNode$percentMeth","call","_yogaNode$percentMeth2","_yogaNode$autoMethod","_yogaNode$autoMethod2","_yogaNode$fixedMethod","_yogaNode$fixedMethod2","setFlexGrow","setFlexBasis","ALIGN","Align","FlexStart","center","Center","FlexEnd","stretch","Stretch","baseline","Baseline","SpaceBetween","SpaceAround","setAlign","defaultValue","Auto","setAlignSelf","setAlignItems","setFlexShrink","setAspectRatio","setAlignContent","setPositionType","PositionType","Absolute","Relative","FLEX_DIRECTIONS","row","FlexDirection","Row","RowReverse","ColumnReverse","setFlexDirection","flexDirection","Column","JUSTIFY_CONTENT","Justify","SpaceEvenly","setJustifyContent","justifyContent","setMarginTop","setMarginRight","setMarginBottom","setMarginLeft","setPaddingTop","setPaddingRight","setPaddingBottom","setPaddingLeft","setBorderTop","setBorderRight","setBorderBottom","setBorderLeft","setPositionTop","setPositionRight","setPositionBottom","setPositionLeft","setWidth","setMinWidth","setMaxWidth","setHeight","setMinHeight","setMaxHeight","checkPercents","setRowGap","setGap","Gutter","setColumnGap","getAspectRatio","measureCanvas$1","measureCanvas","widthMode","heightMode","aspectRatio","MeasureMode","Exactly","AtMost","linesWidth","xAdvance","linesHeight","ALIGNMENT_FACTORS","measureText","alignFactor","alignOffset","getRatio","_node$image","isHeightAuto","SAFETY_HEIGHT$1","measureImage","imageRatio","imageMargin","pagePadding","pageArea","Undefined","scaledHeight","_scaledHeight","SAFETY_HEIGHT","getMax","measureCtx","ctx","points","nil","addPoint","moveTo","rect","w","h","ellipse","polygon","lineTo","circle","roundedRect","path","lineWidth","bezierCurveTo","quadraticCurveTo","rotate","translate","dash","clip","save","lineCap","restore","lineJoin","fillColor","miterLimit","strokeColor","fillOpacity","strokeOpacity","linearGradient","radialGradient","getWidth","p","getHeight","paint","isType$1","isText$2","isNote","isPage","Page","isCanvas","isTextInstance$1","setNodeHeight","setYogaValues","minWidth","maxWidth","minHeight","maxHeight","position","display","alignSelf","alignContent","alignItems","flexBasis","flexGrow","flexShrink","rowGap","columnGap","insertYogaNodes","insertChild","getChildCount","setMeasureFunc","isLayoutElement","createYogaNodes","calculateLayout","persistDimensions","destroyYogaNodes","freeYogaNodes","freeRecursive","resolvePageDimensions","resolveDimensions","isText$1","SAFETY_THRESHOLD","assingChildren","allFixed","nodes","every","isDynamic","render","relayoutPage","warnUnavailableSpace","splitNodes","contentArea","currentChildren","futureNodes","futureFixedNodes","nodeHeight","isOutside","shouldBreak$1","fitsInsidePage","_box","_next","_split","currentChild","nextChild","_box2","_next2","splitChildren","availableHeight","splitView","_splitNode","currentNode","nextNode","_splitChildren","currentChilds","shouldResolveDynamicNodes","some","resolveDynamicNodes","isNodeDynamic","Boolean","c","resetHeight","resolveDynamicPage","resolvedPage","splitPage","pageNumber","wrapArea","dynamicPage","_splitNodes","nextChilds","relayout","currentBox","currentPage","nextBox","nextProps","nextPage","resolvePageIndices","pages","totalPages","subPageNumber","subPageTotalPages","assocSubPageData","subpages","dissocSubPageData","paginate","splittedPage","resolvePagination","doc","_len","args","_key","resolvePageHorizontalPadding","resolvePageVerticalPadding","resolvePagePaddings","resolvePagesPaddings","resolveRadius","resolvePercentRadius","transformHeight","getPageArea","_page$style2","pageHeight","pagePaddingTop","pagePaddingBottom","resolveNodePercentHeight","_page$style3","resolvePagePercentHeight","resolvePercentHeight","hasRenderProp","isTextType","isTextLink","wrapText","textElement","transformLink","resolveLinkSubstitution","default"],"sources":["C:/Users/79131/OneDrive/Рабочий стол/react project/client/node_modules/@react-pdf/layout/lib/index.js"],"sourcesContent":["import { upperFirst, capitalize, last, pick, compose, evolve, mapValues, matchPercent, isNil, get, castArray, omit, asyncCompose } from '@react-pdf/fns';\nimport * as P from '@react-pdf/primitives';\nimport { TextInstance } from '@react-pdf/primitives';\nimport stylesheet, { transformColor, processTransform, flatten } from '@react-pdf/stylesheet';\nimport layoutEngine, { bidi, linebreaker, justification, textDecoration, scriptItemizer, wordHyphenation } from '@react-pdf/textkit';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport { PDFFont } from '@react-pdf/pdfkit';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport * as Yoga from 'yoga-layout';\nimport _extends from '@babel/runtime/helpers/extends';\nimport emojiRegex from 'emoji-regex';\nimport resolveImage from '@react-pdf/image';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\n\n/**\n * Create attributed string from text fragments\n *\n * @param {Object[]} fragments fragments\n * @returns {Object} attributed string\n */\nvar fromFragments = function fromFragments(fragments) {\n  var offset = 0;\n  var string = '';\n  var runs = [];\n  fragments.forEach(function (fragment) {\n    string += fragment.string;\n    runs.push({\n      start: offset,\n      end: offset + fragment.string.length,\n      attributes: fragment.attributes || {}\n    });\n    offset += fragment.string.length;\n  });\n  return {\n    string: string,\n    runs: runs\n  };\n};\n\n/**\n * Apply transformation to text string\n *\n * @param {string} text\n * @param {string} transformation type\n * @returns {string} transformed text\n */\nvar transformText = function transformText(text, transformation) {\n  switch (transformation) {\n    case 'uppercase':\n      return text.toUpperCase();\n    case 'lowercase':\n      return text.toLowerCase();\n    case 'capitalize':\n      return capitalize(text);\n    case 'upperfirst':\n      return upperFirst(text);\n    default:\n      return text;\n  }\n};\n\nvar StandardFont = /*#__PURE__*/function () {\n  function StandardFont(src) {\n    this.name = src;\n    this.src = PDFFont.open(null, src);\n  }\n  var _proto = StandardFont.prototype;\n  _proto.encode = function encode(str) {\n    return this.src.encode(str);\n  };\n  _proto.layout = function layout(str) {\n    var _this = this;\n    var _this$encode = this.encode(str),\n      encoded = _this$encode[0],\n      positions = _this$encode[1];\n    return {\n      positions: positions,\n      stringIndices: positions.map(function (_, i) {\n        return i;\n      }),\n      glyphs: encoded.map(function (g, i) {\n        var glyph = _this.getGlyph(parseInt(g, 16));\n        glyph.advanceWidth = positions[i].advanceWidth;\n        return glyph;\n      })\n    };\n  };\n  _proto.glyphForCodePoint = function glyphForCodePoint(codePoint) {\n    var glyph = this.getGlyph(codePoint);\n    glyph.advanceWidth = 400;\n    return glyph;\n  };\n  _proto.getGlyph = function getGlyph(id) {\n    return {\n      id: id,\n      _font: this.src,\n      codePoints: [id],\n      isLigature: false,\n      name: this.src.font.characterToGlyph(id)\n    };\n  };\n  _proto.hasGlyphForCodePoint = function hasGlyphForCodePoint(codePoint) {\n    return this.src.font.characterToGlyph(codePoint) !== '.notdef';\n  }\n\n  // Based on empirical observation\n  ;\n  _createClass(StandardFont, [{\n    key: \"ascent\",\n    get: function get() {\n      return 900;\n    }\n\n    // Based on empirical observation\n  }, {\n    key: \"capHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 650;\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 550;\n        default:\n          return 690;\n      }\n    }\n\n    // Based on empirical observation\n  }, {\n    key: \"xHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 440;\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 390;\n        default:\n          return 490;\n      }\n    }\n\n    // Based on empirical observation\n  }, {\n    key: \"descent\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return -220;\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return -230;\n        default:\n          return -200;\n      }\n    }\n  }, {\n    key: \"lineGap\",\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: \"unitsPerEm\",\n    get: function get() {\n      return 1000;\n    }\n  }]);\n  return StandardFont;\n}();\n\nvar fontCache = {};\nvar IGNORED_CODE_POINTS = [173];\nvar getFontSize = function getFontSize(node) {\n  return node.attributes.fontSize || 12;\n};\nvar getOrCreateFont = function getOrCreateFont(name) {\n  if (fontCache[name]) return fontCache[name];\n  var font = new StandardFont(name);\n  fontCache[name] = font;\n  return font;\n};\nvar getFallbackFont = function getFallbackFont() {\n  return getOrCreateFont('Helvetica');\n};\nvar pickFontFromFontStack = function pickFontFromFontStack(codePoint, fontStack, lastFont) {\n  var fontStackWithFallback = [].concat(fontStack, [getFallbackFont()]);\n  if (lastFont) {\n    fontStackWithFallback.unshift(lastFont);\n  }\n  for (var i = 0; i < fontStackWithFallback.length; i += 1) {\n    var font = fontStackWithFallback[i];\n    if (!IGNORED_CODE_POINTS.includes(codePoint) && font && font.hasGlyphForCodePoint && font.hasGlyphForCodePoint(codePoint)) {\n      return font;\n    }\n  }\n  return getFallbackFont();\n};\nvar fontSubstitution = function fontSubstitution() {\n  return function (_ref) {\n    var string = _ref.string,\n      runs = _ref.runs;\n    var lastFont = null;\n    var lastFontSize = null;\n    var lastIndex = 0;\n    var index = 0;\n    var res = [];\n    for (var i = 0; i < runs.length; i += 1) {\n      var run = runs[i];\n      var defaultFont = typeof run.attributes.font === 'string' ? getOrCreateFont(run.attributes.font) : run.attributes.font;\n      if (string.length === 0) {\n        res.push({\n          start: 0,\n          end: 0,\n          attributes: {\n            font: defaultFont\n          }\n        });\n        break;\n      }\n      var chars = string.slice(run.start, run.end);\n      for (var j = 0; j < chars.length; j += 1) {\n        var char = chars[j];\n        var codePoint = char.codePointAt();\n        // If the default font does not have a glyph and the fallback font does, we use it\n        var font = pickFontFromFontStack(codePoint, run.attributes.font, lastFont);\n        var fontSize = getFontSize(run);\n\n        // If anything that would impact res has changed, update it\n        if (font !== lastFont || fontSize !== lastFontSize || font.unitsPerEm !== lastFont.unitsPerEm) {\n          if (lastFont) {\n            res.push({\n              start: lastIndex,\n              end: index,\n              attributes: {\n                font: lastFont,\n                scale: lastFontSize / lastFont.unitsPerEm\n              }\n            });\n          }\n          lastFont = font;\n          lastFontSize = fontSize;\n          lastIndex = index;\n        }\n        index += char.length;\n      }\n    }\n    if (lastIndex < string.length) {\n      var _fontSize = getFontSize(last(runs));\n      res.push({\n        start: lastIndex,\n        end: string.length,\n        attributes: {\n          font: lastFont,\n          scale: _fontSize / lastFont.unitsPerEm\n        }\n      });\n    }\n    return {\n      string: string,\n      runs: res\n    };\n  };\n};\n\nvar isTextInstance$4 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\nvar engines$1 = {\n  bidi: bidi,\n  linebreaker: linebreaker,\n  justification: justification,\n  textDecoration: textDecoration,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution\n};\nvar engine$1 = layoutEngine(engines$1);\nvar getFragments$1 = function getFragments(fontStore, instance) {\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$props = instance.props,\n    _instance$props$fill = _instance$props.fill,\n    fill = _instance$props$fill === void 0 ? 'black' : _instance$props$fill,\n    _instance$props$fontF = _instance$props.fontFamily,\n    fontFamily = _instance$props$fontF === void 0 ? 'Helvetica' : _instance$props$fontF,\n    fontWeight = _instance$props.fontWeight,\n    fontStyle = _instance$props.fontStyle,\n    _instance$props$fontS = _instance$props.fontSize,\n    fontSize = _instance$props$fontS === void 0 ? 18 : _instance$props$fontS,\n    textDecorationColor = _instance$props.textDecorationColor,\n    textDecorationStyle = _instance$props.textDecorationStyle,\n    textTransform = _instance$props.textTransform,\n    opacity = _instance$props.opacity;\n  var _textDecoration = instance.props.textDecoration;\n  var obj = fontStore ? fontStore.getFont({\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  }) : null;\n  var font = obj ? obj.data : fontFamily;\n  var attributes = {\n    font: font,\n    opacity: opacity,\n    fontSize: fontSize,\n    color: fill,\n    underlineStyle: textDecorationStyle,\n    underline: _textDecoration === 'underline' || _textDecoration === 'underline line-through' || _textDecoration === 'line-through underline',\n    underlineColor: textDecorationColor || fill,\n    strike: _textDecoration === 'line-through' || _textDecoration === 'underline line-through' || _textDecoration === 'line-through underline',\n    strikeStyle: textDecorationStyle,\n    strikeColor: textDecorationColor || fill\n  };\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n    if (isTextInstance$4(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      fragments.push.apply(fragments, getFragments(child));\n    }\n  }\n  return fragments;\n};\nvar getAttributedString$1 = function getAttributedString(fontStore, instance) {\n  return fromFragments(getFragments$1(fontStore, instance));\n};\nvar AlmostInfinity = 999999999999;\nvar shrinkWhitespaceFactor = {\n  before: -0.5,\n  after: -0.5\n};\nvar layoutTspan = function layoutTspan(fontStore) {\n  return function (node) {\n    var _node$props, _node$props2;\n    var attributedString = getAttributedString$1(fontStore, node);\n    var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n    var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n    var container = {\n      x: x,\n      y: y,\n      width: AlmostInfinity,\n      height: AlmostInfinity\n    };\n    var hyphenationCallback = node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null;\n    var layoutOptions = {\n      hyphenationCallback: hyphenationCallback,\n      shrinkWhitespaceFactor: shrinkWhitespaceFactor\n    };\n    var lines = engine$1(attributedString, container, layoutOptions).flat();\n    return Object.assign({}, node, {\n      lines: lines\n    });\n  };\n};\nvar layoutText$1 = function layoutText(fontStore, node) {\n  if (!node.children) return node;\n  var children = node.children.map(layoutTspan(fontStore));\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar isDefs = function isDefs(node) {\n  return node.type === P.Defs;\n};\nvar getDefs = function getDefs(node) {\n  var children = node.children || [];\n  var defs = children.find(isDefs) || {};\n  var values = defs.children || [];\n  return values.reduce(function (acc, value) {\n    var _value$props;\n    var id = (_value$props = value.props) === null || _value$props === void 0 ? void 0 : _value$props.id;\n    if (id) acc[id] = value;\n    return acc;\n  }, {});\n};\n\nvar isNotDefs = function isNotDefs(node) {\n  return node.type !== P.Defs;\n};\nvar detachDefs = function detachDefs(node) {\n  if (!node.children) return node;\n  var children = node.children.filter(isNotDefs);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar URL_REGEX = /url\\(['\"]?#([^'\"]+)['\"]?\\)/;\nvar replaceDef = function replaceDef(defs, value) {\n  if (!value) return undefined;\n  if (!URL_REGEX.test(value)) return value;\n  var match = value.match(URL_REGEX);\n  return defs[match[1]];\n};\nvar parseNodeDefs = function parseNodeDefs(defs) {\n  return function (node) {\n    var _node$props, _node$props2;\n    var fill = replaceDef(defs, (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fill);\n    var clipPath = replaceDef(defs, (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.clipPath);\n    var props = Object.assign({}, node.props, {\n      fill: fill,\n      clipPath: clipPath\n    });\n    var children = node.children ? node.children.map(parseNodeDefs(defs)) : undefined;\n    return Object.assign({}, node, {\n      props: props,\n      children: children\n    });\n  };\n};\nvar parseDefs = function parseDefs(root) {\n  if (!root.children) return root;\n  var defs = getDefs(root);\n  var children = root.children.map(parseNodeDefs(defs));\n  return Object.assign({}, root, {\n    children: children\n  });\n};\nvar replaceDefs = function replaceDefs(node) {\n  return detachDefs(parseDefs(node));\n};\n\nvar parseViewbox = function parseViewbox(value) {\n  if (!value) return null;\n  var values = value.split(/[,\\s]+/).map(parseFloat);\n  if (values.length !== 4) return null;\n  return {\n    minX: values[0],\n    minY: values[1],\n    maxX: values[2],\n    maxY: values[3]\n  };\n};\n\nvar getContainer$1 = function getContainer(node) {\n  var viewbox = parseViewbox(node.props.viewBox);\n  if (viewbox) {\n    return {\n      width: viewbox.maxX,\n      height: viewbox.maxY\n    };\n  }\n  if (node.props.width && node.props.height) {\n    return {\n      width: parseFloat(node.props.width),\n      height: parseFloat(node.props.height)\n    };\n  }\n  return {\n    width: 0,\n    height: 0\n  };\n};\n\nvar SVG_INHERITED_PROPS = ['x', 'y', 'clipPath', 'clipRule', 'opacity', 'fill', 'fillOpacity', 'fillRule', 'stroke', 'strokeLinecap', 'strokeLinejoin', 'strokeOpacity', 'strokeWidth', 'textAnchor', 'dominantBaseline', 'color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\nvar getInheritProps = function getInheritProps(node) {\n  var props = node.props || {};\n  return pick(SVG_INHERITED_PROPS, props);\n};\nvar inheritProps = function inheritProps(node) {\n  if (!node.children) return node;\n  var inheritedProps = getInheritProps(node);\n  var children = node.children.map(function (child) {\n    var props = Object.assign({}, inheritedProps, child.props || {});\n    var newChild = Object.assign({}, child, {\n      props: props\n    });\n    return inheritProps(newChild);\n  });\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar parseAspectRatio = function parseAspectRatio(value) {\n  var match = value.replace(/[\\s\\r\\t\\n]+/gm, ' ').replace(/^defer\\s/, '').split(' ');\n  var align = match[0] || 'xMidYMid';\n  var meetOrSlice = match[1] || 'meet';\n  return {\n    align: align,\n    meetOrSlice: meetOrSlice\n  };\n};\n\nvar STYLE_PROPS = ['width', 'height', 'color', 'stroke', 'strokeWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'fill', 'fillRule', 'clipPath', 'offset', 'transform', 'strokeLinejoin', 'strokeLinecap', 'strokeDasharray'];\nvar VERTICAL_PROPS = ['y', 'y1', 'y2', 'height', 'cy', 'ry'];\nvar HORIZONTAL_PROPS = ['x', 'x1', 'x2', 'width', 'cx', 'rx'];\nvar isType$3 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isSvg$3 = isType$3(P.Svg);\nvar isText$5 = isType$3(P.Text);\nvar isTextInstance$3 = isType$3(P.TextInstance);\nvar transformPercent = function transformPercent(container) {\n  return function (props) {\n    return mapValues(props, function (value, key) {\n      var match = matchPercent(value);\n      if (match && VERTICAL_PROPS.includes(key)) {\n        return match.percent * container.height;\n      }\n      if (match && HORIZONTAL_PROPS.includes(key)) {\n        return match.percent * container.width;\n      }\n      return value;\n    });\n  };\n};\nvar parsePercent = function parsePercent(value) {\n  var match = matchPercent(value);\n  return match ? match.percent : parseFloat(value);\n};\nvar parseProps = function parseProps(container) {\n  return function (node) {\n    var props = transformPercent(container)(node.props);\n    props = evolve({\n      x: parseFloat,\n      x1: parseFloat,\n      x2: parseFloat,\n      y: parseFloat,\n      y1: parseFloat,\n      y2: parseFloat,\n      r: parseFloat,\n      rx: parseFloat,\n      ry: parseFloat,\n      cx: parseFloat,\n      cy: parseFloat,\n      width: parseFloat,\n      height: parseFloat,\n      offset: parsePercent,\n      fill: transformColor,\n      opacity: parsePercent,\n      stroke: transformColor,\n      stopOpacity: parsePercent,\n      stopColor: transformColor,\n      transform: processTransform\n    }, props);\n    return Object.assign({}, node, {\n      props: props\n    });\n  };\n};\nvar mergeStyles$1 = function mergeStyles(node) {\n  var style = node.style || {};\n  var props = Object.assign({}, style, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\nvar removeNoneValues = function removeNoneValues(node) {\n  var removeNone = function removeNone(value) {\n    return value === 'none' ? null : value;\n  };\n  var props = mapValues(node.props, removeNone);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\nvar pickStyleProps = function pickStyleProps(node) {\n  var props = node.props || {};\n  var styleProps = pick(STYLE_PROPS, props);\n  var style = Object.assign({}, styleProps, node.style || {});\n  return Object.assign({}, node, {\n    style: style\n  });\n};\nvar parseSvgProps = function parseSvgProps(node) {\n  var props = evolve({\n    width: parseFloat,\n    height: parseFloat,\n    viewBox: parseViewbox,\n    preserveAspectRatio: parseAspectRatio\n  }, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\nvar wrapBetweenTspan = function wrapBetweenTspan(node) {\n  return {\n    type: P.Tspan,\n    props: {},\n    children: [node]\n  };\n};\nvar addMissingTspan = function addMissingTspan(node) {\n  if (!isText$5(node)) return node;\n  if (!node.children) return node;\n  var resolveChild = function resolveChild(child) {\n    return isTextInstance$3(child) ? wrapBetweenTspan(child) : child;\n  };\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar parseText = function parseText(fontStore) {\n  return function (node) {\n    if (isText$5(node)) return layoutText$1(fontStore, node);\n    if (!node.children) return node;\n    var children = node.children.map(parseText(fontStore));\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\nvar resolveSvgNode = function resolveSvgNode(container) {\n  return compose(parseProps(container), addMissingTspan, removeNoneValues, mergeStyles$1);\n};\nvar resolveChildren = function resolveChildren(container) {\n  return function (node) {\n    if (!node.children) return node;\n    var resolveChild = compose(resolveChildren(container), resolveSvgNode(container));\n    var children = node.children.map(resolveChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\nvar resolveSvgRoot = function resolveSvgRoot(node, fontStore) {\n  var container = getContainer$1(node);\n  return compose(replaceDefs, parseText(fontStore), parseSvgProps, pickStyleProps, inheritProps, resolveChildren(container))(node);\n};\n\n/**\n * Pre-process SVG nodes so they can be rendered in the next steps\n *\n * @param {Object} node root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\nvar resolveSvg = function resolveSvg(node, fontStore) {\n  if (!node.children) return node;\n  var resolveChild = function resolveChild(child) {\n    return resolveSvg(child, fontStore);\n  };\n  var root = isSvg$3(node) ? resolveSvgRoot(node, fontStore) : node;\n  var children = root.children.map(resolveChild);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar loadYoga = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var instance, config, node;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return Yoga.loadYoga();\n        case 2:\n          instance = _context.sent;\n          config = instance.Config.create();\n          config.setPointScaleFactor(0);\n          node = {\n            create: function create() {\n              return instance.Node.createWithConfig(config);\n            }\n          };\n          return _context.abrupt(\"return\", {\n            node: node\n          });\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function loadYoga() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar resolveYoga = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(root) {\n    var yoga;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return loadYoga();\n        case 2:\n          yoga = _context.sent;\n          return _context.abrupt(\"return\", Object.assign({}, root, {\n            yoga: yoga\n          }));\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveYoga(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getZIndex = function getZIndex(node) {\n  return node.style.zIndex;\n};\nvar shouldSort = function shouldSort(node) {\n  return node.type !== P.Document && node.type !== P.Svg;\n};\nvar sortZIndex = function sortZIndex(a, b) {\n  var za = getZIndex(a);\n  var zb = getZIndex(b);\n  if (!za && !zb) return 0;\n  if (!za) return 1;\n  if (!zb) return -1;\n  return zb - za;\n};\n\n/**\n * Sort children by zIndex value\n *\n * @param {Object} node\n * @returns {Object} node\n */\nvar resolveZIndex = function resolveZIndex(node) {\n  if (!node.children) return node;\n  var sortedChildren = shouldSort(node) ? node.children.sort(sortZIndex) : node.children;\n  var children = sortedChildren.map(resolveZIndex);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\n// Caches emoji images data\nvar emojis = {};\nvar regex = emojiRegex();\nvar reflect = function reflect(promise) {\n  return function () {\n    return promise.apply(void 0, arguments).then(function (v) {\n      return v;\n    }, function (e) {\n      return e;\n    });\n  };\n};\n\n// Returns a function to be able to mock resolveImage.\nvar makeFetchEmojiImage = function makeFetchEmojiImage() {\n  return reflect(resolveImage);\n};\n\n/**\n * When an emoji as no variations, it might still have 2 parts,\n * the canonical emoji and an empty string.\n * ex.\n *   (no color) Array.from('❤️') => [\"❤\", \"️\"]\n *   (w/ color) Array.from('👍🏿') => [\"👍\", \"🏿\"]\n *\n * The empty string needs to be removed otherwise the generated\n * url will be incorect.\n */\nvar _removeVariationSelectors = function _removeVariationSelectors(x) {\n  return x !== '️';\n};\nvar getCodePoints = function getCodePoints(string, withVariationSelectors) {\n  return Array.from(string).filter(withVariationSelectors ? function () {\n    return true;\n  } : _removeVariationSelectors).map(function (char) {\n    return char.codePointAt(0).toString(16);\n  }).join('-');\n};\nvar buildEmojiUrl = function buildEmojiUrl(emoji, source) {\n  var url = source.url,\n    format = source.format,\n    builder = source.builder,\n    withVariationSelectors = source.withVariationSelectors;\n  if (typeof builder === 'function') {\n    return builder(getCodePoints(emoji, withVariationSelectors));\n  }\n  return \"\" + url + getCodePoints(emoji, withVariationSelectors) + \".\" + format;\n};\nvar fetchEmojis = function fetchEmojis(string, source) {\n  if (!source || !source.url && !source.builder) return [];\n  var promises = [];\n  Array.from(string.matchAll(regex)).forEach(function (match) {\n    var emoji = match[0];\n    if (!emojis[emoji] || emojis[emoji].loading) {\n      var emojiUrl = buildEmojiUrl(emoji, source);\n      emojis[emoji] = {\n        loading: true\n      };\n      var fetchEmojiImage = makeFetchEmojiImage();\n      promises.push(fetchEmojiImage({\n        uri: emojiUrl\n      }).then(function (image) {\n        emojis[emoji].loading = false;\n        emojis[emoji].data = image.data;\n      }));\n    }\n  });\n  return promises;\n};\nvar specialCases = ['©️', '®', '™']; // Do not treat these as emojis if emoji not present\n\nvar embedEmojis = function embedEmojis(fragments) {\n  var result = [];\n  var _loop = function _loop() {\n    var fragment = fragments[i];\n    var lastIndex = 0;\n    Array.from(fragment.string.matchAll(regex)).forEach(function (match) {\n      var index = match.index;\n      var emoji = match[0];\n      var isSpecialCase = specialCases.includes(emoji);\n      var emojiSize = fragment.attributes.fontSize;\n      var chunk = fragment.string.slice(lastIndex, index + match[0].length);\n\n      // If emoji image was found, we create a new fragment with the\n      // correct attachment and object substitution character;\n      if (emojis[emoji] && emojis[emoji].data) {\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0xfffc)),\n          attributes: _extends({}, fragment.attributes, {\n            attachment: {\n              width: emojiSize,\n              height: emojiSize,\n              yOffset: Math.floor(emojiSize * 0.1),\n              image: emojis[emoji].data\n            }\n          })\n        });\n      } else if (isSpecialCase) {\n        result.push({\n          string: chunk,\n          attributes: fragment.attributes\n        });\n      } else {\n        // If no emoji data, we just replace the emoji with a nodef char\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0)),\n          attributes: fragment.attributes\n        });\n      }\n      lastIndex = index + emoji.length;\n    });\n    if (lastIndex < fragment.string.length) {\n      result.push({\n        string: fragment.string.slice(lastIndex),\n        attributes: fragment.attributes\n      });\n    }\n  };\n  for (var i = 0; i < fragments.length; i += 1) {\n    _loop();\n  }\n  return result;\n};\n\n/**\n * Get image source\n *\n * @param {Object} node image node\n * @returns {string | Object} image src\n */\nvar getSource = function getSource(node) {\n  var _node$props, _node$props2, _node$props3;\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.src) || ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.source) || ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.href);\n};\n\n/**\n * Resolves `src` to `@react-pdf/image` interface.\n *\n * Also it handles factories and async sources.\n *\n * @param {string | Object | Function} src\n * @returns {Promise<Object>} resolved src\n */\nvar resolveSource = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(src) {\n    var source;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(typeof src === 'function')) {\n            _context.next = 6;\n            break;\n          }\n          _context.next = 3;\n          return src();\n        case 3:\n          _context.t0 = _context.sent;\n          _context.next = 9;\n          break;\n        case 6:\n          _context.next = 8;\n          return src;\n        case 8:\n          _context.t0 = _context.sent;\n        case 9:\n          source = _context.t0;\n          return _context.abrupt(\"return\", typeof source === 'string' ? {\n            uri: source\n          } : source);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveSource(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Fetches image and append data to node\n * Ideally this fn should be immutable.\n *\n * @param {Object} node\n */\nvar fetchImage = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(node) {\n    var src, cache, source;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          src = getSource(node);\n          cache = node.props.cache;\n          if (src) {\n            _context.next = 5;\n            break;\n          }\n          console.warn(false, 'Image should receive either a \"src\" or \"source\" prop');\n          return _context.abrupt(\"return\");\n        case 5:\n          _context.prev = 5;\n          _context.next = 8;\n          return resolveSource(src);\n        case 8:\n          source = _context.sent;\n          if (source) {\n            _context.next = 11;\n            break;\n          }\n          throw new Error(\"Image's \\\"src\\\" or \\\"source\\\" prop returned \" + source);\n        case 11:\n          _context.next = 13;\n          return resolveImage(source, {\n            cache: cache\n          });\n        case 13:\n          node.image = _context.sent;\n          node.image.key = source.data ? source.data.toString() : source.uri;\n          _context.next = 21;\n          break;\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](5);\n          node.image = {\n            width: 0,\n            height: 0,\n            key: null\n          };\n          console.warn(_context.t0.message);\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[5, 17]]);\n  }));\n  return function fetchImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isImage$2 = function isImage(node) {\n  return node.type === P.Image;\n};\n\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} fontStore font store\n * @param {Object} node root node\n * @returns {Promise<void>[]} asset promises\n */\nvar fetchAssets = function fetchAssets(fontStore, node) {\n  var _node$children;\n  var promises = [];\n  var listToExplore = ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.slice(0)) || [];\n  var emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n  while (listToExplore.length > 0) {\n    var _n$style;\n    var n = listToExplore.shift();\n    if (isImage$2(n)) {\n      promises.push(fetchImage(n));\n    }\n    if (fontStore && (_n$style = n.style) !== null && _n$style !== void 0 && _n$style.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n    if (typeof n === 'string') {\n      promises.push.apply(promises, fetchEmojis(n, emojiSource));\n    }\n    if (typeof n.value === 'string') {\n      promises.push.apply(promises, fetchEmojis(n.value, emojiSource));\n    }\n    if (n.children) {\n      n.children.forEach(function (childNode) {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n  return promises;\n};\n\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} node root node\n * @param {Object} fontStore font store\n * @returns {Promise<Object>} root node\n */\nvar resolveAssets = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(node, fontStore) {\n    var promises;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          promises = fetchAssets(fontStore, node);\n          _context.next = 3;\n          return Promise.all(promises);\n        case 3:\n          return _context.abrupt(\"return\", node);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveAssets(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isLink$1 = function isLink(node) {\n  return node.type === P.Link;\n};\nvar DEFAULT_LINK_STYLES = {\n  color: 'blue',\n  textDecoration: 'underline'\n};\n\n/**\n * Computes styles using stylesheet\n *\n * @param {Object} container\n * @param {Object} node document node\n * @returns {Object} computed styles\n */\nvar computeStyle = function computeStyle(container, node) {\n  var baseStyle = node.style;\n  if (isLink$1(node)) {\n    baseStyle = Array.isArray(node.style) ? [DEFAULT_LINK_STYLES].concat(node.style) : [DEFAULT_LINK_STYLES, node.style];\n  }\n  return stylesheet(container, baseStyle);\n};\n\n/**\n * @typedef {Function} ResolveNodeStyles\n * @param {Object} node document node\n * @returns {Object} node (and subnodes) with resolved styles\n */\n\n/**\n * Resolves node styles\n *\n * @param {Object} container\n * @returns {ResolveNodeStyles} resolve node styles\n */\nvar resolveNodeStyles = function resolveNodeStyles(container) {\n  return function (node) {\n    var style = computeStyle(container, node);\n    if (!node.children) return Object.assign({}, node, {\n      style: style\n    });\n    var children = node.children.map(resolveNodeStyles(container));\n    return Object.assign({}, node, {\n      style: style,\n      children: children\n    });\n  };\n};\n\n/**\n * Resolves page styles\n *\n * @param {Object} page document page\n * @returns {Object} document page with resolved styles\n */\nvar resolvePageStyles = function resolvePageStyles(page) {\n  var _page$props, _page$box, _page$box2, _page$props2;\n  var dpi = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.dpi) || 72;\n  var width = ((_page$box = page.box) === null || _page$box === void 0 ? void 0 : _page$box.width) || page.style.width;\n  var height = ((_page$box2 = page.box) === null || _page$box2 === void 0 ? void 0 : _page$box2.height) || page.style.height;\n  var orientation = ((_page$props2 = page.props) === null || _page$props2 === void 0 ? void 0 : _page$props2.orientation) || 'portrait';\n  var container = {\n    width: width,\n    height: height,\n    orientation: orientation,\n    dpi: dpi\n  };\n  return resolveNodeStyles(container)(page);\n};\n\n/**\n * Resolves document styles\n *\n * @param {Object} root document root\n * @returns {Object} document root with resolved styles\n */\nvar resolveStyles = function resolveStyles(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageStyles);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar getTransformStyle = function getTransformStyle(s) {\n  return function (node) {\n    var _node$style, _node$style2;\n    return isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style[s]) ? '50%' : (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2[s];\n  };\n};\n\n/**\n * Get node origin\n *\n * @param {Object} node\n * @returns {{ left?: number, top?: number }} node origin\n */\nvar getOrigin = function getOrigin(node) {\n  if (!node.box) return {};\n  var _node$box = node.box,\n    left = _node$box.left,\n    top = _node$box.top,\n    width = _node$box.width,\n    height = _node$box.height;\n  var transformOriginX = getTransformStyle('transformOriginX')(node);\n  var transformOriginY = getTransformStyle('transformOriginY')(node);\n  var percentX = matchPercent(transformOriginX);\n  var percentY = matchPercent(transformOriginY);\n  var offsetX = percentX ? width * percentX.percent : transformOriginX;\n  var offsetY = percentY ? height * percentY.percent : transformOriginY;\n  return {\n    left: left + offsetX,\n    top: top + offsetY\n  };\n};\n\n/**\n * Resolve node origin\n *\n * @param {Object} node\n * @returns {Object} node with origin attribute\n */\nvar resolveNodeOrigin = function resolveNodeOrigin(node) {\n  var origin = getOrigin(node);\n  var newNode = Object.assign({}, node, {\n    origin: origin\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolveNodeOrigin);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Resolve document origins\n *\n * @param {Object} root document root\n * @returns {Object} document root\n */\n\nvar resolveOrigin = function resolveOrigin(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolveNodeOrigin);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\n/* eslint-disable no-plusplus */\n/* eslint-disable prefer-const */\n/* eslint-disable prefer-destructuring */\n\nvar getBookmarkValue = function getBookmarkValue(title) {\n  return typeof title === 'string' ? {\n    title: title,\n    fit: false,\n    expanded: false\n  } : title;\n};\nvar resolveBookmarks = function resolveBookmarks(node) {\n  var refs = 0;\n  var children = (node.children || []).slice(0);\n  var listToExplore = children.map(function (value) {\n    return {\n      value: value,\n      parent: null\n    };\n  });\n  var _loop = function _loop() {\n    var _child$props;\n    var element = listToExplore.shift();\n    var child = element.value;\n    var parent = element.parent;\n    if ((_child$props = child.props) !== null && _child$props !== void 0 && _child$props.bookmark) {\n      var _parent;\n      var bookmark = getBookmarkValue(child.props.bookmark);\n      var ref = refs++;\n      var newHierarchy = _extends({\n        ref: ref,\n        parent: (_parent = parent) === null || _parent === void 0 ? void 0 : _parent.ref\n      }, bookmark);\n      child.props.bookmark = newHierarchy;\n      parent = newHierarchy;\n    }\n    if (child.children) {\n      child.children.forEach(function (childNode) {\n        listToExplore.push({\n          value: childNode,\n          parent: parent\n        });\n      });\n    }\n  };\n  while (listToExplore.length > 0) {\n    _loop();\n  }\n  return node;\n};\n\nvar VALID_ORIENTATIONS = ['portrait', 'landscape'];\n\n/**\n * Get page orientation. Defaults to portrait\n *\n * @param {Object} page object\n * @returns {string} page orientation\n */\nvar getOrientation = function getOrientation(page) {\n  var _page$props;\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.orientation) || 'portrait';\n  return VALID_ORIENTATIONS.includes(value) ? value : 'portrait';\n};\n\n/**\n * Return true if page is landscape\n *\n * @param {Object} page instance\n * @returns {boolean} is page landscape\n */\nvar isLandscape = function isLandscape(page) {\n  return getOrientation(page) === 'landscape';\n};\n\nvar PAGE_SIZES = {\n  '4A0': [4767.87, 6740.79],\n  '2A0': [3370.39, 4767.87],\n  A0: [2383.94, 3370.39],\n  A1: [1683.78, 2383.94],\n  A2: [1190.55, 1683.78],\n  A3: [841.89, 1190.55],\n  A4: [595.28, 841.89],\n  A5: [419.53, 595.28],\n  A6: [297.64, 419.53],\n  A7: [209.76, 297.64],\n  A8: [147.4, 209.76],\n  A9: [104.88, 147.4],\n  A10: [73.7, 104.88],\n  B0: [2834.65, 4008.19],\n  B1: [2004.09, 2834.65],\n  B2: [1417.32, 2004.09],\n  B3: [1000.63, 1417.32],\n  B4: [708.66, 1000.63],\n  B5: [498.9, 708.66],\n  B6: [354.33, 498.9],\n  B7: [249.45, 354.33],\n  B8: [175.75, 249.45],\n  B9: [124.72, 175.75],\n  B10: [87.87, 124.72],\n  C0: [2599.37, 3676.54],\n  C1: [1836.85, 2599.37],\n  C2: [1298.27, 1836.85],\n  C3: [918.43, 1298.27],\n  C4: [649.13, 918.43],\n  C5: [459.21, 649.13],\n  C6: [323.15, 459.21],\n  C7: [229.61, 323.15],\n  C8: [161.57, 229.61],\n  C9: [113.39, 161.57],\n  C10: [79.37, 113.39],\n  RA0: [2437.8, 3458.27],\n  RA1: [1729.13, 2437.8],\n  RA2: [1218.9, 1729.13],\n  RA3: [864.57, 1218.9],\n  RA4: [609.45, 864.57],\n  SRA0: [2551.18, 3628.35],\n  SRA1: [1814.17, 2551.18],\n  SRA2: [1275.59, 1814.17],\n  SRA3: [907.09, 1275.59],\n  SRA4: [637.8, 907.09],\n  EXECUTIVE: [521.86, 756.0],\n  FOLIO: [612.0, 936.0],\n  LEGAL: [612.0, 1008.0],\n  LETTER: [612.0, 792.0],\n  TABLOID: [792.0, 1224.0],\n  ID1: [153, 243]\n};\n\n/**\n * Transforms array into size object\n *\n * @param {number[]} v array\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar toSizeObject = function toSizeObject(v) {\n  return {\n    width: v[0],\n    height: v[1]\n  };\n};\n\n/**\n * Flip size object\n *\n * @param {{ width: number, height: number }} v size object\n * @returns {{ width: number, height: number }} flipped size object\n */\nvar flipSizeObject = function flipSizeObject(v) {\n  return {\n    width: v.height,\n    height: v.width\n  };\n};\n\n/**\n * Adjust page size to passed DPI\n *\n * @param {{ width: number, height: number }} v size object\n * @param {number} dpi DPI\n * @returns {{ width: number, height: number }} adjusted size object\n */\nvar adjustDpi = function adjustDpi(v, dpi) {\n  return {\n    width: v.width ? v.width * dpi : v.width,\n    height: v.height ? v.height * dpi : v.height\n  };\n};\n\n/**\n * Returns size object from a given string\n *\n * @param {string} v page size string\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar getStringSize = function getStringSize(v) {\n  return toSizeObject(PAGE_SIZES[v.toUpperCase()]);\n};\n\n/**\n * Returns size object from a single number\n *\n * @param {number} n page size number\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar getNumberSize = function getNumberSize(n) {\n  return toSizeObject([n]);\n};\n\n/**\n * Return page size in an object { width, height }\n *\n * @param {Object} page instance\n * @returns {{ width: number, height: number }} size object with width and height\n */\nvar getSize = function getSize(page) {\n  var _page$props, _page$props2;\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.size) || 'A4';\n  var dpi = parseFloat(((_page$props2 = page.props) === null || _page$props2 === void 0 ? void 0 : _page$props2.dpi) || 72);\n  var type = typeof value;\n\n  /**\n   * @type {{ width: number, height: number }}\n   */\n  var size;\n  if (type === 'string') {\n    size = getStringSize(value);\n  } else if (Array.isArray(value)) {\n    size = toSizeObject(value);\n  } else if (type === 'number') {\n    size = getNumberSize(value);\n  } else {\n    size = value;\n  }\n  size = adjustDpi(size, dpi / 72);\n  return isLandscape(page) ? flipSizeObject(size) : size;\n};\n\n/**\n * Resolves page size\n *\n * @param {Object} page\n * @returns {Object} page with resolved size in style attribute\n */\nvar resolvePageSize = function resolvePageSize(page) {\n  var size = getSize(page);\n  var style = flatten(page.style || {});\n  return _extends({}, page, {\n    style: _extends({}, style, size)\n  });\n};\n\n/**\n * Resolves page sizes\n *\n * @param {Object} root document root\n * @returns {Object} document root with resolved page sizes\n */\nvar resolvePageSizes = function resolvePageSizes(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageSize);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar isFixed = function isFixed(node) {\n  var _node$props;\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fixed) === true;\n};\n\n/**\n * Get line index at given height\n *\n * @param {Object} node\n * @param {number} height\n */\nvar lineIndexAtHeight = function lineIndexAtHeight(node, height) {\n  var y = 0;\n  if (!node.lines) return 0;\n  for (var i = 0; i < node.lines.length; i += 1) {\n    var line = node.lines[i];\n    if (y + line.box.height > height) return i;\n    y += line.box.height;\n  }\n  return node.lines.length;\n};\n\n/**\n * Get height for given text line index\n *\n * @param {Object} node\n * @param {number} index\n */\nvar heightAtLineIndex = function heightAtLineIndex(node, index) {\n  var counter = 0;\n  if (!node.lines) return counter;\n  for (var i = 0; i < index; i += 1) {\n    var line = node.lines[i];\n    if (!line) break;\n    counter += line.box.height;\n  }\n  return counter;\n};\n\nvar getLineBreak = function getLineBreak(node, height) {\n  var top = get(node, ['box', 'top'], 0);\n  var widows = get(node, ['props', 'widows'], 2);\n  var orphans = get(node, ['props', 'orphans'], 2);\n  var linesQuantity = node.lines.length;\n  var slicedLine = lineIndexAtHeight(node, height - top);\n  if (slicedLine === 0) {\n    return 0;\n  }\n  if (linesQuantity < orphans) {\n    return linesQuantity;\n  }\n  if (slicedLine < orphans || linesQuantity < orphans + widows) {\n    return 0;\n  }\n  if (linesQuantity === orphans + widows) {\n    return orphans;\n  }\n  if (linesQuantity - slicedLine < widows) {\n    return linesQuantity - widows;\n  }\n  return slicedLine;\n};\n\n// Also receives contentArea in case it's needed\nvar splitText = function splitText(node, height) {\n  var slicedLineIndex = getLineBreak(node, height);\n  var currentHeight = heightAtLineIndex(node, slicedLineIndex);\n  var nextHeight = node.box.height - currentHeight;\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      height: currentHeight,\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    }),\n    lines: node.lines.slice(0, slicedLineIndex)\n  });\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      height: nextHeight,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    }),\n    lines: node.lines.slice(slicedLineIndex)\n  });\n  return [current, next];\n};\n\nvar getTop$1 = function getTop(node) {\n  var _node$box;\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\nvar hasFixedHeight = function hasFixedHeight(node) {\n  var _node$style;\n  return !isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height);\n};\nvar splitNode = function splitNode(node, height) {\n  if (!node) return [null, null];\n  var nodeTop = getTop$1(node);\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    })\n  });\n  current.style.height = height - nodeTop;\n  var nextHeight = hasFixedHeight(node) ? node.box.height - (height - nodeTop) : null;\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    })\n  });\n  if (nextHeight) {\n    next.style.height = nextHeight;\n  }\n  return [current, next];\n};\n\nvar NON_WRAP_TYPES = [P.Svg, P.Note, P.Image, P.Canvas];\nvar getWrap = function getWrap(node) {\n  var _node$props;\n  if (NON_WRAP_TYPES.includes(node.type)) return false;\n  return isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.wrap) ? true : node.props.wrap;\n};\n\nvar getComputedPadding = function getComputedPadding(node, edge) {\n  var yogaNode = node.yogaNode;\n  return yogaNode ? yogaNode.getComputedPadding(edge) : null;\n};\n\n/**\n * Get Yoga computed paddings. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ paddingTop: number, paddingRight: number, paddingBottom: number, paddingLeft: number }} paddings\n */\nvar getPadding = function getPadding(node) {\n  var style = node.style,\n    box = node.box;\n  var paddingTop = getComputedPadding(node, Yoga.Edge.Top) || (box === null || box === void 0 ? void 0 : box.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingRight = getComputedPadding(node, Yoga.Edge.Right) || (box === null || box === void 0 ? void 0 : box.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingBottom = getComputedPadding(node, Yoga.Edge.Bottom) || (box === null || box === void 0 ? void 0 : box.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingLeft = getComputedPadding(node, Yoga.Edge.Left) || (box === null || box === void 0 ? void 0 : box.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  return {\n    paddingTop: paddingTop,\n    paddingRight: paddingRight,\n    paddingBottom: paddingBottom,\n    paddingLeft: paddingLeft\n  };\n};\n\nvar getWrapArea = function getWrapArea(page) {\n  var _page$style;\n  var _getPadding = getPadding(page),\n    paddingBottom = _getPadding.paddingBottom;\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n  return height - paddingBottom;\n};\n\nvar getContentArea = function getContentArea(page) {\n  var _page$style;\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n  var _getPadding = getPadding(page),\n    paddingTop = _getPadding.paddingTop,\n    paddingBottom = _getPadding.paddingBottom;\n  return height - paddingBottom - paddingTop;\n};\n\nvar _excluded = [\"style\", \"children\"];\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\nvar isNumber = function isNumber(value) {\n  return typeof value === 'number';\n};\nvar isFragment = function isFragment(value) {\n  return value && value.type === Symbol.for('react.fragment');\n};\n\n/**\n * Transforms a react element instance to internal element format.\n *\n * Can return multiple instances in the case of arrays or fragments.\n *\n * @param {Object} element React element\n * @returns {Object[]} parsed React elements\n */\nvar createInstances = function createInstances(element) {\n  if (!element) return [];\n  if (isString(element) || isNumber(element)) {\n    return [{\n      type: TextInstance,\n      value: \"\" + element\n    }];\n  }\n  if (isFragment(element)) {\n    return createInstances(element.props.children);\n  }\n  if (Array.isArray(element)) {\n    return element.reduce(function (acc, el) {\n      return acc.concat(createInstances(el));\n    }, []);\n  }\n  if (!isString(element.type)) {\n    return createInstances(element.type(element.props));\n  }\n  var type = element.type,\n    _element$props = element.props,\n    _element$props$style = _element$props.style,\n    style = _element$props$style === void 0 ? {} : _element$props$style,\n    _element$props$childr = _element$props.children,\n    children = _element$props$childr === void 0 ? [] : _element$props$childr,\n    props = _objectWithoutPropertiesLoose(_element$props, _excluded);\n  var nextChildren = castArray(children).reduce(function (acc, child) {\n    return acc.concat(createInstances(child));\n  }, []);\n  return [{\n    type: type,\n    style: style,\n    props: props,\n    box: {},\n    children: nextChildren\n  }];\n};\n\n/* eslint-disable no-continue */\n\nvar getBreak = function getBreak(node) {\n  var _node$props;\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.break) || false;\n};\nvar getMinPresenceAhead = function getMinPresenceAhead(node) {\n  var _node$props2;\n  return ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.minPresenceAhead) || 0;\n};\nvar getFurthestEnd = function getFurthestEnd(elements) {\n  return Math.max.apply(Math, elements.map(function (node) {\n    return node.box.top + node.box.height;\n  }));\n};\nvar getEndOfMinPresenceAhead = function getEndOfMinPresenceAhead(child) {\n  return child.box.top + child.box.height + child.box.marginBottom + getMinPresenceAhead(child);\n};\nvar getEndOfPresence = function getEndOfPresence(child, futureElements) {\n  var afterMinPresenceAhead = getEndOfMinPresenceAhead(child);\n  var endOfFurthestFutureElement = getFurthestEnd(futureElements.filter(function (node) {\n    var _node$props3;\n    return !((_node$props3 = node.props) !== null && _node$props3 !== void 0 && _node$props3.fixed);\n  }));\n  return Math.min(afterMinPresenceAhead, endOfFurthestFutureElement);\n};\nvar shouldBreak = function shouldBreak(child, futureElements, height) {\n  var _child$props;\n  if ((_child$props = child.props) !== null && _child$props !== void 0 && _child$props.fixed) return false;\n  var shouldSplit = height < child.box.top + child.box.height;\n  var canWrap = getWrap(child);\n\n  // Calculate the y coordinate where the desired presence of the child ends\n  var endOfPresence = getEndOfPresence(child, futureElements);\n  // If the child is already at the top of the page, breaking won't improve its presence\n  // (as long as react-pdf does not support breaking into differently sized containers)\n  var breakingImprovesPresence = child.box.top > child.box.marginTop;\n  return getBreak(child) || shouldSplit && !canWrap || !shouldSplit && endOfPresence > height && breakingImprovesPresence;\n};\n\nvar IGNORABLE_CODEPOINTS = [8232,\n// LINE_SEPARATOR\n8233 // PARAGRAPH_SEPARATOR\n];\nvar buildSubsetForFont = function buildSubsetForFont(font) {\n  return IGNORABLE_CODEPOINTS.reduce(function (acc, codePoint) {\n    if (font && font.hasGlyphForCodePoint && font.hasGlyphForCodePoint(codePoint)) {\n      return acc;\n    }\n    return [].concat(acc, [String.fromCharCode(codePoint)]);\n  }, []);\n};\nvar ignoreChars = function ignoreChars(fragments) {\n  return fragments.map(function (fragment) {\n    var charSubset = buildSubsetForFont(fragment.attributes.font);\n    var subsetRegex = new RegExp(charSubset.join('|'));\n    return {\n      string: fragment.string.replace(subsetRegex, ''),\n      attributes: fragment.attributes\n    };\n  });\n};\n\nvar PREPROCESSORS = [ignoreChars, embedEmojis];\nvar isImage$1 = function isImage(node) {\n  return node.type === P.Image;\n};\nvar isTextInstance$2 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\n\n/**\n * Get textkit fragments of given node object\n *\n * @param {Object} fontStore font store\n * @param {Object} instance node\n * @param {string} [parentLink] parent link\n * @param {number} [level] fragment level\n * @returns {Object[]} text fragments\n */\nvar getFragments = function getFragments(fontStore, instance, parentLink, level) {\n  var _instance$props, _instance$props2;\n  if (level === void 0) {\n    level = 0;\n  }\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n    _instance$style$color = _instance$style.color,\n    color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n    _instance$style$direc = _instance$style.direction,\n    direction = _instance$style$direc === void 0 ? 'ltr' : _instance$style$direc,\n    _instance$style$fontF = _instance$style.fontFamily,\n    fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n    fontWeight = _instance$style.fontWeight,\n    fontStyle = _instance$style.fontStyle,\n    _instance$style$fontS = _instance$style.fontSize,\n    fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n    textAlign = _instance$style.textAlign,\n    lineHeight = _instance$style.lineHeight,\n    textDecoration = _instance$style.textDecoration,\n    textDecorationColor = _instance$style.textDecorationColor,\n    textDecorationStyle = _instance$style.textDecorationStyle,\n    textTransform = _instance$style.textTransform,\n    letterSpacing = _instance$style.letterSpacing,\n    textIndent = _instance$style.textIndent,\n    opacity = _instance$style.opacity,\n    verticalAlign = _instance$style.verticalAlign;\n  var fontFamilies = typeof fontFamily === 'string' ? [fontFamily] : [].concat(fontFamily || []);\n  var font = fontFamilies.map(function (fontFamilyName) {\n    if (typeof fontFamilyName !== 'string') return fontFamilyName;\n    var opts = {\n      fontFamily: fontFamilyName,\n      fontWeight: fontWeight,\n      fontStyle: fontStyle\n    };\n    var obj = fontStore ? fontStore.getFont(opts) : null;\n    return obj ? obj.data : fontFamilyName;\n  });\n\n  // Don't pass main background color to textkit. Will be rendered by the render package instead\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    direction: direction,\n    verticalAlign: verticalAlign,\n    backgroundColor: backgroundColor,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: parentLink || ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null,\n    align: textAlign || (direction === 'rtl' ? 'right' : 'left')\n  };\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n    if (isImage$1(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: _extends({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance$2(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, attributes.link, level + 1));\n    }\n  }\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n  return fragments;\n};\n\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} fontStore font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return fromFragments(fragments);\n};\n\nvar engines = {\n  bidi: bidi,\n  linebreaker: linebreaker,\n  justification: justification,\n  textDecoration: textDecoration,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution\n};\nvar engine = layoutEngine(engines);\nvar getMaxLines = function getMaxLines(node) {\n  var _node$style;\n  return (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.maxLines;\n};\nvar getTextOverflow = function getTextOverflow(node) {\n  var _node$style2;\n  return (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.textOverflow;\n};\n\n/**\n * Get layout container for specific text node\n *\n * @param {number} width\n * @param {number} height\n * @param {Object} node\n * @returns {Object} layout container\n */\nvar getContainer = function getContainer(width, height, node) {\n  var maxLines = getMaxLines(node);\n  var textOverflow = getTextOverflow(node);\n  return {\n    x: 0,\n    y: 0,\n    width: width,\n    maxLines: maxLines,\n    height: height || Infinity,\n    truncateMode: textOverflow\n  };\n};\n\n/**\n * Get text layout options for specific text node\n *\n * @param {Object} node instance\n * @returns {Object} layout options\n */\nvar getLayoutOptions = function getLayoutOptions(fontStore, node) {\n  return {\n    hyphenationPenalty: node.props.hyphenationPenalty,\n    shrinkWhitespaceFactor: {\n      before: -0.5,\n      after: -0.5\n    },\n    hyphenationCallback: node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null\n  };\n};\n\n/**\n * Get text lines for given node\n *\n * @param {Object} node node\n * @param {number} width container width\n * @param {number} height container height\n * @param {number} fontStore font store\n * @returns {Object[]} layout lines\n */\nvar layoutText = function layoutText(node, width, height, fontStore) {\n  var attributedString = getAttributedString(fontStore, node);\n  var container = getContainer(width, height, node);\n  var options = getLayoutOptions(fontStore, node);\n  var lines = engine(attributedString, container, options);\n  return lines.reduce(function (acc, line) {\n    return [].concat(acc, line);\n  }, []);\n};\n\nvar isType$2 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isSvg$2 = isType$2(P.Svg);\nvar isText$4 = isType$2(P.Text);\nvar shouldIterate = function shouldIterate(node) {\n  return !isSvg$2(node) && !isText$4(node);\n};\nvar shouldLayoutText = function shouldLayoutText(node) {\n  return isText$4(node) && !node.lines;\n};\n\n/**\n * Performs text layout on text node if wasn't calculated before.\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\n * but we need to layout those nodes with fixed width and height.\n *\n * @param {Object} node\n * @returns {Object} layout node\n */\nvar resolveTextLayout = function resolveTextLayout(node, fontStore) {\n  if (shouldLayoutText(node)) {\n    var width = node.box.width - (node.box.paddingRight + node.box.paddingLeft);\n    var height = node.box.height - (node.box.paddingTop + node.box.paddingBottom);\n\n    // eslint-disable-next-line no-param-reassign\n    node.lines = layoutText(node, width, height, fontStore);\n  }\n  if (shouldIterate(node)) {\n    if (!node.children) return node;\n    var mapChild = function mapChild(child) {\n      return resolveTextLayout(child, fontStore);\n    };\n    var children = node.children.map(mapChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  }\n  return node;\n};\n\nvar BASE_INHERITABLE_PROPERTIES = ['color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'textTransform', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\nvar TEXT_INHERITABLE_PROPERTIES = [].concat(BASE_INHERITABLE_PROPERTIES, ['backgroundColor']);\nvar isSvg$1 = function isSvg(node) {\n  return node.type === P.Svg;\n};\nvar isText$3 = function isText(node) {\n  return node.type === P.Text;\n};\n\n// Merge style values\nvar mergeValues = function mergeValues(styleName, value, inheritedValue) {\n  switch (styleName) {\n    case 'textDecoration':\n      {\n        // merge not none and not false textDecoration values to one rule\n        return [inheritedValue, value].filter(function (v) {\n          return v && v !== 'none';\n        }).join(' ');\n      }\n    default:\n      return value;\n  }\n};\n\n// Merge inherited and node styles\nvar merge = function merge(inheritedStyles, style) {\n  var mergedStyles = _extends({}, inheritedStyles);\n  Object.entries(style).forEach(function (_ref) {\n    var styleName = _ref[0],\n      value = _ref[1];\n    mergedStyles[styleName] = mergeValues(styleName, value, inheritedStyles[styleName]);\n  });\n  return mergedStyles;\n};\n\n/**\n * @typedef {Function} MergeStyles\n * @param {Object} node\n * @returns {Object} node with styles merged\n */\n\n/**\n * Merges styles with node\n *\n * @param {Object} inheritedStyles style object\n * @returns {MergeStyles} merge styles function\n */\nvar mergeStyles = function mergeStyles(inheritedStyles) {\n  return function (node) {\n    var style = merge(inheritedStyles, node.style || {});\n    return Object.assign({}, node, {\n      style: style\n    });\n  };\n};\n\n/**\n * Inherit style values from the root to the leafs\n *\n * @param {Object} node document root\n * @returns {Object} document root with inheritance\n *\n */\nvar resolveInheritance = function resolveInheritance(node) {\n  if (isSvg$1(node)) return node;\n  if (!node.children) return node;\n  var inheritableProperties = isText$3(node) ? TEXT_INHERITABLE_PROPERTIES : BASE_INHERITABLE_PROPERTIES;\n  var inheritStyles = pick(inheritableProperties, node.style || {});\n  var resolveChild = compose(resolveInheritance, mergeStyles(inheritStyles));\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar getComputedMargin = function getComputedMargin(node, edge) {\n  var yogaNode = node.yogaNode;\n  return yogaNode ? yogaNode.getComputedMargin(edge) : null;\n};\n\n/**\n * Get Yoga computed magins. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ marginTop: number, marginRight: number, marginBottom: number, marginLeft: number }} margins\n */\nvar getMargin = function getMargin(node) {\n  var style = node.style,\n    box = node.box;\n  var marginTop = getComputedMargin(node, Yoga.Edge.Top) || (box === null || box === void 0 ? void 0 : box.marginTop) || (style === null || style === void 0 ? void 0 : style.marginTop) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginRight = getComputedMargin(node, Yoga.Edge.Right) || (box === null || box === void 0 ? void 0 : box.marginRight) || (style === null || style === void 0 ? void 0 : style.marginRight) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginBottom = getComputedMargin(node, Yoga.Edge.Bottom) || (box === null || box === void 0 ? void 0 : box.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginLeft = getComputedMargin(node, Yoga.Edge.Left) || (box === null || box === void 0 ? void 0 : box.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  return {\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom,\n    marginLeft: marginLeft\n  };\n};\n\n/**\n * Get Yoga computed position. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ top: number, right: number, bottom: number, left: number }} position\n */\nvar getPosition = function getPosition(node) {\n  var yogaNode = node.yogaNode;\n  return {\n    top: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedTop()) || 0,\n    right: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedRight()) || 0,\n    bottom: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedBottom()) || 0,\n    left: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedLeft()) || 0\n  };\n};\n\nvar DEFAULT_DIMENSION = {\n  width: 0,\n  height: 0\n};\n\n/**\n * Get Yoga computed dimensions. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ width: number, height: number }} dimensions\n */\nvar getDimension = function getDimension(node) {\n  var yogaNode = node.yogaNode;\n  if (!yogaNode) return DEFAULT_DIMENSION;\n  return {\n    width: yogaNode.getComputedWidth(),\n    height: yogaNode.getComputedHeight()\n  };\n};\n\nvar getComputedBorder = function getComputedBorder(yogaNode, edge) {\n  return yogaNode ? yogaNode.getComputedBorder(edge) : 0;\n};\n\n/**\n * Get Yoga computed border width. Zero otherwise\n *\n * @param {Object} node\n * @returns {{ borderTopWidth: number, borderRightWidth: number, borderBottomWidth: number, borderLeftWidth: number }} border widths\n */\nvar getBorderWidth = function getBorderWidth(node) {\n  var yogaNode = node.yogaNode;\n  return {\n    borderTopWidth: getComputedBorder(yogaNode, Yoga.Edge.Top),\n    borderRightWidth: getComputedBorder(yogaNode, Yoga.Edge.Right),\n    borderBottomWidth: getComputedBorder(yogaNode, Yoga.Edge.Bottom),\n    borderLeftWidth: getComputedBorder(yogaNode, Yoga.Edge.Left)\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set display attribute to node's Yoga instance\n *\n * @param {string} value display\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setDisplay = function setDisplay(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (yogaNode) {\n      yogaNode.setDisplay(value === 'none' ? Yoga.Display.None : Yoga.Display.Flex);\n    }\n    return node;\n  };\n};\n\nvar OVERFLOW = {\n  hidden: Yoga.Overflow.Hidden,\n  scroll: Yoga.Overflow.Scroll\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set overflow attribute to node's Yoga instance\n *\n * @param {string} value overflow value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setOverflow = function setOverflow(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      var overflow = OVERFLOW[value] || Yoga.Overflow.Visible;\n      yogaNode.setOverflow(overflow);\n    }\n    return node;\n  };\n};\n\nvar FLEX_WRAP = {\n  wrap: Yoga.Wrap.Wrap,\n  'wrap-reverse': Yoga.Wrap.WrapReverse\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex wrap attribute to node's Yoga instance\n *\n * @param {string} value flex wrap value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexWrap = function setFlexWrap(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (yogaNode) {\n      var flexWrap = FLEX_WRAP[value] || Yoga.Wrap.NoWrap;\n      yogaNode.setFlexWrap(flexWrap);\n    }\n    return node;\n  };\n};\n\n/* eslint-disable no-unused-expressions */\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * @typedef {Function} YogaValueSetter\n * @param {any} value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\n\n/**\n * Set generic yoga attribute to node's Yoga instance, handing `auto`, edges and percentage cases\n *\n * @param {string} attr property\n * @param {number} [edge] edge\n * @returns {YogaValueSetter} node instance wrapper\n */\nvar setYogaValue = function setYogaValue(attr, edge) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node.yogaNode;\n      if (!isNil(value) && yogaNode) {\n        var hasEdge = !isNil(edge);\n        var fixedMethod = \"set\" + upperFirst(attr);\n        var autoMethod = fixedMethod + \"Auto\";\n        var percentMethod = fixedMethod + \"Percent\";\n        var percent = matchPercent(value);\n        if (percent && !yogaNode[percentMethod]) {\n          throw new Error(\"You can't pass percentage values to \" + attr + \" property\");\n        }\n        if (percent) {\n          if (hasEdge) {\n            var _yogaNode$percentMeth;\n            (_yogaNode$percentMeth = yogaNode[percentMethod]) === null || _yogaNode$percentMeth === void 0 ? void 0 : _yogaNode$percentMeth.call(yogaNode, edge, percent.value);\n          } else {\n            var _yogaNode$percentMeth2;\n            (_yogaNode$percentMeth2 = yogaNode[percentMethod]) === null || _yogaNode$percentMeth2 === void 0 ? void 0 : _yogaNode$percentMeth2.call(yogaNode, percent.value);\n          }\n        } else if (value === 'auto') {\n          if (hasEdge) {\n            var _yogaNode$autoMethod;\n            (_yogaNode$autoMethod = yogaNode[autoMethod]) === null || _yogaNode$autoMethod === void 0 ? void 0 : _yogaNode$autoMethod.call(yogaNode, edge);\n          } else {\n            var _yogaNode$autoMethod2;\n            (_yogaNode$autoMethod2 = yogaNode[autoMethod]) === null || _yogaNode$autoMethod2 === void 0 ? void 0 : _yogaNode$autoMethod2.call(yogaNode);\n          }\n        } else if (hasEdge) {\n          var _yogaNode$fixedMethod;\n          (_yogaNode$fixedMethod = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod === void 0 ? void 0 : _yogaNode$fixedMethod.call(yogaNode, edge, value);\n        } else {\n          var _yogaNode$fixedMethod2;\n          (_yogaNode$fixedMethod2 = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod2 === void 0 ? void 0 : _yogaNode$fixedMethod2.call(yogaNode, value);\n        }\n      }\n      return node;\n    };\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex grow attribute to node's Yoga instance\n *\n * @param {number} value flex grow value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexGrow = function setFlexGrow(value) {\n  return function (node) {\n    return setYogaValue('flexGrow')(value || 0)(node);\n  };\n};\n\n/**\n * Set flex basis attribute to node's Yoga instance\n *\n * @param {number} flex basis value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setFlexBasis = setYogaValue('flexBasis');\n\nvar ALIGN = {\n  'flex-start': Yoga.Align.FlexStart,\n  center: Yoga.Align.Center,\n  'flex-end': Yoga.Align.FlexEnd,\n  stretch: Yoga.Align.Stretch,\n  baseline: Yoga.Align.Baseline,\n  'space-between': Yoga.Align.SpaceBetween,\n  'space-around': Yoga.Align.SpaceAround\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * @typedef {Function} AlignSetter\n * @param {string} value align value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\n\n/**\n * Set generic align attribute to node's Yoga instance\n *\n * @param {string} attr specific align property\n * @returns {AlignSetter} align setter\n */\nvar setAlign = function setAlign(attr) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node.yogaNode;\n      var defaultValue = attr === 'items' ? Yoga.Align.Stretch : Yoga.Align.Auto;\n      if (yogaNode) {\n        var align = ALIGN[value] || defaultValue;\n        yogaNode[\"setAlign\" + upperFirst(attr)](align);\n      }\n      return node;\n    };\n  };\n};\n\n/**\n * Set align self attribute to node's Yoga instance\n *\n * @param {string} align value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setAlignSelf = setAlign('self');\n\n/**\n * Set align items attribute to node's Yoga instance\n *\n * @param {string} align value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setAlignItems = setAlign('items');\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex shrink attribute to node's Yoga instance\n *\n * @param {number} value flex shrink value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexShrink = function setFlexShrink(value) {\n  return function (node) {\n    return setYogaValue('flexShrink')(value || 1)(node);\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set aspect ratio attribute to node's Yoga instance\n *\n * @param {number} value ratio\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setAspectRatio = function setAspectRatio(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setAspectRatio(value);\n    }\n    return node;\n  };\n};\n\n/**\n * Set align content attribute to node's Yoga instance\n *\n * @param {string} align value\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setAlignContent = setAlign('content');\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set position type attribute to node's Yoga instance\n *\n * @param {string} value position position type\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setPositionType = function setPositionType(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setPositionType(value === 'absolute' ? Yoga.PositionType.Absolute : Yoga.PositionType.Relative);\n    }\n    return node;\n  };\n};\n\nvar FLEX_DIRECTIONS = {\n  row: Yoga.FlexDirection.Row,\n  'row-reverse': Yoga.FlexDirection.RowReverse,\n  'column-reverse': Yoga.FlexDirection.ColumnReverse\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set flex direction attribute to node's Yoga instance\n *\n * @param {string} value flex direction value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setFlexDirection = function setFlexDirection(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (yogaNode) {\n      var flexDirection = FLEX_DIRECTIONS[value] || Yoga.FlexDirection.Column;\n      yogaNode.setFlexDirection(flexDirection);\n    }\n    return node;\n  };\n};\n\nvar JUSTIFY_CONTENT = {\n  center: Yoga.Justify.Center,\n  'flex-end': Yoga.Justify.FlexEnd,\n  'space-between': Yoga.Justify.SpaceBetween,\n  'space-around': Yoga.Justify.SpaceAround,\n  'space-evenly': Yoga.Justify.SpaceEvenly\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set justify content attribute to node's Yoga instance\n *\n * @param {string} value justify content value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setJustifyContent = function setJustifyContent(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      var justifyContent = JUSTIFY_CONTENT[value] || Yoga.Justify.FlexStart;\n      yogaNode.setJustifyContent(justifyContent);\n    }\n    return node;\n  };\n};\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set margin top attribute to node's Yoga instance\n *\n * @param {number} margin margin top\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginTop = setYogaValue('margin', Yoga.Edge.Top);\n\n/**\n * Set margin right attribute to node's Yoga instance\n *\n * @param {number} margin margin right\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginRight = setYogaValue('margin', Yoga.Edge.Right);\n\n/**\n * Set margin bottom attribute to node's Yoga instance\n *\n * @param {number} margin margin bottom\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginBottom = setYogaValue('margin', Yoga.Edge.Bottom);\n\n/**\n * Set margin left attribute to node's Yoga instance\n *\n * @param {number} margin margin left\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setMarginLeft = setYogaValue('margin', Yoga.Edge.Left);\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set padding top attribute to node's Yoga instance\n *\n * @param {number} padding padding top\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingTop = setYogaValue('padding', Yoga.Edge.Top);\n\n/**\n * Set padding right attribute to node's Yoga instance\n *\n * @param {number} padding padding right\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingRight = setYogaValue('padding', Yoga.Edge.Right);\n\n/**\n * Set padding bottom attribute to node's Yoga instance\n *\n * @param {number} padding padding bottom\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingBottom = setYogaValue('padding', Yoga.Edge.Bottom);\n\n/**\n * Set padding left attribute to node's Yoga instance\n *\n * @param {number} padding padding left\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPaddingLeft = setYogaValue('padding', Yoga.Edge.Left);\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set border top attribute to node's Yoga instance\n *\n * @param {number} border border top width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderTop = setYogaValue('border', Yoga.Edge.Top);\n\n/**\n * Set border right attribute to node's Yoga instance\n *\n * @param {number} border border right width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderRight = setYogaValue('border', Yoga.Edge.Right);\n\n/**\n * Set border bottom attribute to node's Yoga instance\n *\n * @param {number} border border bottom width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderBottom = setYogaValue('border', Yoga.Edge.Bottom);\n\n/**\n * Set border left attribute to node's Yoga instance\n *\n * @param {number} border border left width\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setBorderLeft = setYogaValue('border', Yoga.Edge.Left);\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Set position top attribute to node's Yoga instance\n *\n * @param {number} position position top\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionTop = setYogaValue('position', Yoga.Edge.Top);\n\n/**\n * Set position right attribute to node's Yoga instance\n *\n * @param {number} position position right\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionRight = setYogaValue('position', Yoga.Edge.Right);\n\n/**\n * Set position bottom attribute to node's Yoga instance\n *\n * @param {number} position position bottom\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionBottom = setYogaValue('position', Yoga.Edge.Bottom);\n\n/**\n * Set position left attribute to node's Yoga instance\n *\n * @param {number} position position left\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\nvar setPositionLeft = setYogaValue('position', Yoga.Edge.Left);\n\n/**\n * Set width to node's Yoga instance\n *\n * @param {number} width\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setWidth = setYogaValue('width');\n\n/**\n * Set min width to node's Yoga instance\n *\n * @param {number} min width\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMinWidth = setYogaValue('minWidth');\n\n/**\n * Set max width to node's Yoga instance\n *\n * @param {number} max width\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMaxWidth = setYogaValue('maxWidth');\n\n/**\n * Set height to node's Yoga instance\n *\n * @param {number} height\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setHeight = setYogaValue('height');\n\n/**\n * Set min height to node's Yoga instance\n *\n * @param {number} min height\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMinHeight = setYogaValue('minHeight');\n\n/**\n * Set max height to node's Yoga instance\n *\n * @param {number} max height\n * @param {Object} node instance\n * @returns {Object} node instance\n */\nvar setMaxHeight = setYogaValue('maxHeight');\n\n/**\n * @typedef {Function} NodeInstanceWrapper\n * @param {Object} node node instance\n * @returns {Object} node instance\n */\n\n/**\n * Check if value is a percentage and throw error if so\n *\n * @param {string} attr property\n * @param {unknown} value\n * @returns {void}\n */\nvar checkPercents = function checkPercents(attr, value) {\n  var percent = matchPercent(value);\n  if (percent) {\n    throw new Error(\"You can't pass percentage values to \" + attr + \" property\");\n  }\n};\n\n/**\n * Set rowGap value to node's Yoga instance\n *\n * @param {number} value gap value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setRowGap = function setRowGap(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      checkPercents('rowGap', value);\n      yogaNode.setGap(Yoga.Gutter.Row, value);\n    }\n    return node;\n  };\n};\n\n/**\n * Set columnGap value to node's Yoga instance\n *\n * @param {number} value gap value\n * @returns {NodeInstanceWrapper} node instance wrapper\n */\nvar setColumnGap = function setColumnGap(value) {\n  return function (node) {\n    var yogaNode = node.yogaNode;\n    if (!isNil(value) && yogaNode) {\n      checkPercents('columnGap', value);\n      yogaNode.setGap(Yoga.Gutter.Column, value);\n    }\n    return node;\n  };\n};\n\nvar getAspectRatio = function getAspectRatio(viewbox) {\n  if (!viewbox) return null;\n  return (viewbox.maxX - viewbox.minX) / (viewbox.maxY - viewbox.minY);\n};\n\n/**\n * @typedef {Function} MeasureSvg\n * @param {number} width\n * @param {number} widthMode\n * @param {number} height\n * @param {number} heightMode\n * @returns {{ width: number, height: number }} svg width and height\n */\n\n/**\n * Yoga svg measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @returns {MeasureSvg} measure svg\n */\nvar measureCanvas$1 = function measureCanvas(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var aspectRatio = getAspectRatio(node.props.viewBox) || 1;\n    if (widthMode === Yoga.MeasureMode.Exactly || widthMode === Yoga.MeasureMode.AtMost) {\n      return {\n        width: width,\n        height: width / aspectRatio\n      };\n    }\n    if (heightMode === Yoga.MeasureMode.Exactly) {\n      return {\n        width: height * aspectRatio\n      };\n    }\n    return {};\n  };\n};\n\n/**\n * Get lines width (if any)\n *\n * @param {Object} node\n * @returns {number} lines width\n */\nvar linesWidth = function linesWidth(node) {\n  if (!node.lines) return 0;\n  return Math.max.apply(Math, [0].concat(node.lines.map(function (line) {\n    return line.xAdvance;\n  })));\n};\n\n/**\n * Get lines height (if any)\n *\n * @param {Object} node\n * @returns {number} lines height\n */\nvar linesHeight = function linesHeight(node) {\n  if (!node.lines) return -1;\n  return node.lines.reduce(function (acc, line) {\n    return acc + line.box.height;\n  }, 0);\n};\n\n/* eslint-disable no-param-reassign */\n\nvar ALIGNMENT_FACTORS = {\n  center: 0.5,\n  right: 1\n};\n\n/**\n * @typedef {Function} MeasureText\n * @param {number} width\n * @param {number} widthMode\n * @param {number} height\n * @returns {{ width: number, height: number }} text width and height\n */\n\n/**\n * Yoga text measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Object} fontStore\n * @returns {MeasureText} measure text function\n */\nvar measureText = function measureText(page, node, fontStore) {\n  return function (width, widthMode, height) {\n    if (widthMode === Yoga.MeasureMode.Exactly) {\n      if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\n      return {\n        height: linesHeight(node)\n      };\n    }\n    if (widthMode === Yoga.MeasureMode.AtMost) {\n      var _node$style;\n      var alignFactor = ALIGNMENT_FACTORS[(_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.textAlign] || 0;\n      if (!node.lines) {\n        node.lines = layoutText(node, width, height, fontStore);\n        node.alignOffset = (width - linesWidth(node)) * alignFactor; // Compensate align in variable width containers\n      }\n      return {\n        height: linesHeight(node),\n        width: Math.min(width, linesWidth(node))\n      };\n    }\n    return {};\n  };\n};\n\n/**\n * Get image ratio\n *\n * @param {Object} node image node\n * @returns {number} image ratio\n */\nvar getRatio = function getRatio(node) {\n  var _node$image;\n  return (_node$image = node.image) !== null && _node$image !== void 0 && _node$image.data ? node.image.width / node.image.height : 1;\n};\n\n/**\n * Checks if page has auto height\n *\n * @param {Object} page\n * @returns {boolean} is page height auto\n */\nvar isHeightAuto = function isHeightAuto(page) {\n  var _page$box;\n  return isNil((_page$box = page.box) === null || _page$box === void 0 ? void 0 : _page$box.height);\n};\n\nvar SAFETY_HEIGHT$1 = 10;\n\n/**\n * @typedef {Function} MeasureImage\n * @param {number} width\n * @param {number} widthMode\n * @param {number} height\n * @param {number} heightMode\n * @returns {{ width: number, height: number }} image width and height\n */\n\n/**\n * Yoga image measure function\n *\n * @param {Object} page page\n * @param {Object} node node\n * @returns {MeasureImage} measure image\n */\nvar measureImage = function measureImage(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var imageRatio = getRatio(node);\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT$1;\n\n    // Skip measure if image data not present yet\n    if (!node.image) return {\n      width: 0,\n      height: 0\n    };\n    if (widthMode === Yoga.MeasureMode.Exactly && heightMode === Yoga.MeasureMode.Undefined) {\n      var scaledHeight = width / imageRatio;\n      return {\n        height: Math.min(pageArea, scaledHeight)\n      };\n    }\n    if (heightMode === Yoga.MeasureMode.Exactly && (widthMode === Yoga.MeasureMode.AtMost || widthMode === Yoga.MeasureMode.Undefined)) {\n      return {\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n    if (widthMode === Yoga.MeasureMode.Exactly && heightMode === Yoga.MeasureMode.AtMost) {\n      var _scaledHeight = width / imageRatio;\n      return {\n        height: Math.min(height, pageArea, _scaledHeight)\n      };\n    }\n    if (widthMode === Yoga.MeasureMode.AtMost && heightMode === Yoga.MeasureMode.AtMost) {\n      if (imageRatio > 1) {\n        return {\n          width: width,\n          height: Math.min(width / imageRatio, height)\n        };\n      }\n      return {\n        height: height,\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n    return {\n      height: height,\n      width: width\n    };\n  };\n};\n\n/* eslint-disable no-param-reassign */\n\nvar SAFETY_HEIGHT = 10;\nvar getMax = function getMax(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n\n/**\n * Helper object to predict canvas size\n * TODO: Implement remaining functions (as close as possible);\n */\nvar measureCtx = function measureCtx() {\n  var ctx = {};\n  var points = [];\n  var nil = function nil() {\n    return ctx;\n  };\n  var addPoint = function addPoint(x, y) {\n    return points.push([x, y]);\n  };\n  var moveTo = function moveTo() {\n    addPoint.apply(void 0, arguments);\n    return ctx;\n  };\n  var rect = function rect(x, y, w, h) {\n    addPoint(x, y);\n    addPoint(x + w, y);\n    addPoint(x, y + h);\n    addPoint(x + w, y + h);\n    return ctx;\n  };\n  var ellipse = function ellipse(x, y, rx, ry) {\n    ry = ry || rx;\n    addPoint(x - rx, y - ry);\n    addPoint(x + rx, y - ry);\n    addPoint(x + rx, y + ry);\n    addPoint(x - rx, y + ry);\n    return ctx;\n  };\n  var polygon = function polygon() {\n    points.push.apply(points, arguments);\n    return ctx;\n  };\n\n  // Change dimensions\n  ctx.rect = rect;\n  ctx.moveTo = moveTo;\n  ctx.lineTo = moveTo;\n  ctx.circle = ellipse;\n  ctx.polygon = polygon;\n  ctx.ellipse = ellipse;\n  ctx.roundedRect = rect;\n\n  // To be implemented\n  ctx.text = nil;\n  ctx.path = nil;\n  ctx.lineWidth = nil;\n  ctx.bezierCurveTo = nil;\n  ctx.quadraticCurveTo = nil;\n  ctx.scale = nil;\n  ctx.rotate = nil;\n  ctx.translate = nil;\n\n  // These don't change dimensions\n  ctx.dash = nil;\n  ctx.clip = nil;\n  ctx.save = nil;\n  ctx.fill = nil;\n  ctx.font = nil;\n  ctx.stroke = nil;\n  ctx.lineCap = nil;\n  ctx.opacity = nil;\n  ctx.restore = nil;\n  ctx.lineJoin = nil;\n  ctx.fontSize = nil;\n  ctx.fillColor = nil;\n  ctx.miterLimit = nil;\n  ctx.strokeColor = nil;\n  ctx.fillOpacity = nil;\n  ctx.strokeOpacity = nil;\n  ctx.linearGradient = nil;\n  ctx.radialGradient = nil;\n  ctx.getWidth = function () {\n    return getMax(points.map(function (p) {\n      return p[0];\n    }));\n  };\n  ctx.getHeight = function () {\n    return getMax(points.map(function (p) {\n      return p[1];\n    }));\n  };\n  return ctx;\n};\n\n/**\n * @typedef {Function} MeasureCanvas\n * @returns {{ width: number, height: number }} canvas width and height\n */\n\n/**\n * Yoga canvas measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @returns {MeasureCanvas} measure canvas\n */\nvar measureCanvas = function measureCanvas(page, node) {\n  return function () {\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT;\n    var ctx = measureCtx();\n    node.props.paint(ctx);\n    var width = ctx.getWidth();\n    var height = Math.min(pageArea, ctx.getHeight());\n    return {\n      width: width,\n      height: height\n    };\n  };\n};\n\nvar isType$1 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isSvg = isType$1(P.Svg);\nvar isText$2 = isType$1(P.Text);\nvar isNote = isType$1(P.Note);\nvar isPage = isType$1(P.Page);\nvar isImage = isType$1(P.Image);\nvar isCanvas = isType$1(P.Canvas);\nvar isTextInstance$1 = isType$1(P.TextInstance);\nvar setNodeHeight = function setNodeHeight(node) {\n  var value = isPage(node) ? node.box.height : node.style.height;\n  return setHeight(value);\n};\n\n/**\n * Set styles valeus into yoga node before layout calculation\n *\n * @param {Object} node\n * @returns {Object} node\n */\nvar setYogaValues = function setYogaValues(node) {\n  compose(setNodeHeight(node), setWidth(node.style.width), setMinWidth(node.style.minWidth), setMaxWidth(node.style.maxWidth), setMinHeight(node.style.minHeight), setMaxHeight(node.style.maxHeight), setMarginTop(node.style.marginTop), setMarginRight(node.style.marginRight), setMarginBottom(node.style.marginBottom), setMarginLeft(node.style.marginLeft), setPaddingTop(node.style.paddingTop), setPaddingRight(node.style.paddingRight), setPaddingBottom(node.style.paddingBottom), setPaddingLeft(node.style.paddingLeft), setPositionType(node.style.position), setPositionTop(node.style.top), setPositionRight(node.style.right), setPositionBottom(node.style.bottom), setPositionLeft(node.style.left), setBorderTop(node.style.borderTopWidth), setBorderRight(node.style.borderRightWidth), setBorderBottom(node.style.borderBottomWidth), setBorderLeft(node.style.borderLeftWidth), setDisplay(node.style.display), setFlexDirection(node.style.flexDirection), setAlignSelf(node.style.alignSelf), setAlignContent(node.style.alignContent), setAlignItems(node.style.alignItems), setJustifyContent(node.style.justifyContent), setFlexWrap(node.style.flexWrap), setOverflow(node.style.overflow), setAspectRatio(node.style.aspectRatio), setFlexBasis(node.style.flexBasis), setFlexGrow(node.style.flexGrow), setFlexShrink(node.style.flexShrink), setRowGap(node.style.rowGap), setColumnGap(node.style.columnGap))(node);\n};\n\n/**\n * @typedef {Function} InsertYogaNodes\n * @param {Object} child child node\n * @returns {Object} node\n */\n\n/**\n * Inserts child into parent' yoga node\n *\n * @param {Object} parent parent\n * @returns {InsertYogaNodes} insert yoga nodes\n */\nvar insertYogaNodes = function insertYogaNodes(parent) {\n  return function (child) {\n    parent.insertChild(child.yogaNode, parent.getChildCount());\n    return child;\n  };\n};\nvar setMeasureFunc = function setMeasureFunc(node, page, fontStore) {\n  var yogaNode = node.yogaNode;\n  if (isText$2(node)) {\n    yogaNode.setMeasureFunc(measureText(page, node, fontStore));\n  }\n  if (isImage(node)) {\n    yogaNode.setMeasureFunc(measureImage(page, node));\n  }\n  if (isCanvas(node)) {\n    yogaNode.setMeasureFunc(measureCanvas(page, node));\n  }\n  if (isSvg(node)) {\n    yogaNode.setMeasureFunc(measureCanvas$1(page, node));\n  }\n  return node;\n};\nvar isLayoutElement = function isLayoutElement(node) {\n  return !isText$2(node) && !isNote(node) && !isSvg(node);\n};\n\n/**\n * @typedef {Function} CreateYogaNodes\n * @param {Object} node\n * @returns {Object} node with appended yoga node\n */\n\n/**\n * Creates and add yoga node to document tree\n * Handles measure function for text and image nodes\n *\n * @returns {CreateYogaNodes} create yoga nodes\n */\nvar createYogaNodes = function createYogaNodes(page, fontStore, yoga) {\n  return function (node) {\n    var yogaNode = yoga.node.create();\n    var result = Object.assign({}, node, {\n      yogaNode: yogaNode\n    });\n    setYogaValues(result);\n    if (isLayoutElement(node) && node.children) {\n      var resolveChild = compose(insertYogaNodes(yogaNode), createYogaNodes(page, fontStore, yoga));\n      result.children = node.children.map(resolveChild);\n    }\n    setMeasureFunc(result, page, fontStore);\n    return result;\n  };\n};\n\n/**\n * Performs yoga calculation\n *\n * @param {Object} page page node\n * @returns {Object} page node\n */\nvar calculateLayout = function calculateLayout(page) {\n  page.yogaNode.calculateLayout();\n  return page;\n};\n\n/**\n * Saves Yoga layout result into 'box' attribute of node\n *\n * @param {Object} node\n * @returns {Object} node with box data\n */\nvar persistDimensions = function persistDimensions(node) {\n  if (isTextInstance$1(node)) return node;\n  var box = Object.assign(getPadding(node), getMargin(node), getBorderWidth(node), getPosition(node), getDimension(node));\n  var newNode = Object.assign({}, node, {\n    box: box\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(persistDimensions);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Removes yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\nvar destroyYogaNodes = function destroyYogaNodes(node) {\n  var newNode = Object.assign({}, node);\n  delete newNode.yogaNode;\n  if (!node.children) return newNode;\n  var children = node.children.map(destroyYogaNodes);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Free yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\nvar freeYogaNodes = function freeYogaNodes(node) {\n  if (node.yogaNode) node.yogaNode.freeRecursive();\n  return node;\n};\n\n/**\n * Calculates page object layout using Yoga.\n * Takes node values from 'box' and 'style' attributes, and persist them back into 'box'\n * Destroy yoga values at the end.\n *\n * @param {Object} page object\n * @returns {Object} page object with correct 'box' layout attributes\n */\nvar resolvePageDimensions = function resolvePageDimensions(page, fontStore, yoga) {\n  if (isNil(page)) return null;\n  return compose(destroyYogaNodes, freeYogaNodes, persistDimensions, calculateLayout, createYogaNodes(page, fontStore, yoga))(page);\n};\n\n/**\n * Calculates root object layout using Yoga.\n *\n * @param {Object} node root object\n * @param {Object} fontStore font store\n * @returns {Object} root object with correct 'box' layout attributes\n */\nvar resolveDimensions = function resolveDimensions(node, fontStore) {\n  if (!node.children) return node;\n  var resolveChild = function resolveChild(child) {\n    return resolvePageDimensions(child, fontStore, node.yoga);\n  };\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar isText$1 = function isText(node) {\n  return node.type === P.Text;\n};\n\n// Prevent splitting elements by low decimal numbers\nvar SAFETY_THRESHOLD = 0.001;\nvar assingChildren = function assingChildren(children, node) {\n  return Object.assign({}, node, {\n    children: children\n  });\n};\nvar getTop = function getTop(node) {\n  var _node$box;\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\nvar allFixed = function allFixed(nodes) {\n  return nodes.every(isFixed);\n};\nvar isDynamic = function isDynamic(node) {\n  var _node$props;\n  return !isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.render);\n};\nvar relayoutPage = compose(resolveTextLayout, resolvePageDimensions, resolveInheritance, resolvePageStyles);\nvar warnUnavailableSpace = function warnUnavailableSpace(node) {\n  console.warn(\"Node of type \" + node.type + \" can't wrap between pages and it's bigger than available page height\");\n};\nvar splitNodes = function splitNodes(height, contentArea, nodes) {\n  var currentChildren = [];\n  var nextChildren = [];\n  for (var i = 0; i < nodes.length; i += 1) {\n    var child = nodes[i];\n    var futureNodes = nodes.slice(i + 1);\n    var futureFixedNodes = futureNodes.filter(isFixed);\n    var nodeTop = getTop(child);\n    var nodeHeight = child.box.height;\n    var isOutside = height <= nodeTop;\n    var shouldBreak$1 = shouldBreak(child, futureNodes, height);\n    var shouldSplit = height + SAFETY_THRESHOLD < nodeTop + nodeHeight;\n    var canWrap = getWrap(child);\n    var fitsInsidePage = nodeHeight <= contentArea;\n    if (isFixed(child)) {\n      nextChildren.push(child);\n      currentChildren.push(child);\n      continue;\n    }\n    if (isOutside) {\n      var box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n      var next = Object.assign({}, child, {\n        box: box\n      });\n      nextChildren.push(next);\n      continue;\n    }\n    if (!fitsInsidePage && !canWrap) {\n      currentChildren.push(child);\n      nextChildren.push.apply(nextChildren, futureNodes);\n      warnUnavailableSpace(child);\n      break;\n    }\n    if (shouldBreak$1) {\n      var _box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n      var props = Object.assign({}, child.props, {\n        wrap: true,\n        break: false\n      });\n      var _next = Object.assign({}, child, {\n        box: _box,\n        props: props\n      });\n      currentChildren.push.apply(currentChildren, futureFixedNodes);\n      nextChildren.push.apply(nextChildren, [_next].concat(futureNodes));\n      break;\n    }\n    if (shouldSplit) {\n      var _split = split(child, height, contentArea),\n        currentChild = _split[0],\n        nextChild = _split[1];\n\n      // All children are moved to the next page, it doesn't make sense to show the parent on the current page\n      if (child.children.length > 0 && currentChild.children.length === 0) {\n        var _box2 = Object.assign({}, child.box, {\n          top: child.box.top - height\n        });\n        var _next2 = Object.assign({}, child, {\n          box: _box2\n        });\n        currentChildren.push.apply(currentChildren, futureFixedNodes);\n        nextChildren.push.apply(nextChildren, [_next2].concat(futureNodes));\n        break;\n      }\n      if (currentChild) currentChildren.push(currentChild);\n      if (nextChild) nextChildren.push(nextChild);\n      continue;\n    }\n    currentChildren.push(child);\n  }\n  return [currentChildren, nextChildren];\n};\nvar splitChildren = function splitChildren(height, contentArea, node) {\n  var children = node.children || [];\n  var availableHeight = height - getTop(node);\n  return splitNodes(availableHeight, contentArea, children);\n};\nvar splitView = function splitView(node, height, contentArea) {\n  var _splitNode = splitNode(node, height),\n    currentNode = _splitNode[0],\n    nextNode = _splitNode[1];\n  var _splitChildren = splitChildren(height, contentArea, node),\n    currentChilds = _splitChildren[0],\n    nextChildren = _splitChildren[1];\n  return [assingChildren(currentChilds, currentNode), assingChildren(nextChildren, nextNode)];\n};\nvar split = function split(node, height, contentArea) {\n  return isText$1(node) ? splitText(node, height) : splitView(node, height, contentArea);\n};\nvar shouldResolveDynamicNodes = function shouldResolveDynamicNodes(node) {\n  var children = node.children || [];\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\n};\nvar resolveDynamicNodes = function resolveDynamicNodes(props, node) {\n  var isNodeDynamic = isDynamic(node);\n\n  // Call render prop on dynamic nodes and append result to children\n  var resolveChildren = function resolveChildren(children) {\n    if (children === void 0) {\n      children = [];\n    }\n    if (isNodeDynamic) {\n      var res = node.props.render(props);\n      return createInstances(res).filter(Boolean).map(function (n) {\n        return resolveDynamicNodes(props, n);\n      });\n    }\n    return children.map(function (c) {\n      return resolveDynamicNodes(props, c);\n    });\n  };\n\n  // We reset dynamic text box so it can be computed again later on\n  var resetHeight = isNodeDynamic && isText$1(node);\n  var box = resetHeight ? _extends({}, node.box, {\n    height: 0\n  }) : node.box;\n  var children = resolveChildren(node.children);\n  var lines = isNodeDynamic ? null : node.lines;\n  return Object.assign({}, node, {\n    box: box,\n    lines: lines,\n    children: children\n  });\n};\nvar resolveDynamicPage = function resolveDynamicPage(props, page, fontStore, yoga) {\n  if (shouldResolveDynamicNodes(page)) {\n    var resolvedPage = resolveDynamicNodes(props, page);\n    return relayoutPage(resolvedPage, fontStore, yoga);\n  }\n  return page;\n};\nvar splitPage = function splitPage(page, pageNumber, fontStore, yoga) {\n  var wrapArea = getWrapArea(page);\n  var contentArea = getContentArea(page);\n  var dynamicPage = resolveDynamicPage({\n    pageNumber: pageNumber\n  }, page, fontStore, yoga);\n  var height = page.style.height;\n  var _splitNodes = splitNodes(wrapArea, contentArea, dynamicPage.children),\n    currentChilds = _splitNodes[0],\n    nextChilds = _splitNodes[1];\n  var relayout = function relayout(node) {\n    return relayoutPage(node, fontStore, yoga);\n  };\n  var currentBox = _extends({}, page.box, {\n    height: height\n  });\n  var currentPage = relayout(Object.assign({}, page, {\n    box: currentBox,\n    children: currentChilds\n  }));\n  if (nextChilds.length === 0 || allFixed(nextChilds)) return [currentPage, null];\n  var nextBox = omit('height', page.box);\n  var nextProps = omit('bookmark', page.props);\n  var nextPage = relayout(Object.assign({}, page, {\n    props: nextProps,\n    box: nextBox,\n    children: nextChilds\n  }));\n  return [currentPage, nextPage];\n};\nvar resolvePageIndices = function resolvePageIndices(fontStore, yoga, page, pageNumber, pages) {\n  var totalPages = pages.length;\n  var props = {\n    totalPages: totalPages,\n    pageNumber: pageNumber + 1,\n    subPageNumber: page.subPageNumber + 1,\n    subPageTotalPages: page.subPageTotalPages\n  };\n  return resolveDynamicPage(props, page, fontStore, yoga);\n};\nvar assocSubPageData = function assocSubPageData(subpages) {\n  return subpages.map(function (page, i) {\n    return _extends({}, page, {\n      subPageNumber: i,\n      subPageTotalPages: subpages.length\n    });\n  });\n};\nvar dissocSubPageData = function dissocSubPageData(page) {\n  return omit(['subPageNumber', 'subPageTotalPages'], page);\n};\nvar paginate = function paginate(page, pageNumber, fontStore, yoga) {\n  var _page$props;\n  if (!page) return [];\n  if (((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.wrap) === false) return [page];\n  var splittedPage = splitPage(page, pageNumber, fontStore, yoga);\n  var pages = [splittedPage[0]];\n  var nextPage = splittedPage[1];\n  while (nextPage !== null) {\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore, yoga);\n    pages.push(splittedPage[0]);\n    nextPage = splittedPage[1];\n  }\n  return pages;\n};\n\n/**\n * Performs pagination. This is the step responsible of breaking the whole document\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\n *\n * @param {Object} doc node\n * @param {Object} fontStore font store\n * @returns {Object} layout node\n */\nvar resolvePagination = function resolvePagination(doc, fontStore) {\n  var pages = [];\n  var pageNumber = 1;\n  for (var i = 0; i < doc.children.length; i += 1) {\n    var page = doc.children[i];\n    var subpages = paginate(page, pageNumber, fontStore, doc.yoga);\n    subpages = assocSubPageData(subpages);\n    pageNumber += subpages.length;\n    pages = pages.concat(subpages);\n  }\n  pages = pages.map(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return dissocSubPageData(resolvePageIndices.apply(void 0, [fontStore, doc.yoga].concat(args)));\n  });\n  return assingChildren(pages, doc);\n};\n\n/**\n * @typedef {Function} ResolvePageHorizontalPadding\n * @param {string} value padding value\n * @returns {Object} translated padding value\n */\n\n/**\n * Translates page percentage horizontal paddings in fixed ones\n *\n * @param {Object} container page container\n * @returns {ResolvePageHorizontalPadding} resolve page horizontal padding\n */\nvar resolvePageHorizontalPadding = function resolvePageHorizontalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.width : value;\n  };\n};\n\n/**\n * @typedef {Function} ResolvePageVerticalPadding\n * @param {string} padding value\n * @returns {Object} translated padding value\n */\n\n/**\n * Translates page percentage vertical paddings in fixed ones\n *\n * @param {Object} container page container\n * @returns {ResolvePageVerticalPadding} resolve page vertical padding\n */\nvar resolvePageVerticalPadding = function resolvePageVerticalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.height : value;\n  };\n};\n\n/**\n * Translates page percentage paddings in fixed ones\n *\n * @param {Object} page\n * @returns {Object} page with fixed paddings\n */\nvar resolvePagePaddings = function resolvePagePaddings(page) {\n  var container = page.style;\n  var style = evolve({\n    paddingTop: resolvePageVerticalPadding(container),\n    paddingLeft: resolvePageHorizontalPadding(container),\n    paddingRight: resolvePageHorizontalPadding(container),\n    paddingBottom: resolvePageVerticalPadding(container)\n  }, page.style);\n  return Object.assign({}, page, {\n    style: style\n  });\n};\n\n/**\n * Translates all pages percentage paddings in fixed ones\n * This has to be computed from pages calculated size and not by Yoga\n * because at this point we didn't performed pagination yet.\n *\n * @param {Object} root document root\n * @returns {Object} document root with translated page paddings\n */\nvar resolvePagesPaddings = function resolvePagesPaddings(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePaddings);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\n/**\n * @typedef {Function} ResolveRadius\n * @param {string | number} value border radius value\n * @returns {number} resolved radius value\n */\n\n/**\n *\n * @param {{ width: number, height: number }} container width and height\n * @returns {ResolveRadius} resolve radius function\n */\nvar resolveRadius = function resolveRadius(container) {\n  return function (value) {\n    if (!value) return undefined;\n    var match = matchPercent(value);\n    return match ? match.percent * Math.min(container.width, container.height) : value;\n  };\n};\n\n/**\n * Transforms percent border radius into fixed values\n *\n * @param {Object} node\n * @returns {Object} node\n */\nvar resolvePercentRadius = function resolvePercentRadius(node) {\n  var style = evolve({\n    borderTopLeftRadius: resolveRadius(node.box),\n    borderTopRightRadius: resolveRadius(node.box),\n    borderBottomRightRadius: resolveRadius(node.box),\n    borderBottomLeftRadius: resolveRadius(node.box)\n  }, node.style || {});\n  var newNode = Object.assign({}, node, {\n    style: style\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolvePercentRadius);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Transform percent height into fixed\n *\n * @param {number} height\n * @returns {number} height\n */\nvar transformHeight = function transformHeight(pageArea, height) {\n  var match = matchPercent(height);\n  return match ? match.percent * pageArea : height;\n};\n\n/**\n * Get page area (height minus paddings)\n *\n * @param {Object} page\n * @returns {number} page area\n */\nvar getPageArea = function getPageArea(page) {\n  var _page$style, _page$style2;\n  var pageHeight = page.style.height;\n  var pagePaddingTop = ((_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.paddingTop) || 0;\n  var pagePaddingBottom = ((_page$style2 = page.style) === null || _page$style2 === void 0 ? void 0 : _page$style2.paddingBottom) || 0;\n  return pageHeight - pagePaddingTop - pagePaddingBottom;\n};\n\n/**\n * Transform node percent height to fixed\n *\n * @param {Object} page\n * @param {Object} node\n * @returns {Object} transformed node\n */\nvar resolveNodePercentHeight = function resolveNodePercentHeight(page, node) {\n  var _page$style3, _node$style;\n  if (isNil((_page$style3 = page.style) === null || _page$style3 === void 0 ? void 0 : _page$style3.height)) return node;\n  if (isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height)) return node;\n  var pageArea = getPageArea(page);\n  var height = transformHeight(pageArea, node.style.height);\n  var style = Object.assign({}, node.style, {\n    height: height\n  });\n  return Object.assign({}, node, {\n    style: style\n  });\n};\n\n/**\n * Transform page immediate children with percent height to fixed\n *\n * @param {Object} page\n * @returns {Object} transformed page\n */\nvar resolvePagePercentHeight = function resolvePagePercentHeight(page) {\n  if (!page.children) return page;\n  var resolveChild = function resolveChild(child) {\n    return resolveNodePercentHeight(page, child);\n  };\n  var children = page.children.map(resolveChild);\n  return Object.assign({}, page, {\n    children: children\n  });\n};\n\n/**\n * Transform all page immediate children with percent height to fixed.\n * This is needed for computing correct dimensions on pre-pagination layout.\n *\n * @param {Object} root document root\n * @returns {Object} transformed document root\n */\nvar resolvePercentHeight = function resolvePercentHeight(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePercentHeight);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar isType = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\nvar isLink = isType(P.Link);\nvar isText = isType(P.Text);\nvar isTextInstance = isType(P.TextInstance);\n\n/**\n * Checks if node has render prop\n *\n * @param {Object} node\n * @returns {boolean} has render prop?\n */\nvar hasRenderProp = function hasRenderProp(node) {\n  var _node$props;\n  return !!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.render);\n};\n\n/**\n * Checks if node is text type (Text or TextInstance)\n *\n * @param {Object} node\n * @returns {boolean} are all children text instances?\n */\nvar isTextType = function isTextType(node) {\n  return isText(node) || isTextInstance(node);\n};\n\n/**\n * Checks if is tet link that needs to be wrapped in Text\n *\n * @param {Object} node\n * @returns {boolean} are all children text instances?\n */\nvar isTextLink = function isTextLink(node) {\n  var children = node.children || [];\n\n  // Text string inside a Link\n  if (children.every(isTextInstance)) return true;\n\n  // Text node inside a Link\n  if (children.every(isText)) return false;\n  return children.every(isTextType);\n};\n\n/**\n * Wraps node children inside Text node\n *\n * @param {Object} node\n * @returns {boolean} node with intermediate Text child\n */\nvar wrapText = function wrapText(node) {\n  var textElement = {\n    type: P.Text,\n    props: {},\n    style: {},\n    box: {},\n    children: node.children\n  };\n  return Object.assign({}, node, {\n    children: [textElement]\n  });\n};\nvar transformLink = function transformLink(node) {\n  if (!isLink(node)) return node;\n\n  // If has render prop substitute the instance by a Text, that will\n  // ultimately render the inline Link via the textkit PDF renderer.\n  if (hasRenderProp(node)) return Object.assign({}, node, {\n    type: P.Text\n  });\n\n  // If is a text link (either contains Text or TextInstalce), wrap it\n  // inside a Text element so styles are applied correctly\n\n  if (isTextLink(node)) return wrapText(node);\n  return node;\n};\n\n/**\n * Transforms Link layout to correctly render text and dynamic rendered links\n *\n * @param {Object} node\n * @returns {Object} node with link substitution\n */\nvar resolveLinkSubstitution = function resolveLinkSubstitution(node) {\n  if (!node.children) return node;\n  var resolveChild = compose(transformLink, resolveLinkSubstitution);\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar layout = asyncCompose(resolveZIndex, resolveOrigin, resolveAssets, resolvePagination, resolveTextLayout, resolvePercentRadius, resolveDimensions, resolveSvg, resolveAssets, resolveInheritance, resolvePercentHeight, resolvePagesPaddings, resolveStyles, resolveLinkSubstitution, resolveBookmarks, resolvePageSizes, resolveYoga);\n\nexport { layout as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}